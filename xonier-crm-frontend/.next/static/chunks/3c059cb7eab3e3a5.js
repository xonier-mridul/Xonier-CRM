(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2988,e=>{"use strict";e.s(["default",0,e=>{let t=e?.response?.data;return t?Array.isArray(t.detail)?t.detail.map(e=>e.msg||"Invalid input"):"string"==typeof t.detail?[t.detail]:"string"==typeof t.message?[t.message]:["Unexpected error occurred"]:["Something went wrong"]}])},96924,e=>{"use strict";var t=e.i(71645);let s=t.default.createContext({});function l({count:e=1,wrapper:l,className:a,containerClassName:r,containerTestId:i,circle:d=!1,style:n,...o}){var c,u,x;let m=t.default.useContext(s),h={...o};for(let[e,t]of Object.entries(o))void 0===t&&delete h[e];let p={...m,...h,circle:d},f={...n,...function({baseColor:e,highlightColor:t,width:s,height:l,borderRadius:a,circle:r,direction:i,duration:d,enableAnimation:n=!0,customHighlightBackground:o}){let c={};return"rtl"===i&&(c["--animation-direction"]="reverse"),"number"==typeof d&&(c["--animation-duration"]=`${d}s`),n||(c["--pseudo-element-display"]="none"),("string"==typeof s||"number"==typeof s)&&(c.width=s),("string"==typeof l||"number"==typeof l)&&(c.height=l),("string"==typeof a||"number"==typeof a)&&(c.borderRadius=a),r&&(c.borderRadius="50%"),void 0!==e&&(c["--base-color"]=e),void 0!==t&&(c["--highlight-color"]=t),"string"==typeof o&&(c["--custom-highlight-background"]=o),c}(p)},g="react-loading-skeleton";a&&(g+=` ${a}`);let b=null!=(c=p.inline)&&c,j=[],y=Math.ceil(e);for(let s=0;s<y;s++){let l=f;if(y>e&&s===y-1){let t=null!=(u=l.width)?u:"100%",s=e%1,a="number"==typeof t?t*s:`calc(${t} * ${s})`;l={...l,width:a}}let a=t.default.createElement("span",{className:g,style:l,key:s},"‌");b?j.push(a):j.push(t.default.createElement(t.default.Fragment,{key:s},a,t.default.createElement("br",null)))}return t.default.createElement("span",{className:r,"data-testid":i,"aria-live":"polite","aria-busy":null==(x=p.enableAnimation)||x},l?j.map((e,s)=>t.default.createElement(l,{key:s},e)):j)}e.s(["default",()=>l])},3812,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(11152);e.s(["default",0,({label:e,error:a,type:r="text",className:i="",required:d=!1,...n})=>{let[o,c]=(0,s.useState)(!1),u="password"===r,x="textarea"===r,m=`
    w-full px-3 py-2 rounded-md border
    bg-white dark:bg-gray-700 text-black dark:text-white
    border-gray-300 dark:border-gray-300/30
    disabled:opacity-60 disabled:cursor-not-allowed
    focus:outline-none focus:ring-2 focus:ring-violet-500
    ${a?"border-red-500 focus:ring-red-500":""}
    ${i}
  `;return(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[e&&(0,t.jsxs)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 capitalize",children:[d&&(0,t.jsx)("span",{className:"text-red-500 text-xl",children:"*"})," ",e]}),(0,t.jsxs)("div",{className:"relative",children:[x?(0,t.jsx)("textarea",{required:d,className:`${m} resize-none`,rows:5,...n}):(0,t.jsx)("input",{type:u&&o?"text":r,required:d,className:m,...n}),u&&(0,t.jsx)("button",{type:"button",onClick:()=>c(e=>!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-blue-500",children:o?(0,t.jsx)(l.FaEyeSlash,{}):(0,t.jsx)(l.FaEye,{})})]}),a&&(0,t.jsx)("span",{className:"text-sm text-red-500",children:a})]})}])},34728,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.s(["default",0,({onClick:e})=>((0,s.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]),(0,t.jsx)("div",{onClick:e,className:" fixed inset-0 w-full h-full bg-black/30 backdrop-blur-sm z-[199] cursor-pointer ","aria-hidden":"true"}))])},43935,e=>{"use strict";var t=e.i(63816);e.s(["RoleService",0,{getRoles:e=>t.default.get(`/user-role/all?page=${e.currentPage}&limit=${e.pageLimit}`),getRolesWithoutPagination:()=>t.default.get("/user-role/all/active/without-pagination"),getRoleById:e=>t.default.get(`/user-role/get-by-id/${e}`),update:(e,s)=>t.default.put(`/user-role/update/${e}`,s),create:e=>t.default.post("/user-role/create",e),delete:e=>t.default.delete(`/user-role/delete/${e}`)}])},34390,e=>{"use strict";var t=e.i(63816);e.s(["PermissionsService",0,{getAll:()=>t.default.get("/permission/all")}])},10298,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(75545),l=e.i(71645),a=e.i(2988),r=e.i(70319),i=e.i(81949),d=e.i(43935),n=e.i(73665),o=e.i(84828),c=e.i(34728),u=e.i(30648),x=e.i(3812),m=e.i(77344),h=e.i(96924),p=e.i(22016);let f=({roleData:e,handleDelete:l,isLoading:a,permissionData:r,isPopupShow:i,setIsPopupShow:d,formData:f,setFormData:g,handleSubmit:b,hasPermissions:j,isAdmin:y})=>(0,t.jsxs)(t.Fragment,{children:[i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.default,{onClick:()=>d(!1)}),(0,t.jsxs)("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2  bg-white dark:bg-gray-700 p-6 rounded-xl w-[650px] z-[200] flex flex-col gap-5 shadow-xl",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:"Create Role"}),(0,t.jsx)("button",{onClick:()=>d(!1),children:(0,t.jsx)(o.FaXmark,{className:"text-xl text-gray-500 hover:text-red-500 cursor-pointer hover:rotate-90 transition-all duration-300"})})]}),(0,t.jsx)(x.default,{label:"Role name",name:"name",placeholder:"e.g. Sales Manager",value:f.name,onChange:e=>g(t=>({...t,name:e.target.value})),required:!0}),f.permissions.length>0&&(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["Selected permissions (",f.permissions.length,")"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:f.permissions.map(e=>{let s=r?.find(t=>t.id===e);return s?(0,t.jsxs)("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-3 py-1 rounded-full text-sm flex items-center gap-2 capitalize",children:[s.title,(0,t.jsx)("button",{onClick:()=>{g(t=>({...t,permissions:t.permissions.filter(t=>t!==e)}))},className:"hover:text-red-500",children:(0,t.jsx)(o.FaXmark,{})})]},e):null})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"Available permissions"}),(0,t.jsx)("div",{className:"max-h-64 overflow-y-auto border rounded-md p-2",children:r?.map(e=>{let s,l=(s=e.id,f.permissions.includes(s));return(0,t.jsxs)("button",{type:"button",disabled:l,onClick:()=>{var t;return t=e.id,void(!f.permissions.includes(t)&&g(e=>({...e,permissions:[...e.permissions,t]})))},className:`
          w-full text-left px-3 py-2 rounded-md mb-1 transition
          ${l?"bg-blue-200 dark:bg-blue-900/50 cursor-not-allowed":"hover:bg-blue-100 dark:hover:bg-gray-600"}
        `,children:[(0,t.jsxs)("div",{className:"font-medium capitalize flex justify-between",children:[e.title,l&&(0,t.jsx)("span",{className:"text-xs text-blue-700 dark:text-blue-300",children:"selected"})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[e.module," · ",e.action]})]},e.id)})})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,t.jsx)("button",{onClick:()=>d(!1),className:"px-4 py-2 rounded-md border hover:bg-gray-100 dark:hover:bg-gray-600",children:"Cancel"}),(0,t.jsx)(u.default,{isLoading:a,onClick:b,disabled:""===f.name||f.permissions.length<=0,children:"Create Role"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:"User Roles"}),(0,t.jsxs)("button",{onClick:()=>d(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-md flex items-center gap-2 disabled:cursor-not-allowed disabled:bg-blue-300",disabled:!j(m.PERMISSIONS.createRole),children:[(0,t.jsx)(o.FaPlus,{})," Create Role"]})]}),(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b text-sm text-gray-500",children:[(0,t.jsx)("th",{className:"p-4 text-left",children:"Role"}),(0,t.jsx)("th",{className:"p-4 text-left",children:"Permissions"}),(0,t.jsx)("th",{className:"p-4 text-left",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:a?(0,t.jsxs)("tr",{className:"animate-pulse",children:[(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(h.default,{height:25,width:130,borderRadius:14}),(0,t.jsx)(h.default,{height:14,width:70,borderRadius:10})]})}),(0,t.jsx)("td",{className:"p-4 ",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.default,{height:30,width:120,borderRadius:14}),(0,t.jsx)(h.default,{height:30,width:120,borderRadius:14}),(0,t.jsx)(h.default,{height:30,width:120,borderRadius:14}),(0,t.jsx)(h.default,{height:30,width:120,borderRadius:14})]})}),(0,t.jsx)("td",{className:"p-4 ",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.default,{height:35,width:35,borderRadius:10}),(0,t.jsx)(h.default,{height:35,width:35,borderRadius:10})]})})]}):e&&e.length>0?e?.map(e=>(0,t.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("td",{className:"p-4 ",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1 font-medium ",children:[(0,t.jsx)("h3",{className:"capitalize",children:e.name}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 capitalize",children:[e.code===s.SUPER_ADMIN_ROLE_CODE?"All":e.permissions.length," permissions"]})]})," "]}),(0,t.jsx)("td",{className:"p-4 flex items-center flex-wrap gap-3",children:e.permissions&&(e.code===s.SUPER_ADMIN_ROLE_CODE?(0,t.jsx)("span",{className:"bg-green-50 px-3 py-1 text-green-600 rounded-md text-sm capitalize",children:"All permissions"}):e.permissions.map((e,s)=>(0,t.jsx)("span",{className:"bg-green-50 px-3 py-1 text-green-600 rounded-md text-sm capitalize",children:e.title},s)))}),(0,t.jsx)("td",{className:"",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[j(m.PERMISSIONS.updateRole)&&e.code!==s.SUPER_ADMIN_ROLE_CODE?(0,t.jsx)(p.default,{href:`/roles/update/${e.id}`,className:"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-yellow-200/80 dark:bg-yellow-100 hover:bg-yellow-300/70 dark:hover:bg-yellow-200 disabled:cursor-not-allowed disabled:bg-yellow-50  text-yellow-500 hover:scale-104",children:(0,t.jsx)(n.MdOutlineEdit,{className:"text-xl"})}):(0,t.jsx)("span",{className:"h-9 w-9 flex items-center justify-center rounded-md  bg-yellow-100/80 dark:bg-yellow-100   cursor-not-allowed   text-yellow-400",children:(0,t.jsx)(n.MdOutlineEdit,{className:"text-xl"})}),e.code!==s.SUPER_ADMIN_ROLE_CODE?(0,t.jsxs)("button",{onClick:()=>l(e.id),className:"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-red-100 text-red-500 hover:bg-red-200 disabled:hover:bg-red-100 disabled:cursor-not-allowed hover:scale-104 disabled:scale-100",disabled:!j(m.PERMISSIONS.deleteRole),children:[" ",(0,t.jsx)(n.MdDeleteOutline,{className:"text-xl"})," "]}):(0,t.jsx)("span",{className:"h-9 w-9 flex items-center justify-center rounded-md  bg-red-100 text-red-400  cursor-not-allowed ",children:(0,t.jsx)(n.MdDeleteOutline,{className:"text-xl"})})]})})]},e.id)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,className:"p-4 text-center",children:"Not found"})})})]})]})]});var g=e.i(34390),b=e.i(64975),j=e.i(36253),y=e.i(55487);e.s(["default",0,()=>{let[e,n]=(0,l.useState)(1),[o,c]=(0,l.useState)(!1),[u,x]=(0,l.useState)(10),[m,h]=(0,l.useState)(null),[p,N]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[R,k]=(0,l.useState)([]),[S,E]=(0,l.useState)(null),[C,A]=(0,l.useState)({name:"",permissions:[]}),P=(0,y.useSelector)(e=>e.auth),{hasPermission:O}=(0,b.usePermissions)(),D=async()=>{h(null),N(!0);try{let t=await d.RoleService.getRoles({currentPage:e,pageLimit:u});if(200===t.status){let e=t.data.data;k(e.data),n(Number(e.page)),x(Number(e.limit))}}catch(e){if(console.error(e),i.default.isAxiosError(e)){let t=(0,a.default)(e);h(t),r.toast.error(`${t}`)}}finally{N(!1)}},$=async()=>{try{let e=await g.PermissionsService.getAll();200===e.status&&E(e.data.data)}catch(e){if(console.error(e),i.default.isAxiosError(e)){let t=(0,a.default)(e);h(t),r.toast.error(`${t}`)}}},_=async e=>{h(""),w(!0);try{if(await (0,j.default)({title:"Are you sure for delete",text:"Are you sure to delete this User role",btnTxt:"Yes, Delete"})){let t=await d.RoleService.delete(e);200===t.status&&(r.toast.success("Role deleted successfully"),await D())}}catch(e){if(console.error(e),i.default.isAxiosError(e)){let t=(0,a.default)(e);h(t),r.toast.error(`${t}`)}}finally{w(!1)}},I=async()=>{N(!0),h(null);try{let e=await d.RoleService.create(C);200===e.status&&(await D(),A({name:"",permissions:[]}),r.toast.success("Roles created successfully"),c(!1))}catch(e){if(console.error(e),i.default.isAxiosError(e)){let t=(0,a.default)(e);h(t),r.toast.error(`${t}`)}}finally{N(!1)}};(0,l.useEffect)(()=>{D()},[]),(0,l.useEffect)(()=>{$()},[]);let M=P.user?.userRole?.some(e=>e.code===s.SUPER_ADMIN_ROLE_CODE)??!1;return(0,t.jsx)("div",{className:"ml-72 mt-14 p-6",children:(0,t.jsx)(f,{roleData:R,permissionData:S,currentPage:e,pageLimit:u,handleDelete:_,isLoading:p,isPopupShow:o,setIsPopupShow:c,formData:C,setFormData:A,handleSubmit:I,hasPermissions:O,isAdmin:M})})}],10298)}]);