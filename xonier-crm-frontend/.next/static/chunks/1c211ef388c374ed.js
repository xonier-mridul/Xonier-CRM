(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46689,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(2988),l=e.i(20830),r=e.i(81949),s=e.i(71645),i=e.i(73665),d=e.i(96924),o=e.i(70319),n=e.i(84828),c=e.i(2939),u=e.i(80421),m=e.i(18566),x=e.i(69620),h=e.i(57688),p=e.i(46932),g=e.i(3812),f=e.i(67073),b=e.i(77344),y=e.i(46718),j=e.i(44331),v=e.i(64975),N=e.i(24137),w=e.i(92199),k=e.i(40141);function S(e){return(0,k.GenIcon)({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"},child:[]}]})(e)}var I=e.i(10909),A=e.i(22016);let C=({lead:e,loading:a=!1})=>a?(0,t.jsxs)("div",{className:"rounded-lg  bg-white dark:bg-gray-700 p-6 animate-pulse",children:[(0,t.jsx)("div",{className:"h-5 w-40 bg-gray-200 dark:bg-gray-600 rounded mb-4"}),(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((e,a)=>(0,t.jsx)("div",{className:"h-4 w-full bg-gray-200 dark:bg-gray-600 rounded"},a))})]}):e?(0,t.jsxs)(p.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.25,ease:"easeOut"},className:"rounded-xl border  border-slate-200 dark:border-gray-600  bg-white dark:bg-gray-700 p-6 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-5",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)("h3",{className:"text-2xl font-semibold flex items-center gap-2 text-slate-900 dark:text-white",children:[(0,t.jsx)(x.IoInformationCircleOutline,{className:"text-yellow-400"}),"  Lead Information"]}),(0,t.jsx)(A.default,{href:`/leads/view/${e.id}`,className:"text-sm text-slate-500 hover:text-blue-500 dark:text-gray-300 cursor-pointer",children:e.lead_id})]}),(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize
          ${"high"===e.priority?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-300":"medium"===e.priority?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-300"}`,children:e.priority})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsx)(E,{icon:(0,t.jsx)(w.FiUser,{}),label:"Name",value:e.fullName}),(0,t.jsx)(I.MaskEmailField,{label:"Email",value:e.email}),(0,t.jsx)(I.MaskPhoneField,{label:"Phone",value:e.phone}),(0,t.jsx)(E,{icon:(0,t.jsx)(S,{}),label:"Company",value:e.companyName||"—"}),(0,t.jsx)(E,{icon:(0,t.jsx)(i.MdOutlineSource,{}),label:"Source",value:e.source}),(0,t.jsx)(E,{icon:(0,t.jsx)(w.FiMapPin,{}),label:"City",value:e.city||"—"})]}),(0,t.jsxs)("div",{className:"mt-5 pt-4 border-t border-slate-200 dark:border-gray-600 text-xs text-slate-500 dark:text-gray-400",children:["Created on"," ",new Date(e.createdAt).toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})]})]}):null,E=({icon:e,label:a,value:l})=>(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:"mt-0.5 text-blue-500 dark:text-blue-400",children:e}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:a}),(0,t.jsx)("span",{className:"font-medium text-slate-900 dark:text-white",children:l||"—"})]})]});e.s(["default",0,()=>{let[e,w]=(0,s.useState)(""),[k,S]=(0,s.useState)(!1),[I,A]=(0,s.useState)(!1),[E,D]=(0,s.useState)(!1),[L,T]=(0,s.useState)([]),[P,O]=(0,s.useState)([]),[F,R]=(0,s.useState)([]),[U,_]=(0,s.useState)(null),[M,q]=(0,s.useState)([]),[B,z]=(0,s.useState)(null),[W,$]=(0,s.useState)({lead_id:"",dealName:"",dealPipeline:b.DEAL_PIPELINE.QUALIFICATION,dealStage:b.DEAL_STAGES.QUALIFICATION,dealType:b.DEAL_TYPE.NEW_BUSINESS,dealOwner:null,createDate:new Date().toISOString().split("T")[0],closeDate:null,amount:0,dealCollaborator:null,dealDescription:null,dealProbability:null,forecastProbability:null,nextStep:"",forecastCategory:null,closedWonReason:"",closedLostReason:"",originalTrafficSource:""}),G=(0,m.useRouter)(),{id:Q}=(0,m.useParams)(),{hasPermission:Z}=(0,v.usePermissions)(),K=async()=>{S(!0);try{let e=await N.default.getById(Q);200===e.status&&z(e.data.data)}catch(e){if(r.default.isAxiosError(e)){let t=(0,a.default)(e);w(t),o.toast.error(`${t}`)}else w(["Something went wrong"])}finally{S(!1)}};(0,s.useEffect)(()=>{K()},[]);let V=e=>{let{name:t,value:a,type:l}=e.target;"number"===l?$({...W,[t]:Number(a)}):$({...W,[t]:a})},Y=async()=>{A(!0);try{let e=await l.FormFieldService.getDealAll();if(200===e.status){let t=e.data.data??[],a=t.filter(e=>!0===e.required);R(a);let l=a.map(e=>e.id);O(l),T(t)}}catch(e){if(console.error(e),r.default.isAxiosError(e)){let t=(0,a.default)(e);w(t),o.toast.error(`${t}`)}else w(["Something went wrong"])}finally{A(!1)}};(0,s.useEffect)(()=>{Y(),Q&&$({...W,lead_id:String(Q)})},[]);let H=e=>{let{value:t,checked:a}=e.target;a?O(e=>[...e,t]):F.some(e=>e.id===t)?o.toast.info("this field is required"):O(e=>e.filter(e=>e!=t))},J=async e=>{e.preventDefault(),w(""),D(!0);try{let e=await y.default.create(W);201===e.status&&(o.toast.success(`${W.dealName} deal created successfully`),$({lead_id:"",dealName:"",dealPipeline:b.DEAL_PIPELINE.QUALIFICATION,dealStage:b.DEAL_STAGES.QUALIFICATION,dealType:b.DEAL_TYPE.NEW_BUSINESS,dealOwner:null,createDate:new Date().toISOString().split("T")[0],closeDate:null,amount:0,dealCollaborator:null,dealDescription:null,dealProbability:0,forecastProbability:0,nextStep:"",forecastCategory:null,closedWonReason:"",closedLostReason:"",originalTrafficSource:""}),setTimeout(()=>{G.push("/deals")},1800))}catch(e){if(console.error(e),r.default.isAxiosError(e)){let t=(0,a.default)(e);w(t),o.toast.error(`${t}`)}else w(["Something went wrong"])}finally{D(!1)}};return(0,t.jsxs)("div",{className:"fixed min-h-screen overflow-y-scroll z-100 top-0 left-0 right-0 border-0 w-full h-full bg-stone-100 dark:bg-gray-800",children:[(0,t.jsxs)("div",{className:"fixed z-100 left-0 top-0 w-88 border-r flex flex-col gap-6  border-slate-900/15 dark:border-gray-700 bg-slate-50 h-screen dark:bg-gray-800/50 pt-12 px-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 w-full border-b border-slate-600 py-4",children:[(0,t.jsx)(i.MdOutlineFormatIndentIncrease,{className:"text-blue-500"}),(0,t.jsx)("h2",{className:"text-slate-900 dark:text-white font-semibold text-lg tracking-wide ",children:"All Form Fields"})]}),(0,t.jsx)("ul",{className:"flex flex-col gap-3 px-4 py-2.5 min-h-[70vh] overflow-y-scroll",children:I?Array.from({length:18}).map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[" ",(0,t.jsx)(d.default,{height:15,width:15,borderRadius:6,className:"animate-pulse"})," ",(0,t.jsx)(d.default,{height:16,width:100,borderRadius:6,className:"animate-pulse"})," "]},a)):L&&L.length>0&&L.map(e=>{let a=!!P.find(t=>t===e.id);return(0,t.jsxs)("li",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"checkbox",id:e.key,name:e.name,value:e.id,className:"peer cursor-pointer ",checked:a,onChange:H}),(0,t.jsx)("label",{htmlFor:e.key,className:"capitalize checked:text-blue-200 hover:text-blue-700 dark:hover:text-blue-200 hover:scale-104 transition-all duration-200 cursor-pointer peer-checked:text-blue-600 dark:peer-checked:text-blue-300  ",children:e.name})]})})})]}),(0,t.jsxs)("div",{className:"fixed top-4 z-50 left-96 w-[72vw] backdrop-blur-sm flex items-center justify-between gap-10 p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 w-1/2",children:[(0,t.jsx)(c.GrDocumentUpdate,{className:"text-xl text-blue-500"})," ",(0,t.jsxs)("h2",{className:"text-slate-900 dark:text-white font-semibold text-2xl tracking-wide ",children:[" ","Create new Deal"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 ml-6",children:[(0,t.jsx)("button",{onClick:()=>G.back(),className:"h-10 w-10 flex items-center justify-center text-xl  border rounded-full dark:bg-[#1a2432] bg-slate-50 hover:text-blue-600 hover:border-blue-600/20 group border-[#ecf0f2] dark:border-gray-700 cursor-pointer hover:scale-103",children:(0,t.jsx)(n.FaArrowLeftLong,{className:"group-hover:scale-105 transition-all"})}),(0,t.jsx)("button",{onClick:()=>G.forward(),className:"h-10 w-10 flex items-center justify-center text-xl  border rounded-full dark:bg-[#1a2432] bg-slate-50 hover:text-blue-600 hover:border-blue-600/20 group border-[#ecf0f2] dark:border-gray-700 cursor-pointer hover:scale-103",children:(0,t.jsx)(n.FaArrowRightLong,{className:"group-hover:scale-105 transition-all"})}),(0,t.jsx)(u.default,{})]})]}),(0,t.jsxs)("div",{className:"ml-92 relative mt-18 flex flex-col gap-6 p-8",children:[(0,t.jsx)(C,{lead:B,loading:k}),e&&(0,t.jsx)(j.default,{error:e}),(0,t.jsxs)("div",{className:" bg-white dark:bg-gray-700 p-6 rounded-lg grid grid-cols-2 gap-5",children:[k?(0,t.jsx)(t.Fragment,{children:Array.from({length:6}).map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(d.default,{height:18,width:100,borderRadius:10,className:"animate-pulse"}),(0,t.jsx)(d.default,{height:38,width:450,borderRadius:14,className:"animate-pulse"})]},a))}):L&&L.length>0&&(0==P.length?(0,t.jsxs)("div",{className:"flex items-center flex-col justify-center col-span-2 py-5",children:[(0,t.jsx)(h.default,{src:"/images/Cry.gif",alt:"cry img",height:200,width:200}),(0,t.jsx)("p",{className:"",children:"No form fields found, please select fields first"})]}):L.map((e,a)=>{let l=W[e.key],r="date"===e.type?l?l.split("T")[0]:"":l??"";if(P.find(t=>t===e.id))return"text"===e.type||"email"===e.type||"date"===e.type||"textarea"===e.type?(0,t.jsx)(p.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:8},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeOut"},className:"w-full",children:(0,t.jsx)(g.default,{name:e.key,type:e.type,label:e.name,onChange:e=>V(e),value:r,placeholder:e.placeholder??"",required:e.required})},e.id):"number"===e.type?(0,t.jsx)(p.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:8},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeOut"},className:"w-full",children:(0,t.jsx)(g.default,{name:e.key,type:e.type,label:e.name,onChange:e=>V(e),onWheel:e=>e.currentTarget.blur(),value:r,placeholder:e.placeholder??"",required:e.required})},e.id):"select"===e.type?(0,t.jsx)(p.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:8},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeOut"},className:"w-full",children:(0,t.jsx)(f.default,{name:e.key,label:e.name,options:e.options??[],placeholder:e.placeholder??"Select",onChange:e=>V(e),required:e.required})},e.id):null})),(0,t.jsxs)("div",{className:"flex mt-6 items-center gap-5 justify-end col-span-2",children:[(0,t.jsxs)("button",{onClick:J,className:"w-fit flex items-center justify-center gap-2 rounded-md px-4 py-2 font-medium text-nowrap bg-blue-600 text-white hover:bg-blue-700 hover:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 capitalize",disabled:E||P.length<=0||!Z(b.PERMISSIONS.createDeal),children:[(0,t.jsx)(i.MdOutlineCloudUpload,{className:"text-lg"})," ",E?"Updating...":"Create deals"]}),(0,t.jsxs)("button",{className:"w-fit flex items-center justify-center gap-2 rounded-md px-4 py-2 font-medium bg-blue-200 text-blue-600 hover:text-blue-700 hover:bg-blue-300 hover:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",onClick:()=>G.back(),children:[(0,t.jsx)(x.IoChevronBack,{})," Back"]})]})]})]})]})}],46689)}]);