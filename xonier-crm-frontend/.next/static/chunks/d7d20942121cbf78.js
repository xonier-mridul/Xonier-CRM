(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16586,e=>{"use strict";e.i(47167);var a=e.i(43476),t=e.i(71645),s=e.i(40141);function r(e){return(0,s.GenIcon)({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}var l=e.i(11152),i=e.i(81949),n=e.i(2988),d=e.i(70319),c=e.i(72537),o=e.i(44331),u=e.i(22650),m=e.i(92199),h=e.i(18566);e.s(["default",0,()=>{let[e,s]=(0,t.useState)([]),[p,x]=(0,t.useState)(1),[g,b]=(0,t.useState)(!1),[y,f]=(0,t.useState)(null),[j,v]=(0,t.useState)(!1),[N,w]=(0,t.useState)(""),k=Math.ceil(e.length/10),S=(0,h.useRouter)(),C=e.slice((p-1)*10,10*p),U=async e=>{let[a,...t]=(await e.text()).split("\n").filter(Boolean),s=a.split(",").map(e=>e.trim());return t.map(e=>{let a=e.split(",").map(e=>e.trim()),t={};return s.forEach((e,s)=>t[e]=a[s]||null),t})},q=async e=>{if(!e.name.endsWith(".csv"))return alert("Only CSV allowed");f(e),s(await U(e)),x(1)},R=()=>{f(null),s([]),x(1)},T=async a=>{if(a.preventDefault(),w(""),0===e.length)return void d.toast.warn("No enquiries to upload");v(!0);try{let a=await c.EnquiryService.bulkCreate({enquiries:e});201===a.status&&(d.toast.success("Bulk enquiries created successfully"),R(),s([]),S.push("/enquiry"))}catch(e){if(console.error(e),i.default.isAxiosError(e)){let a=(0,n.default)(e);w(a),d.toast.error(`${a}`)}else w(["Something went wrong"])}finally{v(!1)}};return(0,a.jsxs)("div",{className:"ml-72 mt-14 p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-6 flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Bulk Enquiries"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-200",children:"Upload CSV to create enquiries in bulk, download the sample sheet and update it"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([[["fullName","email","phone","companyName","projectType","priority","source","message"],["Rahul Sharma","rahul@test.com","9999999999","ABC Pvt Ltd","website","high","website","Need business website"],["Neha Verma","neha@test.com","8888888888","XYZ Corp","mobile_app","medium","google_ads","Mobile app enquiry"],["Amit Singh","amit@test.com","7777777777","StartupX","ai_ml","high","linkedin_ads","AI solution"],["Priya Mehta","priya@test.com","6666666666","","crm","low","referral","CRM requirement"]].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),a=URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download="bulk-enquiry-sample.csv",t.click(),URL.revokeObjectURL(a)},className:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2.5 rounded-md flex items-center gap-2",children:[(0,a.jsx)(r,{})," Download Sample"]})]}),N&&(0,a.jsx)(o.default,{error:N}),(0,a.jsx)(u.default,{message:""}),(0,a.jsx)("div",{onDragOver:e=>{e.preventDefault(),b(!0)},onDragLeave:()=>b(!1),onDrop:e=>{e.preventDefault(),b(!1),e.dataTransfer.files[0]&&q(e.dataTransfer.files[0])},className:`bg-white dark:bg-gray-700 rounded-xl p-12 border-2 border-dashed transition
          ${g?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)(l.FaFileCsv,{className:"text-4xl text-gray-400 dark:text-gray-300"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Drag & drop your CSV file here"}),(0,a.jsx)("input",{type:"file",accept:".csv",className:"hidden",id:"csvUpload",onChange:e=>e.target.files&&q(e.target.files[0])}),(0,a.jsxs)("label",{htmlFor:"csvUpload",className:"cursor-pointer bg-blue-600 text-white px-4 py-2 rounded-md flex items-center gap-2 hover:bg-blue-700",children:[(0,a.jsx)(l.FaUpload,{})," Choose File"]}),y&&(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-3 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-md",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:y.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.length," rows"]}),(0,a.jsx)("button",{onClick:R,className:"text-red-500",children:(0,a.jsx)(l.FaTrash,{})})]})]})}),e.length>0&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-xl overflow-hidden",children:[(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800",children:(0,a.jsx)("tr",{children:["Name","Email","Phone","Project","Priority","Source"].map(e=>(0,a.jsx)("th",{className:"p-3 text-left uppercase text-xs",children:e},e))})}),(0,a.jsx)("tbody",{children:C.map((e,t)=>(0,a.jsxs)("tr",{className:"border-t hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,a.jsx)("td",{className:"p-3",children:e.fullName}),(0,a.jsx)("td",{className:"p-3",children:e.email}),(0,a.jsx)("td",{className:"p-3",children:e.phone}),(0,a.jsx)("td",{className:"p-3 capitalize",children:e.projectType}),(0,a.jsx)("td",{className:"p-3 capitalize",children:e.priority}),(0,a.jsx)("td",{className:"p-3 capitalize",children:e.source})]},t))})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Showing ",(p-1)*10+1,"â€“",Math.min(10*p,e.length)," of"," ",e.length]}),(0,a.jsx)("div",{className:"flex gap-2",children:Array.from({length:k}).map((e,t)=>(0,a.jsx)("button",{onClick:()=>x(t+1),className:`px-3 py-1 rounded ${p===t+1?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300 dark:hover:bg-gray-800"}`,children:t+1},t))})]})]}),e.length>0&&(0,a.jsx)("form",{onSubmit:T,className:"flex justify-end",children:(0,a.jsxs)("button",{type:"submit",disabled:j,className:"w-fit flex items-center justify-center gap-2 rounded-md px-4 py-2 font-medium bg-blue-600 text-white hover:bg-blue-700 hover:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(m.FiUpload,{})," ",j?"Uploading...":"Create Enquiries"]})})]})}],16586)}]);