(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38905,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(2988),l=e.i(81949),i=e.i(69036);e.i(93948);var d=e.i(91807),o=e.i(57688);let n=()=>(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-xl animate-pulse",children:[(0,t.jsx)("div",{className:"h-6 w-40 bg-gray-300 dark:bg-gray-600 rounded mb-4"}),(0,t.jsx)("div",{className:"h-4 w-72 bg-gray-300 dark:bg-gray-600 rounded"})]});var c=e.i(65992),x=e.i(1725),m=e.i(237),g=e.i(9694),h=e.i(75225),b=e.i(85183),u=e.i(93230),p=e.i(72526),y=e.i(34239),f=e.i(31195),j=e.i(41891),N=e.i(38814),v=e.i(22787),k=e.i(73665),w=e.i(69620),C=e.i(92199),T=e.i(14674),S=e.i(1859),A=e.i(90106),D=e.i(46864),I=e.i(53070),L=e.i(47971),O=e.i(77344),E=e.i(22016);let B={[O.ACTIVITY_ENTITY_TYPE.LEAD]:{label:"Lead",color:"#6366f1",bg:"bg-indigo-50 dark:bg-indigo-900/30",icon:(0,t.jsx)(T.HiOutlineUserGroup,{className:"w-4 h-4"})},[O.ACTIVITY_ENTITY_TYPE.DEAL]:{label:"Deal",color:"#10b981",bg:"bg-emerald-50 dark:bg-emerald-900/30",icon:(0,t.jsx)(T.HiOutlineBriefcase,{className:"w-4 h-4"})},[O.ACTIVITY_ENTITY_TYPE.QUOTATION]:{label:"Quotation",color:"#f59e0b",bg:"bg-amber-50 dark:bg-amber-900/30",icon:(0,t.jsx)(T.HiOutlineDocumentText,{className:"w-4 h-4"})},[O.ACTIVITY_ENTITY_TYPE.INVOICE]:{label:"Invoice",color:"#3b82f6",bg:"bg-blue-50 dark:bg-blue-900/30",icon:(0,t.jsx)(T.HiOutlineCurrencyDollar,{className:"w-4 h-4"})}},_={[O.ACTIVITY_ACTION.CREATED]:{label:"Created",color:"text-emerald-600",dot:"bg-emerald-500"},[O.ACTIVITY_ACTION.UPDATED]:{label:"Updated",color:"text-blue-600",dot:"bg-blue-500"},[O.ACTIVITY_ACTION.SENT]:{label:"Sent",color:"text-violet-600",dot:"bg-violet-500"},[O.ACTIVITY_ACTION.RESEND]:{label:"Resent",color:"text-purple-600",dot:"bg-purple-500"},[O.ACTIVITY_ACTION.CONVERTED]:{label:"Converted",color:"text-teal-600",dot:"bg-teal-500"},[O.ACTIVITY_ACTION.CLOSED_WON]:{label:"Closed Won",color:"text-green-600",dot:"bg-green-500"},[O.ACTIVITY_ACTION.CLOSED_LOST]:{label:"Closed Lost",color:"text-rose-600",dot:"bg-rose-500"},[O.ACTIVITY_ACTION.DELETE]:{label:"Deleted",color:"text-red-600",dot:"bg-red-500"}},R=["#6366f1","#10b981","#f59e0b","#3b82f6"],F=["#6366f1","#10b981","#f59e0b","#3b82f6","#8b5cf6","#ef4444","#14b8a6","#f97316"],Y=e=>e.toISOString().slice(0,10),$=[{label:"Today",range:()=>{let e=new Date;return{from:Y(e),to:Y(e)}}},{label:"Last 7 days",range:()=>{let e=new Date,t=new Date(e);return t.setDate(e.getDate()-6),{from:Y(t),to:Y(e)}}},{label:"This month",range:()=>{let e=new Date;return{from:Y(new Date(e.getFullYear(),e.getMonth(),1)),to:Y(e)}}},{label:"Last 30 days",range:()=>{let e=new Date,t=new Date(e);return t.setDate(e.getDate()-29),{from:Y(t),to:Y(e)}}},{label:"Last 3 months",range:()=>{let e=new Date,t=new Date(e);return t.setMonth(e.getMonth()-3),{from:Y(t),to:Y(e)}}}],U=e=>e?new Date(e).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"—",P=e=>new Date(e).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),z=({active:e,payload:a,label:s})=>e&&a?.length?(0,t.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl px-3 py-2.5 shadow-2xl",children:[(0,t.jsx)("p",{className:"text-xs text-gray-400 mb-1.5",children:s}),a.map((e,a)=>(0,t.jsxs)("p",{className:"text-sm font-semibold flex items-center gap-2",style:{color:e.color??"#fff"},children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full shrink-0",style:{background:e.color??"#fff"}}),e.value,(0,t.jsx)("span",{className:"text-gray-400 font-normal text-xs",children:e.name})]},a))]}):null,V=({label:e,value:a,sub:s,icon:r,accent:l,link:i})=>(0,t.jsxs)(E.default,{href:i,className:"relative overflow-hidden hover:scale-105 hover:shadow-[0_0_6px_10px_#00000015] border-gray-200 bg-white dark:bg-gray-800 rounded-2xl border dark:border-gray-700 p-5 flex items-start gap-4",children:[(0,t.jsx)("div",{className:`shrink-0 w-11 h-11 rounded-xl flex items-center justify-center text-white text-lg ${l}`,children:r}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:e}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-0.5",children:a}),s&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:s})]}),(0,t.jsx)("div",{className:`absolute -right-4 -bottom-4 w-20 h-20 rounded-full opacity-[0.07] ${l}`})]}),G=({activity:e})=>{let a=B[e.entityType]??{label:e.entityType,color:"#94a3b8",bg:"bg-slate-50 dark:bg-slate-800",icon:(0,t.jsx)(C.FiActivity,{className:"w-4 h-4"})},s=_[e.action]??{label:e.action,color:"text-gray-500",dot:"bg-gray-400"},r=Object.entries(e.metadata??{}).filter(([e])=>!["leadId","quoteId"].includes(e));return(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:`w-3 h-3 rounded-full mt-1.5 ring-2 ring-white dark:ring-gray-800 ${s.dot} shrink-0`}),(0,t.jsx)("div",{className:"w-px flex-1 bg-gray-100 dark:bg-gray-700 mt-1"})]}),(0,t.jsx)("div",{className:"pb-5 flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-slate-100 dark:border-gray-700 p-4 hover:shadow-md transition-shadow duration-200",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold ${a.bg}`,style:{color:a.color},children:[a.icon,a.label]}),(0,t.jsx)("span",{className:`text-xs font-semibold capitalize ${s.color}`,children:s.label})]}),(0,t.jsxs)("time",{className:"text-xs text-gray-400 whitespace-nowrap flex items-center gap-1",children:[(0,t.jsx)(w.IoTimeOutline,{className:"w-3 h-3"}),U(e.createdAt)]})]}),(0,t.jsx)("p",{className:"mt-2 text-sm font-medium text-gray-800 dark:text-gray-100 capitalize",children:e.title}),r.length>0&&(0,t.jsx)("div",{className:"mt-2.5 flex flex-wrap gap-2",children:r.map(([e,a])=>(0,t.jsxs)("span",{className:"text-xs bg-slate-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded-md font-mono",children:[(0,t.jsxs)("span",{className:"text-gray-400",children:[e,": "]}),"object"==typeof a?(0,t.jsx)("span",{className:"text-amber-600 dark:text-amber-400",children:JSON.stringify(a)}):String(a)]},e))})]})})]})},K=({value:e,onApply:s,onClear:r})=>{let[l,i]=(0,a.useState)(e?.from??""),[d,o]=(0,a.useState)(e?.to??""),[n,c]=(0,a.useState)("");return(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-slate-200 dark:border-gray-600 rounded-2xl shadow-2xl p-5 w-80",children:[(0,t.jsx)("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Quick ranges"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5 mb-5",children:$.map(a=>{let r=a.range(),l=e?.from===r.from&&e?.to===r.to;return(0,t.jsx)("button",{onClick:()=>{i(r.from),o(r.to),c(""),s(r)},className:`text-xs px-2.5 py-1 rounded-full border font-medium transition-all ${l?"bg-indigo-600 text-white border-indigo-600 shadow-sm":"border-slate-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 hover:border-indigo-400 hover:text-indigo-600 dark:hover:text-indigo-400"}`,children:a.label},a.label)})}),(0,t.jsx)("div",{className:"h-px bg-slate-100 dark:bg-gray-700 mb-4"}),(0,t.jsx)("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Custom range"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:"From date"}),(0,t.jsx)("input",{type:"date",value:l,max:d||void 0,onChange:e=>{i(e.target.value),c("")},className:"w-full text-sm rounded-xl border border-slate-200 dark:border-gray-600 bg-slate-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/40 focus:border-indigo-400"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:"To date"}),(0,t.jsx)("input",{type:"date",value:d,min:l||void 0,onChange:e=>{o(e.target.value),c("")},className:"w-full text-sm rounded-xl border border-slate-200 dark:border-gray-600 bg-slate-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/40 focus:border-indigo-400"})]})]}),n&&(0,t.jsxs)("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[(0,t.jsx)(C.FiX,{className:"w-3 h-3"}),n]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,t.jsx)("button",{onClick:()=>{l&&d?l>d?c('"From" must be before "To".'):(c(""),s({from:l,to:d})):c("Both dates are required.")},className:"flex-1 text-sm font-semibold bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl py-2.5 transition-colors shadow-sm shadow-indigo-200 dark:shadow-indigo-900/30",children:"Apply filter"}),e&&(0,t.jsx)("button",{onClick:()=>{i(""),o(""),c(""),r()},className:"px-4 text-sm font-medium text-gray-500 dark:text-gray-400 border border-slate-200 dark:border-gray-600 rounded-xl hover:bg-slate-50 dark:hover:bg-gray-700 transition-colors",children:"Clear"})]})]})},H=({userData:e,isLoading:s,activityData:r=[],activityLoading:l=!1,activitySummary:i=null,summaryLoading:Y=!1,summaryFilter:$={},currentPage:H=1,totalPages:M=1,pageLimit:W=20,dateRange:X=null,onPageChange:q,onDateFilter:Q,onSummaryFilter:J})=>{let[Z,ee]=(0,a.useState)("overview"),[et,ea]=(0,a.useState)("all"),[es,er]=(0,a.useState)("all"),[el,ei]=(0,a.useState)(!1),[ed,eo]=(0,a.useState)(!1),{entityPieData:en,actionBarData:ec,dailyAreaData:ex,entityCounts:em}=(0,a.useMemo)(()=>{if(!r.length)return{entityPieData:[],actionBarData:[],dailyAreaData:[],entityCounts:{}};let e={},t={},a={};return r.forEach(s=>{let r;e[s.entityType]=(e[s.entityType]||0)+1,t[s.action]=(t[s.action]||0)+1;let l=(r=new Date(s.createdAt),`${r.getDate()} ${r.toLocaleString("en",{month:"short"})}`);a[l]=(a[l]||0)+1}),{entityPieData:Object.entries(e).map(([e,t])=>({name:B[e]?.label??e,value:t})),actionBarData:Object.entries(t).map(([e,t])=>({name:_[e]?.label??e,count:t})),dailyAreaData:Object.entries(a).map(([e,t])=>({date:e,count:t})),entityCounts:e}},[r]),eg=(0,a.useMemo)(()=>r.filter(e=>("all"===et||e.entityType===et)&&("all"===es||e.action===es)),[r,et,es]),eh="all"!==et||"all"!==es;if(s)return(0,t.jsx)(n,{});if(!e)return(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-12 text-center border border-slate-100 dark:border-gray-700",children:[(0,t.jsx)(w.IoPersonCircle,{className:"w-16 h-16 text-gray-200 dark:text-gray-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-500",children:"User not found"})]});let eb={[d.USER_STATUS.ACTIVE]:{bg:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-400",dot:"text-emerald-500"},[d.USER_STATUS.INACTIVE]:{bg:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-400",dot:"text-amber-500"},[d.USER_STATUS.SUSPENDED]:{bg:"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-400",dot:"text-orange-500"},[d.USER_STATUS.DELETED]:{bg:"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-400",dot:"text-red-500"}}[e.status]??{bg:"bg-gray-100 text-gray-700",dot:"text-gray-400"},eu=r.length,ep=Object.keys(em).length,ey=[{key:"overview",label:"Overview",icon:(0,t.jsx)(w.IoPersonCircle,{className:"w-4 h-4"})},{key:"activity",label:"Activity",icon:(0,t.jsx)(C.FiActivity,{className:"w-4 h-4"}),badge:eu},{key:"summary",label:"Summary",icon:(0,t.jsx)(w.IoBarChart,{className:"w-4 h-4"})},{key:"roles",label:"Roles",icon:(0,t.jsx)(w.IoShieldCheckmark,{className:"w-4 h-4"}),badge:e.userRole?.length}];return(0,t.jsxs)("div",{className:"flex flex-col gap-6 font-sans",children:[(0,t.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl overflow-hidden",children:[(0,t.jsx)("div",{className:"h-28 bg-linear-to-r from-slate-700 via-slate-800 to-slate-900 relative",children:(0,t.jsx)("div",{className:"absolute inset-0 opacity-20",style:{background:"linear-gradient(135deg, #2dd4bf 0%, #14b8a6 50%, #059669 100%)"}})}),(0,t.jsxs)("div",{className:"px-6 pb-6",children:[(0,t.jsxs)("div",{className:"flex items-end justify-between -mt-10 mb-4 flex-wrap gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded-2xl border-4 border-white dark:border-gray-800 overflow-hidden bg-slate-100 shadow-xl",children:(0,t.jsx)(o.default,{src:"/images/dummy-user.png",width:80,height:80,alt:"User",className:"object-cover"})}),(0,t.jsx)("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 rounded-full border-2 border-white dark:border-gray-800 ${e.status?"bg-emerald-500":"bg-gray-400"}`})]}),(0,t.jsx)("div",{className:"pb-1",children:(0,t.jsx)(L.default,{text:"Edit Profile",isLoading:s,disabled:s,link:`/users/update/${e.id??e._id}`,icon:(0,t.jsx)(k.MdOutlineEdit,{className:"text-base"})})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white tracking-tight capitalize",children:[e.firstName," ",e.lastName]}),e.isEmailVerified&&(0,t.jsx)(k.MdVerified,{className:"w-5 h-5 text-blue-500 shrink-0",title:"Email Verified"}),(0,t.jsxs)("span",{className:`inline-flex items-center gap-1 text-xs font-semibold px-2.5 py-0.5 rounded-full capitalize ${eb.bg}`,children:[(0,t.jsx)(D.GoDotFill,{className:eb.dot}),e.status]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[(0,t.jsxs)("button",{onClick:()=>(0,c.handleCopy)(e.email),className:"flex items-center gap-1.5 hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer transition-colors group",children:[(0,t.jsx)(k.MdEmail,{className:"w-4 h-4"}),e.email,(0,t.jsx)(k.MdOutlineContentCopy,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]}),(0,t.jsxs)(E.default,{href:`tel:${e.phone}`,className:"flex items-center cursor-pointer hover:text-blue-600 gap-1.5",children:[(0,t.jsx)(k.MdPhone,{className:"w-4 h-4"}),e.phone]}),e.company&&(0,t.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(k.MdBusiness,{className:"w-4 h-4"}),e.company]})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(V,{label:"Total Activities",value:eu,sub:`${ep} entity types`,icon:(0,t.jsx)(C.FiActivity,{}),accent:"bg-indigo-500",link:`/leads?userid=${e._id}`}),(0,t.jsx)(V,{label:"Last Login",link:"",value:e.lastLogin?new Date(e.lastLogin).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}):"—",sub:e.lastLogin?new Date(e.lastLogin).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):"Never",icon:(0,t.jsx)(S.RiLoginCircleLine,{}),accent:"bg-blue-500"}),(0,t.jsx)(V,{link:"/roles",label:"Assigned Roles",value:e.userRole?.length??0,sub:"access roles",icon:(0,t.jsx)(w.IoShieldCheckmark,{}),accent:"bg-violet-500"}),(0,t.jsx)(V,{label:"Member Since",link:"",value:new Date(e.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}),sub:new Date(e.createdAt).getFullYear().toString(),icon:(0,t.jsx)(w.IoCheckmarkDoneCircle,{}),accent:"bg-emerald-500"})]}),(0,t.jsxs)("div",{className:"bg-white  dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl overflow-hidden",children:[(0,t.jsx)("div",{className:"border-b border-slate-100 dark:border-gray-700 px-4",children:(0,t.jsx)("nav",{className:"flex gap-1",children:ey.map(e=>(0,t.jsxs)("button",{onClick:()=>ee(e.key),className:`flex items-center gap-2 px-4 py-4 cursor-pointer text-sm font-medium border-b-2 transition-colors ${Z===e.key?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.icon,e.label,void 0!==e.badge&&e.badge>0&&(0,t.jsx)("span",{className:`text-xs px-1.5 py-0.5 rounded-full font-semibold ${Z===e.key?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:e.badge})]},e.key))})}),"overview"===Z&&(0,t.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4",children:"Basic Information"}),(0,t.jsx)("div",{className:"space-y-4",children:[{label:"First Name",value:e.firstName},{label:"Last Name",value:e.lastName||"—"},{label:"Email",value:e.email},{label:"Phone",value:e.phone},{label:"Company",value:e.company||"—"},{label:"Email Verified",value:e.isEmailVerified?"Verified ✓":"Not Verified"}].map(({label:e,value:a})=>(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 py-2 border-b border-slate-50 dark:border-gray-700/50",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400 min-w-28",children:e}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 text-right",children:a})]},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4",children:"Account Information"}),(0,t.jsx)("div",{className:"space-y-4",children:[{label:"Status",value:e.status},{label:"Active",value:e.isActive?"Yes":"No"},{label:"Created At",value:U(e.createdAt)},{label:"Last Login",value:e.lastLogin?U(e.lastLogin):"Never"},{label:"Updated At",value:U(e.updatedAt)},{label:"User ID",value:e.id??e._id??"—"}].map(({label:e,value:a})=>(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 py-2 border-b border-slate-50 dark:border-gray-700/50",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400 min-w-28",children:e}),(0,t.jsx)("span",{className:`text-sm font-medium text-right max-w-48 break-all ${"User ID"===e?"font-mono text-xs text-gray-400":"text-gray-800 dark:text-gray-200"}`,children:a})]},e))})]}),e.createdBy&&(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4",children:"Created By"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-slate-50 dark:bg-gray-700/50 rounded-xl",children:[(0,t.jsxs)("div",{className:"w-10 h-10 rounded-full bg-linear-to-br from-slate-600 to-slate-800 flex items-center justify-center text-white font-bold text-sm",children:[e.createdBy.firstName?.[0],e.createdBy.lastName?.[0]]}),(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:[e.createdBy.firstName," ",e.createdBy.lastName]})}),(0,t.jsx)("span",{className:"ml-auto text-xs text-gray-400",children:U(e.createdAt)})]})]})]}),"activity"===Z&&(0,t.jsx)("div",{className:"p-6 space-y-6",children:l?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 gap-3",children:[(0,t.jsx)("div",{className:"w-9 h-9 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Loading activity…"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>ei(e=>!e),className:`flex items-center gap-2 text-sm font-medium px-4 py-2.5 rounded-xl border transition-all ${X?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-200 dark:shadow-indigo-900/30":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-slate-200 dark:border-gray-600 hover:border-indigo-400 hover:text-indigo-600 dark:hover:text-indigo-400"}`,children:[(0,t.jsx)(I.LuCalendarRange,{className:"w-4 h-4"}),X?`${P(X.from)} – ${P(X.to)}`:"Date Range",X&&(0,t.jsx)("span",{role:"button",tabIndex:0,onClick:e=>{e.stopPropagation(),Q?.(null)},onKeyDown:e=>"Enter"===e.key&&(e.stopPropagation(),Q?.(null)),className:"ml-1 hover:opacity-70",children:(0,t.jsx)(C.FiX,{className:"w-3.5 h-3.5"})})]}),el&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>ei(!1)}),(0,t.jsx)("div",{className:"absolute left-0 top-full mt-2 z-50",children:(0,t.jsx)(K,{value:X,onApply:e=>{Q?.(e),ei(!1)},onClear:()=>{Q?.(null),ei(!1)}})})]})]}),X&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full border border-indigo-200 dark:border-indigo-800",children:[(0,t.jsx)(C.FiCalendar,{className:"w-3 h-3"}),P(X.from)," —"," ",P(X.to)]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("span",{className:"flex items-center gap-1 text-xs font-medium text-gray-400",children:(0,t.jsx)(C.FiFilter,{className:"w-3.5 h-3.5"})}),(0,t.jsxs)("select",{value:et,onChange:e=>ea(e.target.value),className:"text-xs rounded-lg border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/30",children:[(0,t.jsx)("option",{value:"all",children:"All Entities"}),Object.values(O.ACTIVITY_ENTITY_TYPE).map(e=>(0,t.jsx)("option",{value:e,children:B[e]?.label??e},e))]}),(0,t.jsxs)("select",{value:es,onChange:e=>er(e.target.value),className:"text-xs rounded-lg border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/30",children:[(0,t.jsx)("option",{value:"all",children:"All Actions"}),Object.values(O.ACTIVITY_ACTION).map(e=>(0,t.jsx)("option",{value:e,children:_[e]?.label??e},e))]}),eh&&(0,t.jsxs)("button",{onClick:()=>{ea("all"),er("all")},className:"text-xs text-red-500 hover:text-red-600 font-medium flex items-center gap-1",children:[(0,t.jsx)(C.FiX,{className:"w-3 h-3"}),"Clear"]}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 tabular-nums",children:[eg.length," results"]})]})]}),0===eu?(0,t.jsxs)("div",{className:"text-center py-16 space-y-3",children:[(0,t.jsx)(C.FiActivity,{className:"w-12 h-12 text-gray-200 dark:text-gray-600 mx-auto"}),(0,t.jsx)("p",{className:"text-gray-400 font-medium",children:"No activity recorded for this period"}),X&&(0,t.jsx)("button",{onClick:()=>Q?.(null),className:"text-sm text-indigo-500 hover:text-indigo-600 font-medium",children:"Clear date filter"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-7 h-7 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg flex items-center justify-center",children:(0,t.jsx)(w.IoTrendingUp,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Activity Over Time"})]}),(0,t.jsxs)("span",{className:"text-xs font-medium text-gray-400 bg-white dark:bg-gray-800 px-2.5 py-1 rounded-full border border-slate-200 dark:border-gray-600",children:[eu," total"]})]}),(0,t.jsx)(f.ResponsiveContainer,{width:"100%",height:190,children:(0,t.jsxs)(x.AreaChart,{data:ex,margin:{top:5,right:5,left:-20,bottom:0},children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"actGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),(0,t.jsx)(p.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4}),(0,t.jsx)(b.XAxis,{dataKey:"date",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(u.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(y.Tooltip,{content:(0,t.jsx)(z,{})}),(0,t.jsx)(m.Area,{type:"monotone",dataKey:"count",name:"Activities",stroke:"#6366f1",strokeWidth:2.5,fill:"url(#actGrad)",dot:{r:4,fill:"#6366f1",strokeWidth:2,stroke:"#fff"},activeDot:{r:6,fill:"#6366f1",stroke:"#fff",strokeWidth:2}})]})})]}),(0,t.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700 flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"w-7 h-7 bg-amber-100 dark:bg-amber-900/40 rounded-lg flex items-center justify-center",children:(0,t.jsx)(A.BsCircleFill,{className:"w-3.5 h-3.5 text-amber-600 dark:text-amber-400"})}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"By Entity"})]}),(0,t.jsx)(f.ResponsiveContainer,{width:"100%",height:145,children:(0,t.jsxs)(j.PieChart,{children:[(0,t.jsx)(N.Pie,{data:en,cx:"50%",cy:"50%",innerRadius:40,outerRadius:64,dataKey:"value",paddingAngle:4,stroke:"none",children:en.map((e,a)=>(0,t.jsx)(v.Cell,{fill:R[a%R.length]},a))}),(0,t.jsx)(y.Tooltip,{content:(0,t.jsx)(z,{})})]})}),(0,t.jsx)("div",{className:"mt-3 space-y-1.5",children:en.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2.5 h-2.5 rounded-sm shrink-0",style:{background:R[a%R.length]}}),(0,t.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-1",children:e.name}),(0,t.jsx)("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-200 tabular-nums",children:e.value}),(0,t.jsxs)("span",{className:"text-xs text-gray-400 tabular-nums",children:["(",Math.round(e.value/eu*100),"%)"]})]},e.name))})]})]}),(0,t.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-7 h-7 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg flex items-center justify-center",children:(0,t.jsx)(C.FiActivity,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Actions Breakdown"})]}),(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:[ec.length," action types"]})]}),(0,t.jsx)(f.ResponsiveContainer,{width:"100%",height:150,children:(0,t.jsxs)(g.BarChart,{data:ec,margin:{top:0,right:5,left:-20,bottom:0},children:[(0,t.jsx)(p.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4,vertical:!1}),(0,t.jsx)(b.XAxis,{dataKey:"name",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(u.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(y.Tooltip,{content:(0,t.jsx)(z,{})}),(0,t.jsx)(h.Bar,{dataKey:"count",name:"Count",radius:[5,5,0,0],maxBarSize:52,children:ec.map((e,a)=>(0,t.jsx)(v.Cell,{fill:F[a%F.length]},a))})]})})]}),(0,t.jsx)("div",{className:"pt-2",children:0===eg.length?(0,t.jsx)("p",{className:"text-sm text-gray-400 text-center py-8",children:"No activities match the selected filters."}):eg.map(e=>(0,t.jsx)(G,{activity:e},e.id))}),M>1&&q&&(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100 dark:border-gray-700",children:[(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:["Page ",H," of ",M]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>q(H-1),disabled:H<=1,className:"p-1.5 rounded-lg border border-slate-200 dark:border-gray-600 disabled:opacity-40 hover:bg-slate-50 dark:hover:bg-gray-700 transition-colors",children:(0,t.jsx)(C.FiChevronLeft,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>q(H+1),disabled:H>=M,className:"p-1.5 rounded-lg border border-slate-200 dark:border-gray-600 disabled:opacity-40 hover:bg-slate-50 dark:hover:bg-gray-700 transition-colors",children:(0,t.jsx)(C.FiChevronRight,{className:"w-4 h-4"})})]})]})]})]})}),"summary"===Z&&(0,t.jsx)("div",{className:"p-6 space-y-6",children:Y?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 gap-3",children:[(0,t.jsx)("div",{className:"w-9 h-9 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Loading summary…"})]}):i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{onClick:()=>eo(e=>!e),className:`flex items-center gap-2 text-sm font-medium px-4 py-2.5 rounded-xl border transition-all ${$?.from||$?.to?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-200 dark:shadow-indigo-900/30":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-slate-200 dark:border-gray-600 hover:border-indigo-400 hover:text-indigo-600 dark:hover:text-indigo-400"}`,children:[(0,t.jsx)(I.LuCalendarRange,{className:"w-4 h-4"}),$?.from&&$?.to?`${P($.from)} – ${P($.to)}`:"Date Range",($?.from||$?.to)&&(0,t.jsx)("span",{role:"button",tabIndex:0,onClick:e=>{e.stopPropagation(),J?.({...$,from:void 0,to:void 0})},onKeyDown:e=>"Enter"===e.key&&(e.stopPropagation(),J?.({groupBy:$?.groupBy})),className:"ml-1 hover:opacity-70",children:(0,t.jsx)(C.FiX,{className:"w-3.5 h-3.5"})})]}),ed&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>eo(!1)}),(0,t.jsx)("div",{className:"absolute left-0 top-full mt-2 z-50",children:(0,t.jsx)(K,{value:$?.from&&$?.to?{from:$.from,to:$.to}:null,onApply:e=>{J?.({...$,...e}),eo(!1)},onClear:()=>{J?.({groupBy:$?.groupBy}),eo(!1)}})})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-800 border border-slate-200 dark:border-gray-600 rounded-xl p-1",children:["day","week","month"].map(e=>(0,t.jsx)("button",{onClick:()=>J?.({...$,groupBy:e}),className:`text-xs font-semibold px-3 py-1.5 rounded-lg capitalize transition-all ${($?.groupBy??"month")===e?"bg-indigo-600 text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400"}`,children:e},e))}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[$?.from&&$?.to&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full border border-indigo-200 dark:border-indigo-800",children:[(0,t.jsx)(C.FiCalendar,{className:"w-3 h-3"}),P($.from)," —"," ",P($.to)]}),($?.from||$?.to||$?.groupBy)&&(0,t.jsxs)("button",{onClick:()=>J?.({}),className:"text-xs text-red-500 hover:text-white bg-red-50 hover:bg-red-500 px-2.5 py-1 rounded-full cursor-pointer group font-medium flex items-center gap-1 ml-auto",children:[(0,t.jsx)(C.FiX,{className:"w-3 h-3 group-hover:rotate-90"})," Reset"]})]}),i&&(0,t.jsxs)("span",{className:"ml-auto text-xs text-gray-400 flex items-center gap-1.5",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 inline-block"}),P(i.range.from)," —"," ",P(i.range.to),(0,t.jsx)("span",{className:"px-1.5 py-0.5 bg-slate-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded capitalize font-medium",children:i.range.groupBy})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)(E.default,{href:`/leads?userid=${e._id}`,className:"relative overflow-hidden hover:scale-105 cursor-point hover:shadow-[0_0_8px_10px_#00000014] bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl p-5",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-indigo-500 flex items-center justify-center shrink-0",children:(0,t.jsx)(T.HiOutlineUserGroup,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Leads Created"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-0.5",children:i.leads.created.reduce((e,t)=>e+t.count,0)}),(0,t.jsxs)("p",{className:"text-xs text-rose-500 mt-0.5",children:[i.leads.lost," lost"]})]})]}),(0,t.jsx)("div",{className:"absolute -right-3 -bottom-3 w-16 h-16 rounded-full bg-indigo-500 opacity-[0.07]"})]}),(0,t.jsxs)(E.default,{href:`/deals?userid=${e._id}`,className:"relative overflow-hidden hover:scale-105 cursor-point hover:shadow-[0_0_8px_10px_#00000014] bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl p-5",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-emerald-500 flex items-center justify-center shrink-0",children:(0,t.jsx)(T.HiOutlineBriefcase,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Deals Created"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-0.5",children:i.deals.created.reduce((e,t)=>e+t.count,0)}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-0.5",children:[(0,t.jsxs)("span",{className:"text-emerald-500",children:[i.deals.won," won"]})," · ",(0,t.jsxs)("span",{className:"text-rose-500",children:[i.deals.lost," lost"]})]})]})]}),(0,t.jsx)("div",{className:"absolute -right-3 -bottom-3 w-16 h-16 rounded-full bg-emerald-500 opacity-[0.07]"})]}),(0,t.jsxs)("div",{className:"relative overflow-hidden bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl p-5",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-amber-500 flex items-center justify-center shrink-0",children:(0,t.jsx)(T.HiOutlineDocumentText,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Quotations"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-0.5",children:i.quotations.sent+i.quotations.accepted}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-0.5",children:[(0,t.jsxs)("span",{className:"text-violet-500",children:[i.quotations.sent," sent"]})," · ",(0,t.jsxs)("span",{className:"text-emerald-500",children:[i.quotations.accepted," accepted"]})]})]})]}),(0,t.jsx)("div",{className:"absolute -right-3 -bottom-3 w-16 h-16 rounded-full bg-amber-500 opacity-[0.07]"})]}),(0,t.jsxs)("div",{className:"relative overflow-hidden bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl p-5",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center shrink-0",children:(0,t.jsx)(T.HiOutlineCurrencyDollar,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Invoices"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-0.5",children:i.invoices.created}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-0.5",children:"created"})]})]}),(0,t.jsx)("div",{className:"absolute -right-3 -bottom-3 w-16 h-16 rounded-full bg-blue-500 opacity-[0.07]"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[(0,t.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"w-7 h-7 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg flex items-center justify-center",children:(0,t.jsx)(T.HiOutlineUserGroup,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Leads Created"}),(0,t.jsxs)("span",{className:"ml-auto text-xs font-bold text-indigo-600 dark:text-indigo-400",children:[i.leads.created.reduce((e,t)=>e+t.count,0)," ","total"]})]}),i.leads.created.length>0?(0,t.jsx)(f.ResponsiveContainer,{width:"100%",height:160,children:(0,t.jsxs)(x.AreaChart,{data:i.leads.created.map(e=>({period:String(e._id),count:e.count})),margin:{top:5,right:5,left:-20,bottom:0},children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"leadsGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),(0,t.jsx)(p.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4}),(0,t.jsx)(b.XAxis,{dataKey:"period",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(u.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(y.Tooltip,{content:(0,t.jsx)(z,{})}),(0,t.jsx)(m.Area,{type:"monotone",dataKey:"count",name:"Leads",stroke:"#6366f1",strokeWidth:2.5,fill:"url(#leadsGrad)",dot:{r:4,fill:"#6366f1",strokeWidth:2,stroke:"#fff"},activeDot:{r:6,fill:"#6366f1",stroke:"#fff",strokeWidth:2}})]})}):(0,t.jsx)("div",{className:"flex items-center justify-center h-40 text-sm text-gray-400",children:"No data for this period"})]}),(0,t.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"w-7 h-7 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg flex items-center justify-center",children:(0,t.jsx)(T.HiOutlineBriefcase,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Deals Created"}),(0,t.jsxs)("span",{className:"ml-auto text-xs font-bold text-emerald-600 dark:text-emerald-400",children:[i.deals.created.reduce((e,t)=>e+t.count,0)," ","total"]})]}),i.deals.created.length>0?(0,t.jsx)(f.ResponsiveContainer,{width:"100%",height:160,children:(0,t.jsxs)(x.AreaChart,{data:i.deals.created.map(e=>({period:String(e._id),count:e.count})),margin:{top:5,right:5,left:-20,bottom:0},children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"dealsGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,t.jsx)("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),(0,t.jsx)("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),(0,t.jsx)(p.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4}),(0,t.jsx)(b.XAxis,{dataKey:"period",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(u.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(y.Tooltip,{content:(0,t.jsx)(z,{})}),(0,t.jsx)(m.Area,{type:"monotone",dataKey:"count",name:"Deals",stroke:"#10b981",strokeWidth:2.5,fill:"url(#dealsGrad)",dot:{r:4,fill:"#10b981",strokeWidth:2,stroke:"#fff"},activeDot:{r:6,fill:"#10b981",stroke:"#fff",strokeWidth:2}})]})}):(0,t.jsx)("div",{className:"flex items-center justify-center h-40 text-sm text-gray-400",children:"No data for this period"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[(0,t.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"w-7 h-7 bg-amber-100 dark:bg-amber-900/40 rounded-lg flex items-center justify-center",children:(0,t.jsx)(T.HiOutlineDocumentText,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Quotations Breakdown"})]}),(0,t.jsx)(f.ResponsiveContainer,{width:"100%",height:140,children:(0,t.jsxs)(g.BarChart,{data:[{name:"Sent",value:i.quotations.sent},{name:"Accepted",value:i.quotations.accepted}],margin:{top:0,right:5,left:-20,bottom:0},children:[(0,t.jsx)(p.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4,vertical:!1}),(0,t.jsx)(b.XAxis,{dataKey:"name",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(u.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(y.Tooltip,{content:(0,t.jsx)(z,{})}),(0,t.jsxs)(h.Bar,{dataKey:"value",name:"Count",radius:[5,5,0,0],maxBarSize:60,children:[(0,t.jsx)(v.Cell,{fill:"#8b5cf6"}),(0,t.jsx)(v.Cell,{fill:"#10b981"})]})]})})]}),(0,t.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("div",{className:"w-7 h-7 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg flex items-center justify-center",children:(0,t.jsx)(T.HiOutlineBriefcase,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Deals Outcome"})]}),(0,t.jsx)(f.ResponsiveContainer,{width:"100%",height:140,children:(0,t.jsxs)(g.BarChart,{data:[{name:"Created",value:i.deals.created.reduce((e,t)=>e+t.count,0)},{name:"Won",value:i.deals.won},{name:"Lost",value:i.deals.lost}],margin:{top:0,right:5,left:-20,bottom:0},children:[(0,t.jsx)(p.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4,vertical:!1}),(0,t.jsx)(b.XAxis,{dataKey:"name",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(u.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,t.jsx)(y.Tooltip,{content:(0,t.jsx)(z,{})}),(0,t.jsxs)(h.Bar,{dataKey:"value",name:"Count",radius:[5,5,0,0],maxBarSize:60,children:[(0,t.jsx)(v.Cell,{fill:"#3b82f6"}),(0,t.jsx)(v.Cell,{fill:"#10b981"}),(0,t.jsx)(v.Cell,{fill:"#ef4444"})]})]})})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl overflow-hidden",children:[(0,t.jsx)("div",{className:"px-5 py-4 border-b border-slate-100 dark:border-gray-700",children:(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Entity Performance"})}),(0,t.jsx)("div",{className:"divide-y divide-slate-50 dark:divide-gray-700",children:[{icon:(0,t.jsx)(T.HiOutlineUserGroup,{className:"w-4 h-4"}),label:"Leads",color:"text-indigo-600",bg:"bg-indigo-50 dark:bg-indigo-900/30",stats:[{label:"Created/Assigned",value:i.leads.created.reduce((e,t)=>e+t.count,0),color:"text-gray-800 dark:text-gray-100"},{label:"Lost",value:i.leads.lost,color:"text-rose-500"}]},{icon:(0,t.jsx)(T.HiOutlineBriefcase,{className:"w-4 h-4"}),label:"Deals",color:"text-emerald-600",bg:"bg-emerald-50 dark:bg-emerald-900/30",stats:[{label:"Created",value:i.deals.created.reduce((e,t)=>e+t.count,0),color:"text-gray-800 dark:text-gray-100"},{label:"Won",value:i.deals.won,color:"text-emerald-500"},{label:"Lost",value:i.deals.lost,color:"text-rose-500"}]},{icon:(0,t.jsx)(T.HiOutlineDocumentText,{className:"w-4 h-4"}),label:"Quotations",color:"text-amber-600",bg:"bg-amber-50 dark:bg-amber-900/30",stats:[{label:"Sent",value:i.quotations.sent,color:"text-violet-500"},{label:"Accepted",value:i.quotations.accepted,color:"text-emerald-500"}]},{icon:(0,t.jsx)(T.HiOutlineCurrencyDollar,{className:"w-4 h-4"}),label:"Invoices",color:"text-blue-600",bg:"bg-blue-50 dark:bg-blue-900/30",stats:[{label:"Created",value:i.invoices.created,color:"text-gray-800 dark:text-gray-100"}]}].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4 px-5 py-4 hover:bg-slate-50 dark:hover:bg-gray-700/40 transition-colors",children:[(0,t.jsxs)("span",{className:`inline-flex items-center gap-1.5 text-xs font-semibold px-2.5 py-1.5 rounded-lg ${e.bg} ${e.color} min-w-28`,children:[e.icon,e.label]}),(0,t.jsx)("div",{className:"flex items-center gap-6 flex-wrap",children:e.stats.map(e=>(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:`text-base font-bold tabular-nums ${e.color}`,children:e.value}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:e.label})]},e.label))})]},e.label))})]})]}):(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)(w.IoBarChart,{className:"w-12 h-12 text-gray-200 dark:text-gray-600 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-400 font-medium",children:"No summary data available"})]})}),"roles"===Z&&(0,t.jsx)("div",{className:"p-6 space-y-4",children:e.userRole?.length?e.userRole.map(e=>(0,t.jsxs)("div",{className:"border border-slate-100 dark:border-gray-700 rounded-xl p-5",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 flex-wrap mb-4",children:[(0,t.jsxs)(E.default,{href:"/roles",className:"flex items-center gap-2 group",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-linear-to-br from-violet-500 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)(w.IoShieldCheckmark,{className:"w-4 h-4 text-white group-hover:scale-112"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold group-hover:text-blue-600 dark:group-hover:text-blue-500 text-gray-800 dark:text-gray-100",children:e.name}),(0,t.jsx)("p",{className:"text-xs font-mono text-gray-400",children:e.code})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.isSystemRole&&(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full font-medium",children:"System Role"}),(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${e.status?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400":"bg-gray-100 dark:bg-gray-700 text-gray-500"}`,children:e.status?"Active":"Inactive"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,t.jsx)(C.FiCalendar,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:["Created ",U(e.createdAt)]}),e.permissions?.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-slate-300 dark:text-gray-600",children:"•"}),(0,t.jsx)(w.IoShieldCheckmark,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:[e.permissions.length," permissions"]})]})]})]},e.id)):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(w.IoShieldCheckmark,{className:"w-10 h-10 text-gray-200 dark:text-gray-600 mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-gray-400 font-medium",children:"No roles assigned"})]})})]})]})};var M=e.i(63816);let W={getByUser(e,t,a,s){let r=new URLSearchParams;return void 0!==t&&r.append("page",String(t)),void 0!==a&&r.append("limit",String(a)),s&&Object.entries(s).forEach(([e,t])=>{null!=t&&""!==t&&r.append(e,String(t))}),M.default.get(`/activity/user/${e}`,{params:r})},getSummaryByUser(e,t){let a=new URLSearchParams;return t&&Object.entries(t).forEach(([e,t])=>{null!=t&&""!==t&&a.append(e,String(t))}),M.default.get(`/activity/user/${e}/summary`,{params:a})}};e.s(["default",0,()=>{let[e,d]=(0,a.useState)(null),[o,n]=(0,a.useState)([]),[c,x]=(0,a.useState)(null),[m,g]=(0,a.useState)(null),[h,b]=(0,a.useState)(!1),[u,p]=(0,a.useState)(!1),[y,f]=(0,a.useState)(!1),[j,N]=(0,a.useState)(1),[v,k]=(0,a.useState)(1),[w,C]=(0,a.useState)(null),[T,S]=(0,a.useState)({groupBy:"month"}),A=(0,s.useParams)().id,D=async e=>{b(!0),g(null);try{let t=await i.AuthService.getUserById(e);200===t.status&&d(t.data.data)}catch(e){console.error(e),g(l.default.isAxiosError(e)?(0,r.default)(e):["Something went wrong"])}finally{b(!1)}},I=(0,a.useCallback)(async(e,t,a)=>{p(!0);try{let s=await W.getByUser(e,t,20,{...a?.from&&{from:a.from},...a?.to&&{to:a.to}});if(200===s.status){let{data:e,pagination:t}=s.data.data;n(e),k(Math.ceil(t.total/t.limit))}}catch(e){console.error(e),g(l.default.isAxiosError(e)?(0,r.default)(e):["Something went wrong"])}finally{p(!1)}},[20]),L=(0,a.useCallback)(async(e,t)=>{f(!0);try{let a=await W.getSummaryByUser(e,{...t.from&&{from:t.from},...t.to&&{to:t.to},...t.groupBy&&{groupBy:t.groupBy}});200===a.status&&x(a.data.data)}catch(e){console.error(e),g(l.default.isAxiosError(e)?(0,r.default)(e):["Something went wrong"])}finally{f(!1)}},[]);return(0,a.useEffect)(()=>{A&&(D(A),I(String(A),1,null),L(String(A),{groupBy:"month"}))},[A]),(0,t.jsx)("div",{className:"ml-72 mt-14 p-6",children:(0,t.jsx)(H,{userData:e,isLoading:h,activityData:o,activityLoading:u,activitySummary:c,summaryLoading:y,summaryFilter:T,currentPage:j,totalPages:v,pageLimit:20,dateRange:w,onPageChange:e=>{e<1||e>v||(N(e),I(String(A),e,w))},onDateFilter:e=>{C(e),N(1),I(String(A),1,e)},onSummaryFilter:e=>{S(e),L(String(A),{from:e.from,to:e.to,groupBy:e.groupBy??"month"})}})})}],38905)}]);