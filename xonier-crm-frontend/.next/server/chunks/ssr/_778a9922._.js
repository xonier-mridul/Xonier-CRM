module.exports=[49909,a=>{"use strict";a.s(["default",0,a=>{let b=a?.response?.data;return b?Array.isArray(b.detail)?b.detail.map(a=>a.msg||"Invalid input"):"string"==typeof b.detail?[b.detail]:"string"==typeof b.message?[b.message]:["Unexpected error occurred"]:["Something went wrong"]}])},3711,a=>{"use strict";var b=a.i(72131);let c=b.default.createContext({});function d({count:a=1,wrapper:d,className:e,containerClassName:f,containerTestId:g,circle:h=!1,style:i,...j}){var k,l,m;let n=b.default.useContext(c),o={...j};for(let[a,b]of Object.entries(j))void 0===b&&delete o[a];let p={...n,...o,circle:h},q={...i,...function({baseColor:a,highlightColor:b,width:c,height:d,borderRadius:e,circle:f,direction:g,duration:h,enableAnimation:i=!0,customHighlightBackground:j}){let k={};return"rtl"===g&&(k["--animation-direction"]="reverse"),"number"==typeof h&&(k["--animation-duration"]=`${h}s`),i||(k["--pseudo-element-display"]="none"),("string"==typeof c||"number"==typeof c)&&(k.width=c),("string"==typeof d||"number"==typeof d)&&(k.height=d),("string"==typeof e||"number"==typeof e)&&(k.borderRadius=e),f&&(k.borderRadius="50%"),void 0!==a&&(k["--base-color"]=a),void 0!==b&&(k["--highlight-color"]=b),"string"==typeof j&&(k["--custom-highlight-background"]=j),k}(p)},r="react-loading-skeleton";e&&(r+=` ${e}`);let s=null!=(k=p.inline)&&k,t=[],u=Math.ceil(a);for(let c=0;c<u;c++){let d=q;if(u>a&&c===u-1){let b=null!=(l=d.width)?l:"100%",c=a%1,e="number"==typeof b?b*c:`calc(${b} * ${c})`;d={...d,width:e}}let e=b.default.createElement("span",{className:r,style:d,key:c},"‌");s?t.push(e):t.push(b.default.createElement(b.default.Fragment,{key:c},e,b.default.createElement("br",null)))}return b.default.createElement("span",{className:f,"data-testid":g,"aria-live":"polite","aria-busy":null==(m=p.enableAnimation)||m},d?t.map((a,c)=>b.default.createElement(d,{key:c},a)):t)}a.s(["default",()=>d])},94988,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(71682);a.s(["default",0,({label:a,error:e,type:f="text",className:g="",required:h=!1,...i})=>{let[j,k]=(0,c.useState)(!1),l="password"===f,m="textarea"===f,n=`
    w-full px-3 py-2 rounded-md border
    bg-white dark:bg-gray-700 text-black dark:text-white
    border-gray-300 dark:border-gray-300/30
    disabled:opacity-60 disabled:cursor-not-allowed
    focus:outline-none focus:ring-2 focus:ring-violet-500
    ${e?"border-red-500 focus:ring-red-500":""}
    ${g}
  `;return(0,b.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[a&&(0,b.jsxs)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 capitalize",children:[h&&(0,b.jsx)("span",{className:"text-red-500 text-xl",children:"*"})," ",a]}),(0,b.jsxs)("div",{className:"relative",children:[m?(0,b.jsx)("textarea",{required:h,className:`${n} resize-none`,rows:5,...i}):(0,b.jsx)("input",{type:l&&j?"text":f,required:h,className:n,...i}),l&&(0,b.jsx)("button",{type:"button",onClick:()=>k(a=>!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-blue-500",children:j?(0,b.jsx)(d.FaEyeSlash,{}):(0,b.jsx)(d.FaEye,{})})]}),e&&(0,b.jsx)("span",{className:"text-sm text-red-500",children:e})]})}])},61413,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.s(["default",0,({onClick:a})=>((0,c.useEffect)(()=>{let b=b=>{"Escape"===b.key&&a&&a()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[a]),(0,b.jsx)("div",{onClick:a,className:" fixed inset-0 w-full h-full bg-black/30 backdrop-blur-sm z-[199] cursor-pointer ","aria-hidden":"true"}))])},57238,a=>{"use strict";var b=a.i(28337);a.s(["RoleService",0,{getRoles:a=>b.default.get(`/user-role/all?page=${a.currentPage}&limit=${a.pageLimit}`),getRolesWithoutPagination:()=>b.default.get("/user-role/all/active/without-pagination"),getRoleById:a=>b.default.get(`/user-role/get-by-id/${a}`),update:(a,c)=>b.default.put(`/user-role/update/${a}`,c),create:a=>b.default.post("/user-role/create",a),delete:a=>b.default.delete(`/user-role/delete/${a}`)}])},22198,a=>{"use strict";var b=a.i(28337);a.s(["PermissionsService",0,{getAll:()=>b.default.get("/permission/all")}])},47199,a=>{"use strict";var b=a.i(87924),c=a.i(48196),d=a.i(72131),e=a.i(49909),f=a.i(20094),g=a.i(83490),h=a.i(57238),i=a.i(328),j=a.i(97168),k=a.i(61413),l=a.i(96407),m=a.i(94988),n=a.i(60239),o=a.i(3711),p=a.i(38246);let q=({roleData:a,handleDelete:d,isLoading:e,permissionData:f,isPopupShow:g,setIsPopupShow:h,formData:q,setFormData:r,handleSubmit:s,hasPermissions:t,isAdmin:u})=>(0,b.jsxs)(b.Fragment,{children:[g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.default,{onClick:()=>h(!1)}),(0,b.jsxs)("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2  bg-white dark:bg-gray-700 p-6 rounded-xl w-[650px] z-[200] flex flex-col gap-5 shadow-xl",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:"Create Role"}),(0,b.jsx)("button",{onClick:()=>h(!1),children:(0,b.jsx)(j.FaXmark,{className:"text-xl text-gray-500 hover:text-red-500 cursor-pointer hover:rotate-90 transition-all duration-300"})})]}),(0,b.jsx)(m.default,{label:"Role name",name:"name",placeholder:"e.g. Sales Manager",value:q.name,onChange:a=>r(b=>({...b,name:a.target.value})),required:!0}),q.permissions.length>0&&(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:["Selected permissions (",q.permissions.length,")"]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:q.permissions.map(a=>{let c=f?.find(b=>b.id===a);return c?(0,b.jsxs)("span",{className:"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300 px-3 py-1 rounded-full text-sm flex items-center gap-2 capitalize",children:[c.title,(0,b.jsx)("button",{onClick:()=>{r(b=>({...b,permissions:b.permissions.filter(b=>b!==a)}))},className:"hover:text-red-500",children:(0,b.jsx)(j.FaXmark,{})})]},a):null})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"Available permissions"}),(0,b.jsx)("div",{className:"max-h-64 overflow-y-auto border rounded-md p-2",children:f?.map(a=>{let c,d=(c=a.id,q.permissions.includes(c));return(0,b.jsxs)("button",{type:"button",disabled:d,onClick:()=>{var b;return b=a.id,void(!q.permissions.includes(b)&&r(a=>({...a,permissions:[...a.permissions,b]})))},className:`
          w-full text-left px-3 py-2 rounded-md mb-1 transition
          ${d?"bg-blue-200 dark:bg-blue-900/50 cursor-not-allowed":"hover:bg-blue-100 dark:hover:bg-gray-600"}
        `,children:[(0,b.jsxs)("div",{className:"font-medium capitalize flex justify-between",children:[a.title,d&&(0,b.jsx)("span",{className:"text-xs text-blue-700 dark:text-blue-300",children:"selected"})]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[a.module," · ",a.action]})]},a.id)})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,b.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 rounded-md border hover:bg-gray-100 dark:hover:bg-gray-600",children:"Cancel"}),(0,b.jsx)(l.default,{isLoading:e,onClick:s,disabled:""===q.name||q.permissions.length<=0,children:"Create Role"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-xl",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:"User Roles"}),(0,b.jsxs)("button",{onClick:()=>h(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-md flex items-center gap-2 disabled:cursor-not-allowed disabled:bg-blue-300",disabled:!t(n.PERMISSIONS.createRole),children:[(0,b.jsx)(j.FaPlus,{})," Create Role"]})]}),(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b text-sm text-gray-500",children:[(0,b.jsx)("th",{className:"p-4 text-left",children:"Role"}),(0,b.jsx)("th",{className:"p-4 text-left",children:"Permissions"}),(0,b.jsx)("th",{className:"p-4 text-left",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:e?(0,b.jsxs)("tr",{className:"animate-pulse",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)(o.default,{height:25,width:130,borderRadius:14}),(0,b.jsx)(o.default,{height:14,width:70,borderRadius:10})]})}),(0,b.jsx)("td",{className:"p-4 ",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.default,{height:30,width:120,borderRadius:14}),(0,b.jsx)(o.default,{height:30,width:120,borderRadius:14}),(0,b.jsx)(o.default,{height:30,width:120,borderRadius:14}),(0,b.jsx)(o.default,{height:30,width:120,borderRadius:14})]})}),(0,b.jsx)("td",{className:"p-4 ",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.default,{height:35,width:35,borderRadius:10}),(0,b.jsx)(o.default,{height:35,width:35,borderRadius:10})]})})]}):a&&a.length>0?a?.map(a=>(0,b.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("td",{className:"p-4 ",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1 font-medium ",children:[(0,b.jsx)("h3",{className:"capitalize",children:a.name}),(0,b.jsxs)("span",{className:"text-xs text-gray-500 capitalize",children:[a.code===c.SUPER_ADMIN_ROLE_CODE?"All":a.permissions.length," permissions"]})]})," "]}),(0,b.jsx)("td",{className:"p-4 flex items-center flex-wrap gap-3",children:a.permissions&&(a.code===c.SUPER_ADMIN_ROLE_CODE?(0,b.jsx)("span",{className:"bg-green-50 px-3 py-1 text-green-600 rounded-md text-sm capitalize",children:"All permissions"}):a.permissions.map((a,c)=>(0,b.jsx)("span",{className:"bg-green-50 px-3 py-1 text-green-600 rounded-md text-sm capitalize",children:a.title},c)))}),(0,b.jsx)("td",{className:"",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[t(n.PERMISSIONS.updateRole)&&a.code!==c.SUPER_ADMIN_ROLE_CODE?(0,b.jsx)(p.default,{href:`/roles/update/${a.id}`,className:"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-yellow-200/80 dark:bg-yellow-100 hover:bg-yellow-300/70 dark:hover:bg-yellow-200 disabled:cursor-not-allowed disabled:bg-yellow-50  text-yellow-500 hover:scale-104",children:(0,b.jsx)(i.MdOutlineEdit,{className:"text-xl"})}):(0,b.jsx)("span",{className:"h-9 w-9 flex items-center justify-center rounded-md  bg-yellow-100/80 dark:bg-yellow-100   cursor-not-allowed   text-yellow-400",children:(0,b.jsx)(i.MdOutlineEdit,{className:"text-xl"})}),a.code!==c.SUPER_ADMIN_ROLE_CODE?(0,b.jsxs)("button",{onClick:()=>d(a.id),className:"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-red-100 text-red-500 hover:bg-red-200 disabled:hover:bg-red-100 disabled:cursor-not-allowed hover:scale-104 disabled:scale-100",disabled:!t(n.PERMISSIONS.deleteRole),children:[" ",(0,b.jsx)(i.MdDeleteOutline,{className:"text-xl"})," "]}):(0,b.jsx)("span",{className:"h-9 w-9 flex items-center justify-center rounded-md  bg-red-100 text-red-400  cursor-not-allowed ",children:(0,b.jsx)(i.MdDeleteOutline,{className:"text-xl"})})]})})]},a.id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:3,className:"p-4 text-center",children:"Not found"})})})]})]})]});var r=a.i(22198),s=a.i(64093),t=a.i(45991),u=a.i(14174);a.s(["default",0,()=>{let[a,i]=(0,d.useState)(1),[j,k]=(0,d.useState)(!1),[l,m]=(0,d.useState)(10),[n,o]=(0,d.useState)(null),[p,v]=(0,d.useState)(!1),[w,x]=(0,d.useState)(!1),[y,z]=(0,d.useState)([]),[A,B]=(0,d.useState)(null),[C,D]=(0,d.useState)({name:"",permissions:[]}),E=(0,u.useSelector)(a=>a.auth),{hasPermission:F}=(0,s.usePermissions)(),G=async()=>{o(null),v(!0);try{let b=await h.RoleService.getRoles({currentPage:a,pageLimit:l});if(200===b.status){let a=b.data.data;z(a.data),i(Number(a.page)),m(Number(a.limit))}}catch(a){if(console.error(a),g.default.isAxiosError(a)){let b=(0,e.default)(a);o(b),f.toast.error(`${b}`)}}finally{v(!1)}},H=async()=>{try{let a=await r.PermissionsService.getAll();200===a.status&&B(a.data.data)}catch(a){if(console.error(a),g.default.isAxiosError(a)){let b=(0,e.default)(a);o(b),f.toast.error(`${b}`)}}},I=async a=>{o(""),x(!0);try{if(await (0,t.default)({title:"Are you sure for delete",text:"Are you sure to delete this User role",btnTxt:"Yes, Delete"})){let b=await h.RoleService.delete(a);200===b.status&&(f.toast.success("Role deleted successfully"),await G())}}catch(a){if(console.error(a),g.default.isAxiosError(a)){let b=(0,e.default)(a);o(b),f.toast.error(`${b}`)}}finally{x(!1)}},J=async()=>{v(!0),o(null);try{let a=await h.RoleService.create(C);200===a.status&&(await G(),D({name:"",permissions:[]}),f.toast.success("Roles created successfully"),k(!1))}catch(a){if(console.error(a),g.default.isAxiosError(a)){let b=(0,e.default)(a);o(b),f.toast.error(`${b}`)}}finally{v(!1)}};(0,d.useEffect)(()=>{G()},[]),(0,d.useEffect)(()=>{H()},[]);let K=E.user?.userRole?.some(a=>a.code===c.SUPER_ADMIN_ROLE_CODE)??!1;return(0,b.jsx)("div",{className:"ml-72 mt-14 p-6",children:(0,b.jsx)(q,{roleData:y,permissionData:A,currentPage:a,pageLimit:l,handleDelete:I,isLoading:p,isPopupShow:j,setIsPopupShow:k,formData:C,setFormData:D,handleSubmit:J,hasPermissions:F,isAdmin:K})})}],47199)}];

//# sourceMappingURL=_778a9922._.js.map