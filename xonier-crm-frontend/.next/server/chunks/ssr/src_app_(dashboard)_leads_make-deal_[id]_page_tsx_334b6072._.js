module.exports=[35367,a=>{"use strict";var b=a.i(87924),c=a.i(49909),d=a.i(60517),e=a.i(83490),f=a.i(72131),g=a.i(328),h=a.i(3711),i=a.i(20094),j=a.i(97168),k=a.i(3251),l=a.i(94695),m=a.i(50944),n=a.i(48617),o=a.i(71987),p=a.i(46271),q=a.i(94988),r=a.i(622),s=a.i(60239),t=a.i(14701),u=a.i(82353),v=a.i(64093),w=a.i(43302),x=a.i(27348),y=a.i(42343);function z(a){return(0,y.GenIcon)({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"},child:[]}]})(a)}var A=a.i(45997),B=a.i(38246);let C=({lead:a,loading:c=!1})=>c?(0,b.jsxs)("div",{className:"rounded-lg  bg-white dark:bg-gray-700 p-6 animate-pulse",children:[(0,b.jsx)("div",{className:"h-5 w-40 bg-gray-200 dark:bg-gray-600 rounded mb-4"}),(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:5}).map((a,c)=>(0,b.jsx)("div",{className:"h-4 w-full bg-gray-200 dark:bg-gray-600 rounded"},c))})]}):a?(0,b.jsxs)(p.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.25,ease:"easeOut"},className:"rounded-xl border  border-slate-200 dark:border-gray-600  bg-white dark:bg-gray-700 p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-5",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)("h3",{className:"text-2xl font-semibold flex items-center gap-2 text-slate-900 dark:text-white",children:[(0,b.jsx)(n.IoInformationCircleOutline,{className:"text-yellow-400"}),"  Lead Information"]}),(0,b.jsx)(B.default,{href:`/leads/view/${a.id}`,className:"text-sm text-slate-500 hover:text-blue-500 dark:text-gray-300 cursor-pointer",children:a.lead_id})]}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium capitalize
          ${"high"===a.priority?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-300":"medium"===a.priority?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-300"}`,children:a.priority})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsx)(D,{icon:(0,b.jsx)(x.FiUser,{}),label:"Name",value:a.fullName}),(0,b.jsx)(A.MaskEmailField,{label:"Email",value:a.email}),(0,b.jsx)(A.MaskPhoneField,{label:"Phone",value:a.phone}),(0,b.jsx)(D,{icon:(0,b.jsx)(z,{}),label:"Company",value:a.companyName||"—"}),(0,b.jsx)(D,{icon:(0,b.jsx)(g.MdOutlineSource,{}),label:"Source",value:a.source}),(0,b.jsx)(D,{icon:(0,b.jsx)(x.FiMapPin,{}),label:"City",value:a.city||"—"})]}),(0,b.jsxs)("div",{className:"mt-5 pt-4 border-t border-slate-200 dark:border-gray-600 text-xs text-slate-500 dark:text-gray-400",children:["Created on"," ",new Date(a.createdAt).toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})]})]}):null,D=({icon:a,label:c,value:d})=>(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:"mt-0.5 text-blue-500 dark:text-blue-400",children:a}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{className:"text-xs text-slate-500 dark:text-gray-400",children:c}),(0,b.jsx)("span",{className:"font-medium text-slate-900 dark:text-white",children:d||"—"})]})]});a.s(["default",0,()=>{let[a,x]=(0,f.useState)(""),[y,z]=(0,f.useState)(!1),[A,B]=(0,f.useState)(!1),[D,E]=(0,f.useState)(!1),[F,G]=(0,f.useState)([]),[H,I]=(0,f.useState)([]),[J,K]=(0,f.useState)([]),[L,M]=(0,f.useState)(null),[N,O]=(0,f.useState)([]),[P,Q]=(0,f.useState)(null),[R,S]=(0,f.useState)({lead_id:"",dealName:"",dealPipeline:s.DEAL_PIPELINE.QUALIFICATION,dealStage:s.DEAL_STAGES.QUALIFICATION,dealType:s.DEAL_TYPE.NEW_BUSINESS,dealOwner:null,createDate:new Date().toISOString().split("T")[0],closeDate:null,amount:0,dealCollaborator:null,dealDescription:null,dealProbability:null,forecastProbability:null,nextStep:"",forecastCategory:null,closedWonReason:"",closedLostReason:"",originalTrafficSource:""}),T=(0,m.useRouter)(),{id:U}=(0,m.useParams)(),{hasPermission:V}=(0,v.usePermissions)(),W=async()=>{z(!0);try{let a=await w.default.getById(U);200===a.status&&Q(a.data.data)}catch(a){if(e.default.isAxiosError(a)){let b=(0,c.default)(a);x(b),i.toast.error(`${b}`)}else x(["Something went wrong"])}finally{z(!1)}};(0,f.useEffect)(()=>{W()},[]);let X=a=>{let{name:b,value:c,type:d}=a.target;"number"===d?S({...R,[b]:Number(c)}):S({...R,[b]:c})},Y=async()=>{B(!0);try{let a=await d.FormFieldService.getDealAll();if(200===a.status){let b=a.data.data??[],c=b.filter(a=>!0===a.required);K(c);let d=c.map(a=>a.id);I(d),G(b)}}catch(a){if(console.error(a),e.default.isAxiosError(a)){let b=(0,c.default)(a);x(b),i.toast.error(`${b}`)}else x(["Something went wrong"])}finally{B(!1)}};(0,f.useEffect)(()=>{Y(),U&&S({...R,lead_id:String(U)})},[]);let Z=a=>{let{value:b,checked:c}=a.target;c?I(a=>[...a,b]):J.some(a=>a.id===b)?i.toast.info("this field is required"):I(a=>a.filter(a=>a!=b))},$=async a=>{a.preventDefault(),x(""),E(!0);try{let a=await t.default.create(R);201===a.status&&(i.toast.success(`${R.dealName} deal created successfully`),S({lead_id:"",dealName:"",dealPipeline:s.DEAL_PIPELINE.QUALIFICATION,dealStage:s.DEAL_STAGES.QUALIFICATION,dealType:s.DEAL_TYPE.NEW_BUSINESS,dealOwner:null,createDate:new Date().toISOString().split("T")[0],closeDate:null,amount:0,dealCollaborator:null,dealDescription:null,dealProbability:0,forecastProbability:0,nextStep:"",forecastCategory:null,closedWonReason:"",closedLostReason:"",originalTrafficSource:""}),setTimeout(()=>{T.push("/deals")},1800))}catch(a){if(console.error(a),e.default.isAxiosError(a)){let b=(0,c.default)(a);x(b),i.toast.error(`${b}`)}else x(["Something went wrong"])}finally{E(!1)}};return(0,b.jsxs)("div",{className:"fixed min-h-screen overflow-y-scroll z-100 top-0 left-0 right-0 border-0 w-full h-full bg-stone-100 dark:bg-gray-800",children:[(0,b.jsxs)("div",{className:"fixed z-100 left-0 top-0 w-88 border-r flex flex-col gap-6  border-slate-900/15 dark:border-gray-700 bg-slate-50 h-screen dark:bg-gray-800/50 pt-12 px-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 w-full border-b border-slate-600 py-4",children:[(0,b.jsx)(g.MdOutlineFormatIndentIncrease,{className:"text-blue-500"}),(0,b.jsx)("h2",{className:"text-slate-900 dark:text-white font-semibold text-lg tracking-wide ",children:"All Form Fields"})]}),(0,b.jsx)("ul",{className:"flex flex-col gap-3 px-4 py-2.5 min-h-[70vh] overflow-y-scroll",children:A?Array.from({length:18}).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[" ",(0,b.jsx)(h.default,{height:15,width:15,borderRadius:6,className:"animate-pulse"})," ",(0,b.jsx)(h.default,{height:16,width:100,borderRadius:6,className:"animate-pulse"})," "]},c)):F&&F.length>0&&F.map(a=>{let c=!!H.find(b=>b===a.id);return(0,b.jsxs)("li",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:a.key,name:a.name,value:a.id,className:"peer cursor-pointer ",checked:c,onChange:Z}),(0,b.jsx)("label",{htmlFor:a.key,className:"capitalize checked:text-blue-200 hover:text-blue-700 dark:hover:text-blue-200 hover:scale-104 transition-all duration-200 cursor-pointer peer-checked:text-blue-600 dark:peer-checked:text-blue-300  ",children:a.name})]})})})]}),(0,b.jsxs)("div",{className:"fixed top-4 z-50 left-96 w-[72vw] backdrop-blur-sm flex items-center justify-between gap-10 p-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 w-1/2",children:[(0,b.jsx)(k.GrDocumentUpdate,{className:"text-xl text-blue-500"})," ",(0,b.jsxs)("h2",{className:"text-slate-900 dark:text-white font-semibold text-2xl tracking-wide ",children:[" ","Create new Deal"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 ml-6",children:[(0,b.jsx)("button",{onClick:()=>T.back(),className:"h-10 w-10 flex items-center justify-center text-xl  border rounded-full dark:bg-[#1a2432] bg-slate-50 hover:text-blue-600 hover:border-blue-600/20 group border-[#ecf0f2] dark:border-gray-700 cursor-pointer hover:scale-103",children:(0,b.jsx)(j.FaArrowLeftLong,{className:"group-hover:scale-105 transition-all"})}),(0,b.jsx)("button",{onClick:()=>T.forward(),className:"h-10 w-10 flex items-center justify-center text-xl  border rounded-full dark:bg-[#1a2432] bg-slate-50 hover:text-blue-600 hover:border-blue-600/20 group border-[#ecf0f2] dark:border-gray-700 cursor-pointer hover:scale-103",children:(0,b.jsx)(j.FaArrowRightLong,{className:"group-hover:scale-105 transition-all"})}),(0,b.jsx)(l.default,{})]})]}),(0,b.jsxs)("div",{className:"ml-92 relative mt-18 flex flex-col gap-6 p-8",children:[(0,b.jsx)(C,{lead:P,loading:y}),a&&(0,b.jsx)(u.default,{error:a}),(0,b.jsxs)("div",{className:" bg-white dark:bg-gray-700 p-6 rounded-lg grid grid-cols-2 gap-5",children:[y?(0,b.jsx)(b.Fragment,{children:Array.from({length:6}).map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)(h.default,{height:18,width:100,borderRadius:10,className:"animate-pulse"}),(0,b.jsx)(h.default,{height:38,width:450,borderRadius:14,className:"animate-pulse"})]},c))}):F&&F.length>0&&(0==H.length?(0,b.jsxs)("div",{className:"flex items-center flex-col justify-center col-span-2 py-5",children:[(0,b.jsx)(o.default,{src:"/images/Cry.gif",alt:"cry img",height:200,width:200}),(0,b.jsx)("p",{className:"",children:"No form fields found, please select fields first"})]}):F.map((a,c)=>{let d=R[a.key],e="date"===a.type?d?d.split("T")[0]:"":d??"";if(H.find(b=>b===a.id))return"text"===a.type||"email"===a.type||"date"===a.type||"textarea"===a.type?(0,b.jsx)(p.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:8},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeOut"},className:"w-full",children:(0,b.jsx)(q.default,{name:a.key,type:a.type,label:a.name,onChange:a=>X(a),value:e,placeholder:a.placeholder??"",required:a.required})},a.id):"number"===a.type?(0,b.jsx)(p.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:8},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeOut"},className:"w-full",children:(0,b.jsx)(q.default,{name:a.key,type:a.type,label:a.name,onChange:a=>X(a),onWheel:a=>a.currentTarget.blur(),value:e,placeholder:a.placeholder??"",required:a.required})},a.id):"select"===a.type?(0,b.jsx)(p.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:8},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeOut"},className:"w-full",children:(0,b.jsx)(r.default,{name:a.key,label:a.name,options:a.options??[],placeholder:a.placeholder??"Select",onChange:a=>X(a),required:a.required})},a.id):null})),(0,b.jsxs)("div",{className:"flex mt-6 items-center gap-5 justify-end col-span-2",children:[(0,b.jsxs)("button",{onClick:$,className:"w-fit flex items-center justify-center gap-2 rounded-md px-4 py-2 font-medium text-nowrap bg-blue-600 text-white hover:bg-blue-700 hover:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 capitalize",disabled:D||H.length<=0||!V(s.PERMISSIONS.createDeal),children:[(0,b.jsx)(g.MdOutlineCloudUpload,{className:"text-lg"})," ",D?"Updating...":"Create deals"]}),(0,b.jsxs)("button",{className:"w-fit flex items-center justify-center gap-2 rounded-md px-4 py-2 font-medium bg-blue-200 text-blue-600 hover:text-blue-700 hover:bg-blue-300 hover:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",onClick:()=>T.back(),children:[(0,b.jsx)(n.IoChevronBack,{})," Back"]})]})]})]})]})}],35367)}];

//# sourceMappingURL=src_app_%28dashboard%29_leads_make-deal_%5Bid%5D_page_tsx_334b6072._.js.map