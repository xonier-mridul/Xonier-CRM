module.exports=[30614,a=>{"use strict";var b=a.i(87924),c=a.i(46345),d=a.i(55603),e=a.i(49909),f=a.i(45997),g=a.i(14701),h=a.i(83490),i=a.i(50944),j=a.i(72131),k=a.i(20094),l=a.i(328),m=a.i(3711),n=a.i(71682),o=a.i(48617),p=a.i(38246),q=a.i(87145),r=a.i(60239),s=a.i(45991);let t=({icon:a,label:c,value:d,color:e})=>(0,b.jsx)("div",{className:"bg-white dark:bg-gray-700 p-5 rounded-xl border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`${e} p-3 rounded-lg text-white`,children:a}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c}),(0,b.jsx)("p",{className:"text-xl font-bold text-gray-900 dark:text-white mt-1",children:d})]})]})}),u=({icon:a,label:c,value:d})=>(0,b.jsxs)("div",{className:"group",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[a&&(0,b.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:a}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c})]}),(0,b.jsx)("p",{className:"font-medium text-gray-900 dark:text-white capitalize pl-6",children:d})]}),v=({icon:a,label:c,value:d})=>(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a&&(0,b.jsx)("span",{className:"text-white/80",children:a}),(0,b.jsx)("span",{className:"text-sm text-white/80",children:c})]}),(0,b.jsx)("div",{className:"font-medium text-white pl-6",children:d})]}),w=({label:a,value:c,color:d})=>(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 dark:border-gray-600 last:border-0",children:[(0,b.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:a}),(0,b.jsx)("span",{className:`text-sm font-medium ${d}`,children:c||"—"})]});a.s(["default",0,()=>{let[a,x]=(0,j.useState)(!1),[y,z]=(0,j.useState)(null),[A,B]=(0,j.useState)("overview"),{id:C}=(0,i.useParams)(),D=(0,i.useRouter)(),{hasPermission:E}=(0,q.usePermissions)(),F=async a=>{x(!0);try{let b=await g.default.getById(a);200===b.status&&z(b.data.data)}catch(a){if(h.default.isAxiosError(a)){let b=(0,e.default)(a);k.toast.error(`${b}`)}else k.toast.error("Something went wrong")}finally{x(!1)}};(0,j.useEffect)(()=>{C&&F(C)},[C]);let G=async()=>{if(y)try{if(await (0,s.default)({title:"Are you sure?",text:`Do you want to delete deal "${y.dealName}"?`,btnTxt:"Yes, delete"})){let a=await g.default.delete(y.id);200===a.status&&(k.toast.success("Deal deleted successfully"),D.push("/deals"))}}catch(a){if(h.default.isAxiosError(a)){let b=(0,e.default)(a);k.toast.error(`${b}`)}else k.toast.error("Something went wrong")}},H=async()=>{window.print()};if(a)return(0,b.jsxs)("div",{className:"ml-72 mt-14 p-6 flex flex-col gap-6 animate-pulse",children:[(0,b.jsx)(m.default,{height:120,borderRadius:12,className:"dark:bg-gray-700 w-full"}),(0,b.jsx)(m.default,{height:60,borderRadius:12,className:"dark:bg-gray-700 w-full"}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsxs)("div",{className:"w-2/3 flex flex-col gap-6",children:[(0,b.jsx)(m.default,{height:300,borderRadius:12,className:"dark:bg-gray-700 w-full"}),(0,b.jsx)(m.default,{height:200,borderRadius:12,className:"dark:bg-gray-700 w-full"})]}),(0,b.jsx)("div",{className:"w-1/3",children:(0,b.jsx)(m.default,{height:400,borderRadius:12,className:"dark:bg-gray-700 w-full"})})]})]});if(!y)return(0,b.jsx)("div",{className:"ml-72 mt-14 p-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(o.IoDocumentText,{className:"w-20 h-20 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Deal Not Found"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The deal you're looking for doesn't exist or has been removed."}),(0,b.jsxs)("button",{onClick:()=>D.back(),className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,b.jsx)(o.IoArrowBack,{className:"w-5 h-5"}),"Go Back"]})]})})});let{lead_id:I}=y,J=(0,d.formatDate)(y?.createDate);return(0,b.jsxs)("div",{className:"mt-14 ml-72 p-6 min-h-screen",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("div",{className:`${y.status===r.DEAL_STATUS.DELETE?"border-red-400 bg-red-100 ":"bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-700"}  rounded-xl border border-gray-200 p-6`,children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h1",{className:`${y.status===r.DEAL_STATUS.DELETE?"text-red-500 ":"text-gray-900 dark:text-white"} text-3xl font-bold line-clamp-1 w-64 capitalize`,children:y?.dealName}),(0,b.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium capitalize ${{qualification:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",proposal:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",negotiation:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",closed_won:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",closed_lost:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",delete:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}[y?.dealStage]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}`,children:[(0,b.jsx)(o.IoFunnelOutline,{className:"w-4 h-4 text-[10px]"}),y?.dealStage?.replace("_"," ")]}),(0,b.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium capitalize ${{new_business:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400",existing_business:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400",renewal:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-400"}[y?.dealType]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}`,children:[(0,b.jsx)(o.IoBriefcaseOutline,{className:"w-4 h-4"}),y?.dealType?.replace("_"," ")]})]}),(0,b.jsxs)("p",{className:"text-gray-500 dark:text-gray-400 cursor-pointer hover:text-blue-500 dark:hover:text-blue-400 transition-colors flex items-center gap-2",onClick:()=>(0,c.handleCopy)(y?y.deal_id:""),children:[(0,b.jsx)(o.IoDocumentText,{className:"w-4 h-4"}),"Deal ID: ",(0,b.jsx)("span",{className:"font-mono",children:y?.deal_id})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[E(r.PERMISSIONS.createQuote)&&y.status!==r.DEAL_STATUS.DELETE&&(0,b.jsxs)(p.default,{href:`/deals/quotation/${y.id}`,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors group",children:[(0,b.jsx)(n.FaRegPaperPlane,{className:"w-4 h-4 group-hover:rotate-12 transition-transform"}),"Send Quotation"]}),(0,b.jsx)("button",{onClick:H,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",children:(0,b.jsx)(o.IoPrintOutline,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",children:(0,b.jsx)(o.IoEllipsisVertical,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"hidden group-hover:block absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-10",children:[E(r.PERMISSIONS.updateDeal)&&y.status!==r.DEAL_STATUS.DELETE?(0,b.jsxs)(p.default,{href:`/deals/update/${y.id}`,className:"w-full flex items-center gap-2 px-4 py-2 text-blue-600 dark:text-blue-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[(0,b.jsx)(l.MdOutlineSettings,{className:"w-4 h-4"}),"Update Deal"]}):(0,b.jsxs)("span",{className:"inline-flex items-center gap-2 px-4 py-2  opacity-60 rounded-lg cursor-not-allowed",children:[(0,b.jsx)(l.MdOutlineSettings,{className:"w-4 h-4"}),"Update Deal"]}),E(r.PERMISSIONS.deleteDeal)&&y.status!==r.DEAL_STATUS.DELETE&&(0,b.jsxs)("button",{onClick:G,className:"w-full flex items-center gap-2 px-4 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[(0,b.jsx)(l.MdDeleteOutline,{className:"w-4 h-4"}),"Delete"]})]})]})]})]})})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,b.jsx)(t,{icon:(0,b.jsx)(o.IoCashOutline,{className:"w-6 h-6"}),label:"Deal Amount",value:`₹ ${y?.amount?.toLocaleString("en-IN")}`,color:"bg-green-500"}),(0,b.jsx)(t,{icon:(0,b.jsx)(n.FaPercent,{className:"w-5 h-5"}),label:"Deal Probability",value:`${y?.dealProbability??0}%`,color:"bg-blue-500"}),(0,b.jsx)(t,{icon:(0,b.jsx)(n.FaChartLine,{className:"w-5 h-5"}),label:"Forecast Probability",value:`${y?.forecastProbability??0}%`,color:"bg-purple-500"}),J&&(0,b.jsx)(t,{icon:(0,b.jsx)(o.IoCalendarOutline,{className:"w-5 h-5"}),label:"Created",value:J,color:"bg-amber-500"})]}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-700 mb-6 rounded-xl border border-gray-200 dark:border-gray-700",children:(0,b.jsx)("div",{className:"flex gap-8 overflow-x-auto px-6 py-3.5",children:["overview","lead","activity"].map(a=>(0,b.jsxs)("button",{onClick:()=>B(a),className:`pb-1.5 px-1 font-medium transition-colors cursor-pointer relative whitespace-nowrap ${A===a?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[a.charAt(0).toUpperCase()+a.slice(1),A===a&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]},a))})}),(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsxs)("div",{className:"w-2/3 flex flex-col gap-6",children:["overview"===A&&(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,b.jsx)(o.IoStatsChartOutline,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Deal Information"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoFunnelOutline,{className:"w-4 h-4"}),label:"Pipeline",value:y?.dealPipeline}),(0,b.jsx)(u,{icon:(0,b.jsx)(l.MdTimeline,{className:"w-4 h-4"}),label:"Stage",value:y?.dealStage}),(0,b.jsx)(u,{icon:(0,b.jsx)(l.MdCategory,{className:"w-4 h-4"}),label:"Type",value:y?.dealType}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoCashOutline,{className:"w-4 h-4"}),label:"Amount",value:`₹ ${y?.amount?.toLocaleString("en-IN")}`}),(0,b.jsx)(u,{icon:(0,b.jsx)(n.FaPercent,{className:"w-4 h-4"}),label:"Deal Probability",value:`${y?.dealProbability??0}%`}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoTrendingUpOutline,{className:"w-4 h-4"}),label:"Forecast Category",value:y?.forecastCategory??"—"}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoCalendarOutline,{className:"w-4 h-4"}),label:"Create Date",value:J}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoCalendarOutline,{className:"w-4 h-4"}),label:"Close Date",value:y?.closeDate??"—"}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoPersonOutline,{className:"w-4 h-4"}),label:"Deal Owner",value:y?.dealOwner??"—"}),(0,b.jsx)(u,{icon:(0,b.jsx)(n.FaHandshake,{className:"w-4 h-4"}),label:"Deal Collaborator",value:y?.dealCollaborator??"—"}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoFlagOutline,{className:"w-4 h-4"}),label:"Next Step",value:y?.nextStep??"—"}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoCheckmarkCircle,{className:"w-4 h-4"}),label:"Closed Won Reason",value:y?.closedWonReason??"—"}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoCloseCircle,{className:"w-4 h-4"}),label:"Closed Lost Reason",value:y?.closedLostReason??"—"}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoInformationCircleOutline,{className:"w-4 h-4"}),label:"Original Traffic Source",value:y?.originalTrafficSource??"—"}),(0,b.jsx)(u,{icon:(0,b.jsx)(n.FaChartLine,{className:"w-4 h-4"}),label:"Forecast Probability",value:`${y?.forecastProbability??0}%`})]}),y?.dealDescription&&(0,b.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(o.IoDocumentText,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"})]}),(0,b.jsx)("p",{className:"text-gray-900 dark:text-white",children:y.dealDescription})]})]}),"lead"===A&&(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,b.jsx)(o.IoPersonOutline,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Lead Information"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoPersonOutline,{className:"w-4 h-4"}),label:"Full Name",value:I.fullName}),(0,b.jsx)(f.MaskEmailField,{label:"Email",value:I.email}),(0,b.jsx)(f.MaskPhoneField,{label:"Phone",value:I.phone}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoBusinessOutline,{className:"w-4 h-4"}),label:"Company",value:I.companyName??"—"}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoFlagOutline,{className:"w-4 h-4"}),label:"Priority",value:I.priority}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoStatsChartOutline,{className:"w-4 h-4"}),label:"Status",value:I.status}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoInformationCircleOutline,{className:"w-4 h-4"}),label:"Source",value:I.source}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoBriefcaseOutline,{className:"w-4 h-4"}),label:"Project Type",value:I.projectType}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoLocationOutline,{className:"w-4 h-4"}),label:"City",value:I.city??"—"}),(0,b.jsx)(u,{icon:(0,b.jsx)(o.IoGlobeOutline,{className:"w-4 h-4"}),label:"Country",value:I.country??"—"})]}),I.message&&(0,b.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(o.IoDocumentText,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Lead Message"})]}),(0,b.jsx)("p",{className:"text-gray-900 dark:text-white",children:I.message})]})]}),"activity"===A&&(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,b.jsx)(l.MdTimeline,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Activity Timeline"})]}),(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(o.IoInformationCircleOutline,{className:"w-12 h-12 mx-auto text-gray-300 dark:text-gray-600 mb-3"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Activity timeline coming soon"})]})]})]}),(0,b.jsxs)("div",{className:"w-1/3 flex flex-col gap-6",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-xl border border-blue-400 shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(n.FaRegUser,{className:"text-xl text-white"}),(0,b.jsx)("h2",{className:"text-white font-semibold text-xl",children:"Creator Information"})]}),(0,b.jsx)("div",{className:"border-b border-white/30 w-full mb-4"}),y.createdBy?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(v,{icon:(0,b.jsx)(o.IoPersonOutline,{className:"w-4 h-4"}),label:"Name",value:`${y.createdBy?.firstName} ${y.createdBy?.lastName??""}`}),(0,b.jsx)(v,{icon:(0,b.jsx)(o.IoMailOutline,{className:"w-4 h-4"}),label:"Email",value:y.createdBy?.email}),(0,b.jsx)(v,{icon:(0,b.jsx)(o.IoCallOutline,{className:"w-4 h-4"}),label:"Phone",value:y.createdBy?.phone}),(0,b.jsx)(v,{icon:(0,b.jsx)(o.IoBusinessOutline,{className:"w-4 h-4"}),label:"Company",value:y.createdBy?.company||"—"})]}):(0,b.jsx)("p",{className:"text-white text-center py-4",children:"Creator data not found"})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-xl border border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Stats"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(w,{label:"In Quotation",value:y.inQuotation?"Yes":"No",color:y.inQuotation?"text-green-600":"text-gray-600"}),(0,b.jsx)(w,{label:"Created",value:(0,d.formatDate)(y.createdAt),color:"text-gray-600 dark:text-gray-400"}),(0,b.jsx)(w,{label:"Last Updated",value:(0,d.formatDate)(y.updatedAt),color:"text-gray-600 dark:text-gray-400"})]})]})]})]})]})}])}];

//# sourceMappingURL=src_app_%28dashboard%29_deals_view_%5Bid%5D_page_tsx_e9d9608a._.js.map