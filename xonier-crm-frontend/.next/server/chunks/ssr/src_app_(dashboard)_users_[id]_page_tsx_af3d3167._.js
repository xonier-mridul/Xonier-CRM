module.exports=[43771,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(49909),f=a.i(83490),g=a.i(61914);a.i(8467);var h=a.i(99985),i=a.i(71987);let j=()=>(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-xl animate-pulse",children:[(0,b.jsx)("div",{className:"h-6 w-40 bg-gray-300 dark:bg-gray-600 rounded mb-4"}),(0,b.jsx)("div",{className:"h-4 w-72 bg-gray-300 dark:bg-gray-600 rounded"})]});var k=a.i(46345),l=a.i(73834),m=a.i(85811),n=a.i(18155),o=a.i(23665),p=a.i(58042),q=a.i(94222),r=a.i(54419),s=a.i(59854),t=a.i(48662),u=a.i(64321),v=a.i(27165),w=a.i(67149),x=a.i(328),y=a.i(48617),z=a.i(27348),A=a.i(17256),B=a.i(63257),C=a.i(56973),D=a.i(28308),E=a.i(39895),F=a.i(57529),G=a.i(60239),H=a.i(38246);let I={[G.ACTIVITY_ENTITY_TYPE.LEAD]:{label:"Lead",color:"#6366f1",bg:"bg-indigo-50 dark:bg-indigo-900/30",icon:(0,b.jsx)(A.HiOutlineUserGroup,{className:"w-4 h-4"})},[G.ACTIVITY_ENTITY_TYPE.DEAL]:{label:"Deal",color:"#10b981",bg:"bg-emerald-50 dark:bg-emerald-900/30",icon:(0,b.jsx)(A.HiOutlineBriefcase,{className:"w-4 h-4"})},[G.ACTIVITY_ENTITY_TYPE.QUOTATION]:{label:"Quotation",color:"#f59e0b",bg:"bg-amber-50 dark:bg-amber-900/30",icon:(0,b.jsx)(A.HiOutlineDocumentText,{className:"w-4 h-4"})},[G.ACTIVITY_ENTITY_TYPE.INVOICE]:{label:"Invoice",color:"#3b82f6",bg:"bg-blue-50 dark:bg-blue-900/30",icon:(0,b.jsx)(A.HiOutlineCurrencyDollar,{className:"w-4 h-4"})}},J={[G.ACTIVITY_ACTION.CREATED]:{label:"Created",color:"text-emerald-600",dot:"bg-emerald-500"},[G.ACTIVITY_ACTION.UPDATED]:{label:"Updated",color:"text-blue-600",dot:"bg-blue-500"},[G.ACTIVITY_ACTION.SENT]:{label:"Sent",color:"text-violet-600",dot:"bg-violet-500"},[G.ACTIVITY_ACTION.RESEND]:{label:"Resent",color:"text-purple-600",dot:"bg-purple-500"},[G.ACTIVITY_ACTION.CONVERTED]:{label:"Converted",color:"text-teal-600",dot:"bg-teal-500"},[G.ACTIVITY_ACTION.CLOSED_WON]:{label:"Closed Won",color:"text-green-600",dot:"bg-green-500"},[G.ACTIVITY_ACTION.CLOSED_LOST]:{label:"Closed Lost",color:"text-rose-600",dot:"bg-rose-500"},[G.ACTIVITY_ACTION.DELETE]:{label:"Deleted",color:"text-red-600",dot:"bg-red-500"}},K=["#6366f1","#10b981","#f59e0b","#3b82f6"],L=["#6366f1","#10b981","#f59e0b","#3b82f6","#8b5cf6","#ef4444","#14b8a6","#f97316"],M=a=>a.toISOString().slice(0,10),N=[{label:"Today",range:()=>{let a=new Date;return{from:M(a),to:M(a)}}},{label:"Last 7 days",range:()=>{let a=new Date,b=new Date(a);return b.setDate(a.getDate()-6),{from:M(b),to:M(a)}}},{label:"This month",range:()=>{let a=new Date;return{from:M(new Date(a.getFullYear(),a.getMonth(),1)),to:M(a)}}},{label:"Last 30 days",range:()=>{let a=new Date,b=new Date(a);return b.setDate(a.getDate()-29),{from:M(b),to:M(a)}}},{label:"Last 3 months",range:()=>{let a=new Date,b=new Date(a);return b.setMonth(a.getMonth()-3),{from:M(b),to:M(a)}}}],O=a=>a?new Date(a).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):"—",P=a=>new Date(a).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),Q=({active:a,payload:c,label:d})=>a&&c?.length?(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl px-3 py-2.5 shadow-2xl",children:[(0,b.jsx)("p",{className:"text-xs text-gray-400 mb-1.5",children:d}),c.map((a,c)=>(0,b.jsxs)("p",{className:"text-sm font-semibold flex items-center gap-2",style:{color:a.color??"#fff"},children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full shrink-0",style:{background:a.color??"#fff"}}),a.value,(0,b.jsx)("span",{className:"text-gray-400 font-normal text-xs",children:a.name})]},c))]}):null,R=({label:a,value:c,sub:d,icon:e,accent:f,link:g})=>(0,b.jsxs)(H.default,{href:g,className:"relative overflow-hidden hover:scale-105 hover:shadow-[0_0_6px_10px_#00000015] border-gray-200 bg-white dark:bg-gray-800 rounded-2xl border dark:border-gray-700 p-5 flex items-start gap-4",children:[(0,b.jsx)("div",{className:`shrink-0 w-11 h-11 rounded-xl flex items-center justify-center text-white text-lg ${f}`,children:e}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:a}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-0.5",children:c}),d&&(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:d})]}),(0,b.jsx)("div",{className:`absolute -right-4 -bottom-4 w-20 h-20 rounded-full opacity-[0.07] ${f}`})]}),S=({activity:a})=>{let c=I[a.entityType]??{label:a.entityType,color:"#94a3b8",bg:"bg-slate-50 dark:bg-slate-800",icon:(0,b.jsx)(z.FiActivity,{className:"w-4 h-4"})},d=J[a.action]??{label:a.action,color:"text-gray-500",dot:"bg-gray-400"},e=Object.entries(a.metadata??{}).filter(([a])=>!["leadId","quoteId"].includes(a));return(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full mt-1.5 ring-2 ring-white dark:ring-gray-800 ${d.dot} shrink-0`}),(0,b.jsx)("div",{className:"w-px flex-1 bg-gray-100 dark:bg-gray-700 mt-1"})]}),(0,b.jsx)("div",{className:"pb-5 flex-1 min-w-0",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-slate-100 dark:border-gray-700 p-4 hover:shadow-md transition-shadow duration-200",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3 flex-wrap",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-semibold ${c.bg}`,style:{color:c.color},children:[c.icon,c.label]}),(0,b.jsx)("span",{className:`text-xs font-semibold capitalize ${d.color}`,children:d.label})]}),(0,b.jsxs)("time",{className:"text-xs text-gray-400 whitespace-nowrap flex items-center gap-1",children:[(0,b.jsx)(y.IoTimeOutline,{className:"w-3 h-3"}),O(a.createdAt)]})]}),(0,b.jsx)("p",{className:"mt-2 text-sm font-medium text-gray-800 dark:text-gray-100 capitalize",children:a.title}),e.length>0&&(0,b.jsx)("div",{className:"mt-2.5 flex flex-wrap gap-2",children:e.map(([a,c])=>(0,b.jsxs)("span",{className:"text-xs bg-slate-50 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-0.5 rounded-md font-mono",children:[(0,b.jsxs)("span",{className:"text-gray-400",children:[a,": "]}),"object"==typeof c?(0,b.jsx)("span",{className:"text-amber-600 dark:text-amber-400",children:JSON.stringify(c)}):String(c)]},a))})]})})]})},T=({value:a,onApply:d,onClear:e})=>{let[f,g]=(0,c.useState)(a?.from??""),[h,i]=(0,c.useState)(a?.to??""),[j,k]=(0,c.useState)("");return(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-slate-200 dark:border-gray-600 rounded-2xl shadow-2xl p-5 w-80",children:[(0,b.jsx)("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Quick ranges"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1.5 mb-5",children:N.map(c=>{let e=c.range(),f=a?.from===e.from&&a?.to===e.to;return(0,b.jsx)("button",{onClick:()=>{g(e.from),i(e.to),k(""),d(e)},className:`text-xs px-2.5 py-1 rounded-full border font-medium transition-all ${f?"bg-indigo-600 text-white border-indigo-600 shadow-sm":"border-slate-200 dark:border-gray-600 text-gray-600 dark:text-gray-300 hover:border-indigo-400 hover:text-indigo-600 dark:hover:text-indigo-400"}`,children:c.label},c.label)})}),(0,b.jsx)("div",{className:"h-px bg-slate-100 dark:bg-gray-700 mb-4"}),(0,b.jsx)("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Custom range"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:"From date"}),(0,b.jsx)("input",{type:"date",value:f,max:h||void 0,onChange:a=>{g(a.target.value),k("")},className:"w-full text-sm rounded-xl border border-slate-200 dark:border-gray-600 bg-slate-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/40 focus:border-indigo-400"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1.5",children:"To date"}),(0,b.jsx)("input",{type:"date",value:h,min:f||void 0,onChange:a=>{i(a.target.value),k("")},className:"w-full text-sm rounded-xl border border-slate-200 dark:border-gray-600 bg-slate-50 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-3 py-2.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/40 focus:border-indigo-400"})]})]}),j&&(0,b.jsxs)("p",{className:"text-xs text-red-500 mt-2 flex items-center gap-1",children:[(0,b.jsx)(z.FiX,{className:"w-3 h-3"}),j]}),(0,b.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,b.jsx)("button",{onClick:()=>{f&&h?f>h?k('"From" must be before "To".'):(k(""),d({from:f,to:h})):k("Both dates are required.")},className:"flex-1 text-sm font-semibold bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl py-2.5 transition-colors shadow-sm shadow-indigo-200 dark:shadow-indigo-900/30",children:"Apply filter"}),a&&(0,b.jsx)("button",{onClick:()=>{g(""),i(""),k(""),e()},className:"px-4 text-sm font-medium text-gray-500 dark:text-gray-400 border border-slate-200 dark:border-gray-600 rounded-xl hover:bg-slate-50 dark:hover:bg-gray-700 transition-colors",children:"Clear"})]})]})},U=({userData:a,isLoading:d,activityData:e=[],activityLoading:f=!1,activitySummary:g=null,summaryLoading:M=!1,summaryFilter:N={},currentPage:U=1,totalPages:V=1,pageLimit:W=20,dateRange:X=null,onPageChange:Y,onDateFilter:Z,onSummaryFilter:$})=>{let[_,aa]=(0,c.useState)("overview"),[ab,ac]=(0,c.useState)("all"),[ad,ae]=(0,c.useState)("all"),[af,ag]=(0,c.useState)(!1),[ah,ai]=(0,c.useState)(!1),{entityPieData:aj,actionBarData:ak,dailyAreaData:al,entityCounts:am}=(0,c.useMemo)(()=>{if(!e.length)return{entityPieData:[],actionBarData:[],dailyAreaData:[],entityCounts:{}};let a={},b={},c={};return e.forEach(d=>{let e;a[d.entityType]=(a[d.entityType]||0)+1,b[d.action]=(b[d.action]||0)+1;let f=(e=new Date(d.createdAt),`${e.getDate()} ${e.toLocaleString("en",{month:"short"})}`);c[f]=(c[f]||0)+1}),{entityPieData:Object.entries(a).map(([a,b])=>({name:I[a]?.label??a,value:b})),actionBarData:Object.entries(b).map(([a,b])=>({name:J[a]?.label??a,count:b})),dailyAreaData:Object.entries(c).map(([a,b])=>({date:a,count:b})),entityCounts:a}},[e]),an=(0,c.useMemo)(()=>e.filter(a=>("all"===ab||a.entityType===ab)&&("all"===ad||a.action===ad)),[e,ab,ad]),ao="all"!==ab||"all"!==ad;if(d)return(0,b.jsx)(j,{});if(!a)return(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-12 text-center border border-slate-100 dark:border-gray-700",children:[(0,b.jsx)(y.IoPersonCircle,{className:"w-16 h-16 text-gray-200 dark:text-gray-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-500",children:"User not found"})]});let ap={[h.USER_STATUS.ACTIVE]:{bg:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-400",dot:"text-emerald-500"},[h.USER_STATUS.INACTIVE]:{bg:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-400",dot:"text-amber-500"},[h.USER_STATUS.SUSPENDED]:{bg:"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-400",dot:"text-orange-500"},[h.USER_STATUS.DELETED]:{bg:"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-400",dot:"text-red-500"}}[a.status]??{bg:"bg-gray-100 text-gray-700",dot:"text-gray-400"},aq=e.length,ar=Object.keys(am).length,as=[{key:"overview",label:"Overview",icon:(0,b.jsx)(y.IoPersonCircle,{className:"w-4 h-4"})},{key:"activity",label:"Activity",icon:(0,b.jsx)(z.FiActivity,{className:"w-4 h-4"}),badge:aq},{key:"summary",label:"Summary",icon:(0,b.jsx)(y.IoBarChart,{className:"w-4 h-4"})},{key:"roles",label:"Roles",icon:(0,b.jsx)(y.IoShieldCheckmark,{className:"w-4 h-4"}),badge:a.userRole?.length}];return(0,b.jsxs)("div",{className:"flex flex-col gap-6 font-sans",children:[(0,b.jsxs)("div",{className:"relative bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl overflow-hidden",children:[(0,b.jsx)("div",{className:"h-28 bg-linear-to-r from-slate-700 via-slate-800 to-slate-900 relative",children:(0,b.jsx)("div",{className:"absolute inset-0 opacity-20",style:{background:"linear-gradient(135deg, #2dd4bf 0%, #14b8a6 50%, #059669 100%)"}})}),(0,b.jsxs)("div",{className:"px-6 pb-6",children:[(0,b.jsxs)("div",{className:"flex items-end justify-between -mt-10 mb-4 flex-wrap gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-20 h-20 rounded-2xl border-4 border-white dark:border-gray-800 overflow-hidden bg-slate-100 shadow-xl",children:(0,b.jsx)(i.default,{src:"/images/dummy-user.png",width:80,height:80,alt:"User",className:"object-cover"})}),(0,b.jsx)("div",{className:`absolute -bottom-1 -right-1 w-5 h-5 rounded-full border-2 border-white dark:border-gray-800 ${a.status?"bg-emerald-500":"bg-gray-400"}`})]}),(0,b.jsx)("div",{className:"pb-1",children:(0,b.jsx)(F.default,{text:"Edit Profile",isLoading:d,disabled:d,link:`/users/update/${a.id??a._id}`,icon:(0,b.jsx)(x.MdOutlineEdit,{className:"text-base"})})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white tracking-tight capitalize",children:[a.firstName," ",a.lastName]}),a.isEmailVerified&&(0,b.jsx)(x.MdVerified,{className:"w-5 h-5 text-blue-500 shrink-0",title:"Email Verified"}),(0,b.jsxs)("span",{className:`inline-flex items-center gap-1 text-xs font-semibold px-2.5 py-0.5 rounded-full capitalize ${ap.bg}`,children:[(0,b.jsx)(D.GoDotFill,{className:ap.dot}),a.status]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[(0,b.jsxs)("button",{onClick:()=>(0,k.handleCopy)(a.email),className:"flex items-center gap-1.5 hover:text-blue-600 dark:hover:text-blue-400 cursor-pointer transition-colors group",children:[(0,b.jsx)(x.MdEmail,{className:"w-4 h-4"}),a.email,(0,b.jsx)(x.MdOutlineContentCopy,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]}),(0,b.jsxs)(H.default,{href:`tel:${a.phone}`,className:"flex items-center cursor-pointer hover:text-blue-600 gap-1.5",children:[(0,b.jsx)(x.MdPhone,{className:"w-4 h-4"}),a.phone]}),a.company&&(0,b.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(x.MdBusiness,{className:"w-4 h-4"}),a.company]})]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(R,{label:"Total Activities",value:aq,sub:`${ar} entity types`,icon:(0,b.jsx)(z.FiActivity,{}),accent:"bg-indigo-500",link:`/leads?userid=${a._id}`}),(0,b.jsx)(R,{label:"Last Login",link:"",value:a.lastLogin?new Date(a.lastLogin).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}):"—",sub:a.lastLogin?new Date(a.lastLogin).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):"Never",icon:(0,b.jsx)(B.RiLoginCircleLine,{}),accent:"bg-blue-500"}),(0,b.jsx)(R,{link:"/roles",label:"Assigned Roles",value:a.userRole?.length??0,sub:"access roles",icon:(0,b.jsx)(y.IoShieldCheckmark,{}),accent:"bg-violet-500"}),(0,b.jsx)(R,{label:"Member Since",link:"",value:new Date(a.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short"}),sub:new Date(a.createdAt).getFullYear().toString(),icon:(0,b.jsx)(y.IoCheckmarkDoneCircle,{}),accent:"bg-emerald-500"})]}),(0,b.jsxs)("div",{className:"bg-white  dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl overflow-hidden",children:[(0,b.jsx)("div",{className:"border-b border-slate-100 dark:border-gray-700 px-4",children:(0,b.jsx)("nav",{className:"flex gap-1",children:as.map(a=>(0,b.jsxs)("button",{onClick:()=>aa(a.key),className:`flex items-center gap-2 px-4 py-4 cursor-pointer text-sm font-medium border-b-2 transition-colors ${_===a.key?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[a.icon,a.label,void 0!==a.badge&&a.badge>0&&(0,b.jsx)("span",{className:`text-xs px-1.5 py-0.5 rounded-full font-semibold ${_===a.key?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}`,children:a.badge})]},a.key))})}),"overview"===_&&(0,b.jsxs)("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4",children:"Basic Information"}),(0,b.jsx)("div",{className:"space-y-4",children:[{label:"First Name",value:a.firstName},{label:"Last Name",value:a.lastName||"—"},{label:"Email",value:a.email},{label:"Phone",value:a.phone},{label:"Company",value:a.company||"—"},{label:"Email Verified",value:a.isEmailVerified?"Verified ✓":"Not Verified"}].map(({label:a,value:c})=>(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 py-2 border-b border-slate-50 dark:border-gray-700/50",children:[(0,b.jsx)("span",{className:"text-sm text-gray-400 min-w-28",children:a}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 text-right",children:c})]},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4",children:"Account Information"}),(0,b.jsx)("div",{className:"space-y-4",children:[{label:"Status",value:a.status},{label:"Active",value:a.isActive?"Yes":"No"},{label:"Created At",value:O(a.createdAt)},{label:"Last Login",value:a.lastLogin?O(a.lastLogin):"Never"},{label:"Updated At",value:O(a.updatedAt)},{label:"User ID",value:a.id??a._id??"—"}].map(({label:a,value:c})=>(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 py-2 border-b border-slate-50 dark:border-gray-700/50",children:[(0,b.jsx)("span",{className:"text-sm text-gray-400 min-w-28",children:a}),(0,b.jsx)("span",{className:`text-sm font-medium text-right max-w-48 break-all ${"User ID"===a?"font-mono text-xs text-gray-400":"text-gray-800 dark:text-gray-200"}`,children:c})]},a))})]}),a.createdBy&&(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-4",children:"Created By"}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-slate-50 dark:bg-gray-700/50 rounded-xl",children:[(0,b.jsxs)("div",{className:"w-10 h-10 rounded-full bg-linear-to-br from-slate-600 to-slate-800 flex items-center justify-center text-white font-bold text-sm",children:[a.createdBy.firstName?.[0],a.createdBy.lastName?.[0]]}),(0,b.jsx)("div",{children:(0,b.jsxs)("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:[a.createdBy.firstName," ",a.createdBy.lastName]})}),(0,b.jsx)("span",{className:"ml-auto text-xs text-gray-400",children:O(a.createdAt)})]})]})]}),"activity"===_&&(0,b.jsx)("div",{className:"p-6 space-y-6",children:f?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 gap-3",children:[(0,b.jsx)("div",{className:"w-9 h-9 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Loading activity…"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>ag(a=>!a),className:`flex items-center gap-2 text-sm font-medium px-4 py-2.5 rounded-xl border transition-all ${X?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-200 dark:shadow-indigo-900/30":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-slate-200 dark:border-gray-600 hover:border-indigo-400 hover:text-indigo-600 dark:hover:text-indigo-400"}`,children:[(0,b.jsx)(E.LuCalendarRange,{className:"w-4 h-4"}),X?`${P(X.from)} – ${P(X.to)}`:"Date Range",X&&(0,b.jsx)("span",{role:"button",tabIndex:0,onClick:a=>{a.stopPropagation(),Z?.(null)},onKeyDown:a=>"Enter"===a.key&&(a.stopPropagation(),Z?.(null)),className:"ml-1 hover:opacity-70",children:(0,b.jsx)(z.FiX,{className:"w-3.5 h-3.5"})})]}),af&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>ag(!1)}),(0,b.jsx)("div",{className:"absolute left-0 top-full mt-2 z-50",children:(0,b.jsx)(T,{value:X,onApply:a=>{Z?.(a),ag(!1)},onClear:()=>{Z?.(null),ag(!1)}})})]})]}),X&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full border border-indigo-200 dark:border-indigo-800",children:[(0,b.jsx)(z.FiCalendar,{className:"w-3 h-3"}),P(X.from)," —"," ",P(X.to)]}),(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("span",{className:"flex items-center gap-1 text-xs font-medium text-gray-400",children:(0,b.jsx)(z.FiFilter,{className:"w-3.5 h-3.5"})}),(0,b.jsxs)("select",{value:ab,onChange:a=>ac(a.target.value),className:"text-xs rounded-lg border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/30",children:[(0,b.jsx)("option",{value:"all",children:"All Entities"}),Object.values(G.ACTIVITY_ENTITY_TYPE).map(a=>(0,b.jsx)("option",{value:a,children:I[a]?.label??a},a))]}),(0,b.jsxs)("select",{value:ad,onChange:a=>ae(a.target.value),className:"text-xs rounded-lg border border-slate-200 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-500/30",children:[(0,b.jsx)("option",{value:"all",children:"All Actions"}),Object.values(G.ACTIVITY_ACTION).map(a=>(0,b.jsx)("option",{value:a,children:J[a]?.label??a},a))]}),ao&&(0,b.jsxs)("button",{onClick:()=>{ac("all"),ae("all")},className:"text-xs text-red-500 hover:text-red-600 font-medium flex items-center gap-1",children:[(0,b.jsx)(z.FiX,{className:"w-3 h-3"}),"Clear"]}),(0,b.jsxs)("span",{className:"text-xs text-gray-400 tabular-nums",children:[an.length," results"]})]})]}),0===aq?(0,b.jsxs)("div",{className:"text-center py-16 space-y-3",children:[(0,b.jsx)(z.FiActivity,{className:"w-12 h-12 text-gray-200 dark:text-gray-600 mx-auto"}),(0,b.jsx)("p",{className:"text-gray-400 font-medium",children:"No activity recorded for this period"}),X&&(0,b.jsx)("button",{onClick:()=>Z?.(null),className:"text-sm text-indigo-500 hover:text-indigo-600 font-medium",children:"Clear date filter"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-7 h-7 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg flex items-center justify-center",children:(0,b.jsx)(y.IoTrendingUp,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Activity Over Time"})]}),(0,b.jsxs)("span",{className:"text-xs font-medium text-gray-400 bg-white dark:bg-gray-800 px-2.5 py-1 rounded-full border border-slate-200 dark:border-gray-600",children:[aq," total"]})]}),(0,b.jsx)(t.ResponsiveContainer,{width:"100%",height:190,children:(0,b.jsxs)(l.AreaChart,{data:al,margin:{top:5,right:5,left:-20,bottom:0},children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"actGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),(0,b.jsx)("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),(0,b.jsx)(r.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4}),(0,b.jsx)(p.XAxis,{dataKey:"date",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(q.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(s.Tooltip,{content:(0,b.jsx)(Q,{})}),(0,b.jsx)(m.Area,{type:"monotone",dataKey:"count",name:"Activities",stroke:"#6366f1",strokeWidth:2.5,fill:"url(#actGrad)",dot:{r:4,fill:"#6366f1",strokeWidth:2,stroke:"#fff"},activeDot:{r:6,fill:"#6366f1",stroke:"#fff",strokeWidth:2}})]})})]}),(0,b.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700 flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("div",{className:"w-7 h-7 bg-amber-100 dark:bg-amber-900/40 rounded-lg flex items-center justify-center",children:(0,b.jsx)(C.BsCircleFill,{className:"w-3.5 h-3.5 text-amber-600 dark:text-amber-400"})}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"By Entity"})]}),(0,b.jsx)(t.ResponsiveContainer,{width:"100%",height:145,children:(0,b.jsxs)(u.PieChart,{children:[(0,b.jsx)(v.Pie,{data:aj,cx:"50%",cy:"50%",innerRadius:40,outerRadius:64,dataKey:"value",paddingAngle:4,stroke:"none",children:aj.map((a,c)=>(0,b.jsx)(w.Cell,{fill:K[c%K.length]},c))}),(0,b.jsx)(s.Tooltip,{content:(0,b.jsx)(Q,{})})]})}),(0,b.jsx)("div",{className:"mt-3 space-y-1.5",children:aj.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2.5 h-2.5 rounded-sm shrink-0",style:{background:K[c%K.length]}}),(0,b.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-1",children:a.name}),(0,b.jsx)("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-200 tabular-nums",children:a.value}),(0,b.jsxs)("span",{className:"text-xs text-gray-400 tabular-nums",children:["(",Math.round(a.value/aq*100),"%)"]})]},a.name))})]})]}),(0,b.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-7 h-7 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg flex items-center justify-center",children:(0,b.jsx)(z.FiActivity,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Actions Breakdown"})]}),(0,b.jsxs)("span",{className:"text-xs text-gray-400",children:[ak.length," action types"]})]}),(0,b.jsx)(t.ResponsiveContainer,{width:"100%",height:150,children:(0,b.jsxs)(n.BarChart,{data:ak,margin:{top:0,right:5,left:-20,bottom:0},children:[(0,b.jsx)(r.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4,vertical:!1}),(0,b.jsx)(p.XAxis,{dataKey:"name",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(q.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(s.Tooltip,{content:(0,b.jsx)(Q,{})}),(0,b.jsx)(o.Bar,{dataKey:"count",name:"Count",radius:[5,5,0,0],maxBarSize:52,children:ak.map((a,c)=>(0,b.jsx)(w.Cell,{fill:L[c%L.length]},c))})]})})]}),(0,b.jsx)("div",{className:"pt-2",children:0===an.length?(0,b.jsx)("p",{className:"text-sm text-gray-400 text-center py-8",children:"No activities match the selected filters."}):an.map(a=>(0,b.jsx)(S,{activity:a},a.id))}),V>1&&Y&&(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100 dark:border-gray-700",children:[(0,b.jsxs)("p",{className:"text-xs text-gray-400",children:["Page ",U," of ",V]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>Y(U-1),disabled:U<=1,className:"p-1.5 rounded-lg border border-slate-200 dark:border-gray-600 disabled:opacity-40 hover:bg-slate-50 dark:hover:bg-gray-700 transition-colors",children:(0,b.jsx)(z.FiChevronLeft,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>Y(U+1),disabled:U>=V,className:"p-1.5 rounded-lg border border-slate-200 dark:border-gray-600 disabled:opacity-40 hover:bg-slate-50 dark:hover:bg-gray-700 transition-colors",children:(0,b.jsx)(z.FiChevronRight,{className:"w-4 h-4"})})]})]})]})]})}),"summary"===_&&(0,b.jsx)("div",{className:"p-6 space-y-6",children:M?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 gap-3",children:[(0,b.jsx)("div",{className:"w-9 h-9 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Loading summary…"})]}):g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("button",{onClick:()=>ai(a=>!a),className:`flex items-center gap-2 text-sm font-medium px-4 py-2.5 rounded-xl border transition-all ${N?.from||N?.to?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-200 dark:shadow-indigo-900/30":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-slate-200 dark:border-gray-600 hover:border-indigo-400 hover:text-indigo-600 dark:hover:text-indigo-400"}`,children:[(0,b.jsx)(E.LuCalendarRange,{className:"w-4 h-4"}),N?.from&&N?.to?`${P(N.from)} – ${P(N.to)}`:"Date Range",(N?.from||N?.to)&&(0,b.jsx)("span",{role:"button",tabIndex:0,onClick:a=>{a.stopPropagation(),$?.({...N,from:void 0,to:void 0})},onKeyDown:a=>"Enter"===a.key&&(a.stopPropagation(),$?.({groupBy:N?.groupBy})),className:"ml-1 hover:opacity-70",children:(0,b.jsx)(z.FiX,{className:"w-3.5 h-3.5"})})]}),ah&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>ai(!1)}),(0,b.jsx)("div",{className:"absolute left-0 top-full mt-2 z-50",children:(0,b.jsx)(T,{value:N?.from&&N?.to?{from:N.from,to:N.to}:null,onApply:a=>{$?.({...N,...a}),ai(!1)},onClear:()=>{$?.({groupBy:N?.groupBy}),ai(!1)}})})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-1 bg-white dark:bg-gray-800 border border-slate-200 dark:border-gray-600 rounded-xl p-1",children:["day","week","month"].map(a=>(0,b.jsx)("button",{onClick:()=>$?.({...N,groupBy:a}),className:`text-xs font-semibold px-3 py-1.5 rounded-lg capitalize transition-all ${(N?.groupBy??"month")===a?"bg-indigo-600 text-white shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400"}`,children:a},a))}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[N?.from&&N?.to&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/20 px-3 py-1.5 rounded-full border border-indigo-200 dark:border-indigo-800",children:[(0,b.jsx)(z.FiCalendar,{className:"w-3 h-3"}),P(N.from)," —"," ",P(N.to)]}),(N?.from||N?.to||N?.groupBy)&&(0,b.jsxs)("button",{onClick:()=>$?.({}),className:"text-xs text-red-500 hover:text-white bg-red-50 hover:bg-red-500 px-2.5 py-1 rounded-full cursor-pointer group font-medium flex items-center gap-1 ml-auto",children:[(0,b.jsx)(z.FiX,{className:"w-3 h-3 group-hover:rotate-90"})," Reset"]})]}),g&&(0,b.jsxs)("span",{className:"ml-auto text-xs text-gray-400 flex items-center gap-1.5",children:[(0,b.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 inline-block"}),P(g.range.from)," —"," ",P(g.range.to),(0,b.jsx)("span",{className:"px-1.5 py-0.5 bg-slate-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded capitalize font-medium",children:g.range.groupBy})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)(H.default,{href:`/leads?userid=${a._id}`,className:"relative overflow-hidden hover:scale-105 cursor-point hover:shadow-[0_0_8px_10px_#00000014] bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl p-5",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-indigo-500 flex items-center justify-center shrink-0",children:(0,b.jsx)(A.HiOutlineUserGroup,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Leads Created"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-0.5",children:g.leads.created.reduce((a,b)=>a+b.count,0)}),(0,b.jsxs)("p",{className:"text-xs text-rose-500 mt-0.5",children:[g.leads.lost," lost"]})]})]}),(0,b.jsx)("div",{className:"absolute -right-3 -bottom-3 w-16 h-16 rounded-full bg-indigo-500 opacity-[0.07]"})]}),(0,b.jsxs)(H.default,{href:`/deals?userid=${a._id}`,className:"relative overflow-hidden hover:scale-105 cursor-point hover:shadow-[0_0_8px_10px_#00000014] bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl p-5",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-emerald-500 flex items-center justify-center shrink-0",children:(0,b.jsx)(A.HiOutlineBriefcase,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Deals Created"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-0.5",children:g.deals.created.reduce((a,b)=>a+b.count,0)}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-0.5",children:[(0,b.jsxs)("span",{className:"text-emerald-500",children:[g.deals.won," won"]})," · ",(0,b.jsxs)("span",{className:"text-rose-500",children:[g.deals.lost," lost"]})]})]})]}),(0,b.jsx)("div",{className:"absolute -right-3 -bottom-3 w-16 h-16 rounded-full bg-emerald-500 opacity-[0.07]"})]}),(0,b.jsxs)("div",{className:"relative overflow-hidden bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl p-5",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-amber-500 flex items-center justify-center shrink-0",children:(0,b.jsx)(A.HiOutlineDocumentText,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Quotations"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-0.5",children:g.quotations.sent+g.quotations.accepted}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-0.5",children:[(0,b.jsxs)("span",{className:"text-violet-500",children:[g.quotations.sent," sent"]})," · ",(0,b.jsxs)("span",{className:"text-emerald-500",children:[g.quotations.accepted," accepted"]})]})]})]}),(0,b.jsx)("div",{className:"absolute -right-3 -bottom-3 w-16 h-16 rounded-full bg-amber-500 opacity-[0.07]"})]}),(0,b.jsxs)("div",{className:"relative overflow-hidden bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl p-5",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center shrink-0",children:(0,b.jsx)(A.HiOutlineCurrencyDollar,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Invoices"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-0.5",children:g.invoices.created}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-0.5",children:"created"})]})]}),(0,b.jsx)("div",{className:"absolute -right-3 -bottom-3 w-16 h-16 rounded-full bg-blue-500 opacity-[0.07]"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[(0,b.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("div",{className:"w-7 h-7 bg-indigo-100 dark:bg-indigo-900/40 rounded-lg flex items-center justify-center",children:(0,b.jsx)(A.HiOutlineUserGroup,{className:"w-4 h-4 text-indigo-600 dark:text-indigo-400"})}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Leads Created"}),(0,b.jsxs)("span",{className:"ml-auto text-xs font-bold text-indigo-600 dark:text-indigo-400",children:[g.leads.created.reduce((a,b)=>a+b.count,0)," ","total"]})]}),g.leads.created.length>0?(0,b.jsx)(t.ResponsiveContainer,{width:"100%",height:160,children:(0,b.jsxs)(l.AreaChart,{data:g.leads.created.map(a=>({period:String(a._id),count:a.count})),margin:{top:5,right:5,left:-20,bottom:0},children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"leadsGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),(0,b.jsx)("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),(0,b.jsx)(r.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4}),(0,b.jsx)(p.XAxis,{dataKey:"period",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(q.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(s.Tooltip,{content:(0,b.jsx)(Q,{})}),(0,b.jsx)(m.Area,{type:"monotone",dataKey:"count",name:"Leads",stroke:"#6366f1",strokeWidth:2.5,fill:"url(#leadsGrad)",dot:{r:4,fill:"#6366f1",strokeWidth:2,stroke:"#fff"},activeDot:{r:6,fill:"#6366f1",stroke:"#fff",strokeWidth:2}})]})}):(0,b.jsx)("div",{className:"flex items-center justify-center h-40 text-sm text-gray-400",children:"No data for this period"})]}),(0,b.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("div",{className:"w-7 h-7 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg flex items-center justify-center",children:(0,b.jsx)(A.HiOutlineBriefcase,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Deals Created"}),(0,b.jsxs)("span",{className:"ml-auto text-xs font-bold text-emerald-600 dark:text-emerald-400",children:[g.deals.created.reduce((a,b)=>a+b.count,0)," ","total"]})]}),g.deals.created.length>0?(0,b.jsx)(t.ResponsiveContainer,{width:"100%",height:160,children:(0,b.jsxs)(l.AreaChart,{data:g.deals.created.map(a=>({period:String(a._id),count:a.count})),margin:{top:5,right:5,left:-20,bottom:0},children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"dealsGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),(0,b.jsx)("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),(0,b.jsx)(r.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4}),(0,b.jsx)(p.XAxis,{dataKey:"period",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(q.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(s.Tooltip,{content:(0,b.jsx)(Q,{})}),(0,b.jsx)(m.Area,{type:"monotone",dataKey:"count",name:"Deals",stroke:"#10b981",strokeWidth:2.5,fill:"url(#dealsGrad)",dot:{r:4,fill:"#10b981",strokeWidth:2,stroke:"#fff"},activeDot:{r:6,fill:"#10b981",stroke:"#fff",strokeWidth:2}})]})}):(0,b.jsx)("div",{className:"flex items-center justify-center h-40 text-sm text-gray-400",children:"No data for this period"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[(0,b.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("div",{className:"w-7 h-7 bg-amber-100 dark:bg-amber-900/40 rounded-lg flex items-center justify-center",children:(0,b.jsx)(A.HiOutlineDocumentText,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Quotations Breakdown"})]}),(0,b.jsx)(t.ResponsiveContainer,{width:"100%",height:140,children:(0,b.jsxs)(n.BarChart,{data:[{name:"Sent",value:g.quotations.sent},{name:"Accepted",value:g.quotations.accepted}],margin:{top:0,right:5,left:-20,bottom:0},children:[(0,b.jsx)(r.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4,vertical:!1}),(0,b.jsx)(p.XAxis,{dataKey:"name",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(q.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(s.Tooltip,{content:(0,b.jsx)(Q,{})}),(0,b.jsxs)(o.Bar,{dataKey:"value",name:"Count",radius:[5,5,0,0],maxBarSize:60,children:[(0,b.jsx)(w.Cell,{fill:"#8b5cf6"}),(0,b.jsx)(w.Cell,{fill:"#10b981"})]})]})})]}),(0,b.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-700/40 rounded-2xl p-5 border border-slate-100 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("div",{className:"w-7 h-7 bg-emerald-100 dark:bg-emerald-900/40 rounded-lg flex items-center justify-center",children:(0,b.jsx)(A.HiOutlineBriefcase,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Deals Outcome"})]}),(0,b.jsx)(t.ResponsiveContainer,{width:"100%",height:140,children:(0,b.jsxs)(n.BarChart,{data:[{name:"Created",value:g.deals.created.reduce((a,b)=>a+b.count,0)},{name:"Won",value:g.deals.won},{name:"Lost",value:g.deals.lost}],margin:{top:0,right:5,left:-20,bottom:0},children:[(0,b.jsx)(r.CartesianGrid,{strokeDasharray:"3 3",stroke:"#e2e8f0",strokeOpacity:.4,vertical:!1}),(0,b.jsx)(p.XAxis,{dataKey:"name",tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(q.YAxis,{allowDecimals:!1,tick:{fontSize:11,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),(0,b.jsx)(s.Tooltip,{content:(0,b.jsx)(Q,{})}),(0,b.jsxs)(o.Bar,{dataKey:"value",name:"Count",radius:[5,5,0,0],maxBarSize:60,children:[(0,b.jsx)(w.Cell,{fill:"#3b82f6"}),(0,b.jsx)(w.Cell,{fill:"#10b981"}),(0,b.jsx)(w.Cell,{fill:"#ef4444"})]})]})})]})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-slate-100 dark:border-gray-700 rounded-2xl overflow-hidden",children:[(0,b.jsx)("div",{className:"px-5 py-4 border-b border-slate-100 dark:border-gray-700",children:(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:"Entity Performance"})}),(0,b.jsx)("div",{className:"divide-y divide-slate-50 dark:divide-gray-700",children:[{icon:(0,b.jsx)(A.HiOutlineUserGroup,{className:"w-4 h-4"}),label:"Leads",color:"text-indigo-600",bg:"bg-indigo-50 dark:bg-indigo-900/30",stats:[{label:"Created/Assigned",value:g.leads.created.reduce((a,b)=>a+b.count,0),color:"text-gray-800 dark:text-gray-100"},{label:"Lost",value:g.leads.lost,color:"text-rose-500"}]},{icon:(0,b.jsx)(A.HiOutlineBriefcase,{className:"w-4 h-4"}),label:"Deals",color:"text-emerald-600",bg:"bg-emerald-50 dark:bg-emerald-900/30",stats:[{label:"Created",value:g.deals.created.reduce((a,b)=>a+b.count,0),color:"text-gray-800 dark:text-gray-100"},{label:"Won",value:g.deals.won,color:"text-emerald-500"},{label:"Lost",value:g.deals.lost,color:"text-rose-500"}]},{icon:(0,b.jsx)(A.HiOutlineDocumentText,{className:"w-4 h-4"}),label:"Quotations",color:"text-amber-600",bg:"bg-amber-50 dark:bg-amber-900/30",stats:[{label:"Sent",value:g.quotations.sent,color:"text-violet-500"},{label:"Accepted",value:g.quotations.accepted,color:"text-emerald-500"}]},{icon:(0,b.jsx)(A.HiOutlineCurrencyDollar,{className:"w-4 h-4"}),label:"Invoices",color:"text-blue-600",bg:"bg-blue-50 dark:bg-blue-900/30",stats:[{label:"Created",value:g.invoices.created,color:"text-gray-800 dark:text-gray-100"}]}].map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4 px-5 py-4 hover:bg-slate-50 dark:hover:bg-gray-700/40 transition-colors",children:[(0,b.jsxs)("span",{className:`inline-flex items-center gap-1.5 text-xs font-semibold px-2.5 py-1.5 rounded-lg ${a.bg} ${a.color} min-w-28`,children:[a.icon,a.label]}),(0,b.jsx)("div",{className:"flex items-center gap-6 flex-wrap",children:a.stats.map(a=>(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:`text-base font-bold tabular-nums ${a.color}`,children:a.value}),(0,b.jsx)("p",{className:"text-xs text-gray-400",children:a.label})]},a.label))})]},a.label))})]})]}):(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)(y.IoBarChart,{className:"w-12 h-12 text-gray-200 dark:text-gray-600 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-400 font-medium",children:"No summary data available"})]})}),"roles"===_&&(0,b.jsx)("div",{className:"p-6 space-y-4",children:a.userRole?.length?a.userRole.map(a=>(0,b.jsxs)("div",{className:"border border-slate-100 dark:border-gray-700 rounded-xl p-5",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 flex-wrap mb-4",children:[(0,b.jsxs)(H.default,{href:"/roles",className:"flex items-center gap-2 group",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-linear-to-br from-violet-500 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,b.jsx)(y.IoShieldCheckmark,{className:"w-4 h-4 text-white group-hover:scale-112"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold group-hover:text-blue-600 dark:group-hover:text-blue-500 text-gray-800 dark:text-gray-100",children:a.name}),(0,b.jsx)("p",{className:"text-xs font-mono text-gray-400",children:a.code})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.isSystemRole&&(0,b.jsx)("span",{className:"text-xs px-2 py-0.5 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-full font-medium",children:"System Role"}),(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${a.status?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400":"bg-gray-100 dark:bg-gray-700 text-gray-500"}`,children:a.status?"Active":"Inactive"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,b.jsx)(z.FiCalendar,{className:"w-3 h-3"}),(0,b.jsxs)("span",{children:["Created ",O(a.createdAt)]}),a.permissions?.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-slate-300 dark:text-gray-600",children:"•"}),(0,b.jsx)(y.IoShieldCheckmark,{className:"w-3 h-3"}),(0,b.jsxs)("span",{children:[a.permissions.length," permissions"]})]})]})]},a.id)):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(y.IoShieldCheckmark,{className:"w-10 h-10 text-gray-200 dark:text-gray-600 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-gray-400 font-medium",children:"No roles assigned"})]})})]})]})};var V=a.i(28337);let W={getByUser(a,b,c,d){let e=new URLSearchParams;return void 0!==b&&e.append("page",String(b)),void 0!==c&&e.append("limit",String(c)),d&&Object.entries(d).forEach(([a,b])=>{null!=b&&""!==b&&e.append(a,String(b))}),V.default.get(`/activity/user/${a}`,{params:e})},getSummaryByUser(a,b){let c=new URLSearchParams;return b&&Object.entries(b).forEach(([a,b])=>{null!=b&&""!==b&&c.append(a,String(b))}),V.default.get(`/activity/user/${a}/summary`,{params:c})}};a.s(["default",0,()=>{let[a,h]=(0,c.useState)(null),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(1),[w,x]=(0,c.useState)(1),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)({groupBy:"month"}),C=(0,d.useParams)().id,D=async a=>{p(!0),n(null);try{let b=await g.AuthService.getUserById(a);200===b.status&&h(b.data.data)}catch(a){console.error(a),n(f.default.isAxiosError(a)?(0,e.default)(a):["Something went wrong"])}finally{p(!1)}},E=(0,c.useCallback)(async(a,b,c)=>{r(!0);try{let d=await W.getByUser(a,b,20,{...c?.from&&{from:c.from},...c?.to&&{to:c.to}});if(200===d.status){let{data:a,pagination:b}=d.data.data;j(a),x(Math.ceil(b.total/b.limit))}}catch(a){console.error(a),n(f.default.isAxiosError(a)?(0,e.default)(a):["Something went wrong"])}finally{r(!1)}},[20]),F=(0,c.useCallback)(async(a,b)=>{t(!0);try{let c=await W.getSummaryByUser(a,{...b.from&&{from:b.from},...b.to&&{to:b.to},...b.groupBy&&{groupBy:b.groupBy}});200===c.status&&l(c.data.data)}catch(a){console.error(a),n(f.default.isAxiosError(a)?(0,e.default)(a):["Something went wrong"])}finally{t(!1)}},[]);return(0,c.useEffect)(()=>{C&&(D(C),E(String(C),1,null),F(String(C),{groupBy:"month"}))},[C]),(0,b.jsx)("div",{className:"ml-72 mt-14 p-6",children:(0,b.jsx)(U,{userData:a,isLoading:o,activityData:i,activityLoading:q,activitySummary:k,summaryLoading:s,summaryFilter:A,currentPage:u,totalPages:w,pageLimit:20,dateRange:y,onPageChange:a=>{a<1||a>w||(v(a),E(String(C),a,y))},onDateFilter:a=>{z(a),v(1),E(String(C),1,a)},onSummaryFilter:a=>{B(a),F(String(C),{from:a.from,to:a.to,groupBy:a.groupBy??"month"})}})})}],43771)}];

//# sourceMappingURL=src_app_%28dashboard%29_users_%5Bid%5D_page_tsx_af3d3167._.js.map