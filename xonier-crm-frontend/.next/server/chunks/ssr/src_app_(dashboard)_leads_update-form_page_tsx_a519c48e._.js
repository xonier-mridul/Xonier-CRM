module.exports=[90028,a=>{"use strict";var b=a.i(87924),c=a.i(49909),d=a.i(60517),e=a.i(40350),f=a.i(83490),g=a.i(72131),h=a.i(20094),i=a.i(328),j=a.i(3711),k=a.i(3251),l=a.i(94988),m=a.i(622),n=a.i(50944),o=a.i(48617),p=a.i(71987),q=a.i(46271),r=a.i(97168),s=a.i(94695),t=a.i(60239),u=a.i(28337),v=a.i(61413),w=a.i(31173),x=a.i(71682),y=a.i(45991);a.s(["default",0,()=>{let a,[z,A]=(0,g.useState)(""),[B,C]=(0,g.useState)(!1),[D,E]=(0,g.useState)(!1),[F,G]=(0,g.useState)(!1),[H,I]=(0,g.useState)(!1),[J,K]=(0,g.useState)(null),[L,M]=(0,g.useState)([]),[N,O]=(0,g.useState)([]),[P,Q]=(0,g.useState)([]),[R,S]=(0,g.useState)([]),[T,U]=(0,g.useState)([]),[V,W]=(0,g.useState)(!1),[X,Y]=(0,g.useState)(!1),[Z,$]=(0,g.useState)({name:"",type:t.CUSTOM_FIELD_TYPE.TEXT,options:[{label:"",value:""}],placeholder:"",order:0}),_=a=>{let{name:b,value:c,type:d}=a.target,e=a.target.checked;$(a=>({...a,[b]:"checkbox"===d?e:c}))},aa=(0,n.useRouter)(),ab=async()=>{C(!0);try{let a=await e.UserFormService.getAllLead();if(200===a.status){let b=a.data.data.selectedFormFields??[],c=b.map(a=>a.id),d=b.filter(a=>!0===a.required);K(a.data.data),M(b),U(c),S(d)}}catch(a){console.error(a),f.default.isAxiosError(a)?A((0,c.default)(a)):A(["Something went wrong"])}finally{C(!1)}},ac=async()=>{G(!0);try{let a=await u.default.get("/custom-field/get_buy_creator");if(200===a.status){let b=a.data.data;Q(b)}}catch(a){console.error(a),f.default.isAxiosError(a)?A((0,c.default)(a)):A(["Something went wrong"])}finally{G(!1)}},ad=async()=>{E(!0);try{let a=await d.FormFieldService.getLeadsAll();200===a.status&&O(a.data.data)}catch(a){if(console.error(a),f.default.isAxiosError(a)){let b=(0,c.default)(a);A(b),h.toast.error(`${b}`)}else A(["Something went wrong"])}finally{E(!1)}};(0,g.useEffect)(()=>{ab(),ad(),ac()},[]);let ae=a=>{let{value:b,checked:c}=a.target;c?U(a=>[...a,b]):R.some(a=>a.id===b)?h.toast.info("this field is required"):U(a=>a.filter(a=>a!=b))},af=async a=>{a.preventDefault(),A(""),I(!0);try{if(J&&!J.id&&h.toast.error("Form id not found"),!J){let a=await e.UserFormService.create({selectedFormFields:T,module:t.FORM_FIELD_MODULE.LEAD});if(201===a.status){h.toast.success("Form field created successfully"),await ab();return}}let a=await e.UserFormService.update(J?.id,{selectedFormFields:T,module:t.FORM_FIELD_MODULE.LEAD});200===a.status&&(h.toast.success("Form field updated successfully"),await ab())}catch(a){if(console.error(a),f.default.isAxiosError(a)){let b=(0,c.default)(a);A(b),h.toast.error(`${b}`)}else A(["Something went wrong"])}finally{I(!1)}},ag=(a,b,c)=>{$(d=>({...d,options:d.options.map((d,e)=>e===a?{...d,[b]:c}:d)}))},ah=async a=>{a.preventDefault(),Y(!0);try{let a;if(Z.type===t.CUSTOM_FIELD_TYPE.SELECT){let a=Z.options.filter(a=>a.label&&a.value);if(0===a.length){h.toast.error("Please add at least one valid option for select field"),Y(!1);return}Z.options=a}let b={...Z,module:t.FORM_FIELD_MODULE.LEAD},c=await (a=b,u.default.post("/custom-field/create",a));201===c.status&&(h.toast.success("Custom field created successfully"),W(!1),$({name:"",type:t.CUSTOM_FIELD_TYPE.TEXT,options:[{label:"",value:""}],placeholder:"",order:0}),await ac())}catch(a){if(console.error(a),f.default.isAxiosError(a)){let b=(0,c.default)(a);h.toast.error(`${b}`)}else h.toast.error("Failed to create custom field")}finally{Y(!1)}},ai=async a=>{try{if(await (0,y.default)({title:"Are you sure",text:"Are you sure to delete the field, It is going permanently deleted",btnTxt:"Yes, Delete"})){let b,c=await (b=a,u.default.delete(`/custom-field/delete/${b}`));200===c.status&&(h.toast.success("Field deleted successfully"),await ac())}}catch(a){if(console.error(a),f.default.isAxiosError(a)){let b=(0,c.default)(a);h.toast.error(`${b}`)}else h.toast.error("Failed to create custom field")}};return(0,b.jsxs)(b.Fragment,{children:[V&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.default,{onClick:()=>W(!1)}),(0,b.jsxs)(q.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-2/3 max-h-[90vh] overflow-y-auto bg-white dark:bg-gray-800 rounded-lg shadow-2xl z-1150",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:(0,b.jsx)(r.FaPlus,{className:"text-blue-600 dark:text-blue-400"})}),(0,b.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:"Create Custom Field"})]}),(0,b.jsx)("button",{onClick:()=>W(!1),className:"h-8 w-8 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center justify-center transition-colors",children:(0,b.jsx)(w.IoMdClose,{className:"text-xl text-gray-500 dark:text-gray-400"})})]}),(0,b.jsxs)("form",{onSubmit:ah,className:"p-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)(l.default,{label:"Field Name",name:"name",type:"text",placeholder:"Enter field name",value:Z.name,onChange:_,required:!0})}),(0,b.jsx)("div",{children:(0,b.jsx)(m.default,{label:"Field Type",name:"type",value:Z.type,onChange:_,options:[{label:"Text",value:t.CUSTOM_FIELD_TYPE.TEXT},{label:"Number",value:t.CUSTOM_FIELD_TYPE.NUMBER},{label:"Email",value:t.CUSTOM_FIELD_TYPE.EMAIL},{label:"Phone",value:t.CUSTOM_FIELD_TYPE.PHONE},{label:"Select",value:t.CUSTOM_FIELD_TYPE.SELECT},{label:"Textarea",value:t.CUSTOM_FIELD_TYPE.TEXTAREA},{label:"Date",value:t.CUSTOM_FIELD_TYPE.DATE}],required:!0})}),(0,b.jsx)("div",{children:(0,b.jsx)(l.default,{label:"Display Order",name:"order",type:"number",placeholder:"0",value:Z.order,onChange:_,required:!0})}),Z.type!==t.CUSTOM_FIELD_TYPE.CHECKBOX&&(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)(l.default,{label:"Placeholder",name:"placeholder",type:"text",placeholder:"Enter placeholder text",value:Z.placeholder,onChange:_})}),Z.type===t.CUSTOM_FIELD_TYPE.SELECT&&(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:[(0,b.jsx)("span",{className:"text-red-500 text-xl",children:"*"})," Options"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>{$(a=>({...a,options:[...a.options,{label:"",value:""}]}))},className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:[(0,b.jsx)(r.FaPlus,{className:"text-xs"})," Add Option"]})]}),(0,b.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:Z.options.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-end gap-3",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(l.default,{label:`Option ${c+1} Label`,type:"text",placeholder:"Display text",value:a.label,onChange:a=>ag(c,"label",a.target.value),required:!0})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(l.default,{label:"Value",type:"text",placeholder:"Internal value",value:a.value,onChange:a=>ag(c,"value",a.target.value),required:!0})}),Z.options.length>1&&(0,b.jsx)("button",{type:"button",onClick:()=>{$(a=>({...a,options:a.options.filter((a,b)=>b!==c)}))},className:"h-10 w-10 flex items-center justify-center bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-md hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors mb-1",children:(0,b.jsx)(x.FaTrash,{className:"text-sm"})})]},c))})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("button",{type:"button",onClick:()=>W(!1),className:"px-5 py-2.5 rounded-md border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:X,className:"px-5 py-2.5 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2",children:X?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.FaPlus,{className:"text-sm"}),"Create Field"]})})]})]})]})]}),(0,b.jsxs)("div",{className:"fixed min-h-screen overflow-y-scroll z-100 top-0 left-0 right-0 border-0 w-full h-full bg-stone-100 dark:bg-gray-800",children:[(0,b.jsxs)("div",{className:"fixed z-100 left-0 top-0 w-88 border-r flex flex-col gap-6 border-slate-900/15 dark:border-gray-700 bg-slate-50 h-screen overflow-y-scroll dark:bg-gray-800/50 pt-12 px-6 pb-12",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 w-full border-b border-slate-600 py-4",children:[(0,b.jsx)(i.MdOutlineFormatIndentIncrease,{className:"text-blue-500"}),(0,b.jsx)("h2",{className:"text-slate-900 dark:text-white font-semibold text-lg tracking-wide",children:"All Form Fields"})]}),(0,b.jsx)("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"System Fields"}),(0,b.jsx)("ul",{className:"flex flex-col gap-3 px-4 py-2.5",children:D?Array.from({length:18}).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(j.default,{height:15,width:15,borderRadius:6,className:"animate-pulse"}),(0,b.jsx)(j.default,{height:16,width:100,borderRadius:6,className:"animate-pulse"})]},c)):N&&N.length>0&&N.map(a=>{let c=T.includes(a.id);return(0,b.jsxs)("li",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:a.key,name:a.name,value:a.id,className:"peer cursor-pointer",checked:c,onChange:ae}),(0,b.jsx)("label",{htmlFor:a.key,className:"capitalize checked:text-blue-200 hover:text-blue-700 dark:hover:text-blue-200 hover:scale-104 transition-all duration-200 cursor-pointer peer-checked:text-blue-600 dark:peer-checked:text-blue-300",children:a.name})]},a.id)})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-slate-900 dark:text-white",children:"Custom Fields"}),(0,b.jsx)("ul",{className:"flex flex-col gap-3 px-4 py-2.5",children:F?Array.from({length:6}).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(j.default,{height:15,width:15,borderRadius:6,className:"animate-pulse"}),(0,b.jsx)(j.default,{height:16,width:100,borderRadius:6,className:"animate-pulse"})]},c)):P&&P.length>0&&P.map(a=>{let c=T.includes(a.id);return(0,b.jsxs)("li",{className:"flex items-center justify-between group gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:`custom-${a.key}`,name:a.name,value:a.id,className:"peer cursor-pointer",checked:c,onChange:ae}),(0,b.jsx)("label",{htmlFor:`custom-${a.key}`,className:"capitalize checked:text-blue-200 hover:text-blue-700 dark:hover:text-blue-200 hover:scale-104 transition-all duration-200 cursor-pointer peer-checked:text-blue-600 dark:peer-checked:text-blue-300",children:a.name})]}),(0,b.jsx)("button",{className:"h-6 w-6 group-hover:flex rounded-full cursor-pointer bg-red-200/80 hidden items-center justify-center text-red-500 hover:bg-red-500 hover:text-white",onClick:()=>ai(a.id),children:(0,b.jsx)(i.MdDeleteOutline,{className:"text-sm"})})]},a.id)})}),(0,b.jsxs)("button",{className:"flex items-center group hover:bg-blue-600 gap-3 capitalize border-2 border-gray-300 dark:border-gray-800 hover:border-blue-600 rounded-md px-4 py-2.5 bg-white dark:bg-slate-700 w-full hover:text-white cursor-pointer",onClick:()=>{W(!0)},children:[(0,b.jsx)(r.FaPlus,{className:"text-blue-500 group-hover:text-white group-hover:rotate-90 transition-all"}),"Add Custom fields"]})]}),(0,b.jsxs)("div",{className:"fixed top-4 z-50 left-96 w-[72vw] backdrop-blur-sm flex items-center justify-between gap-10 p-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 w-1/2",children:[(0,b.jsx)(k.GrDocumentUpdate,{className:"text-xl text-blue-500"}),(0,b.jsx)("h2",{className:"text-slate-900 dark:text-white font-semibold text-2xl tracking-wide",children:"Update Lead Form Field"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 ml-6",children:[(0,b.jsx)("button",{onClick:()=>aa.back(),className:"h-10 w-10 flex items-center justify-center text-xl border rounded-full dark:bg-[#1a2432] bg-slate-50 hover:text-blue-600 hover:border-blue-600/20 group border-[#ecf0f2] dark:border-gray-700 cursor-pointer hover:scale-103",children:(0,b.jsx)(r.FaArrowLeftLong,{className:"group-hover:scale-105 transition-all"})}),(0,b.jsx)("button",{onClick:()=>aa.forward(),className:"h-10 w-10 flex items-center justify-center text-xl border rounded-full dark:bg-[#1a2432] bg-slate-50 hover:text-blue-600 hover:border-blue-600/20 group border-[#ecf0f2] dark:border-gray-700 cursor-pointer hover:scale-103",children:(0,b.jsx)(r.FaArrowRightLong,{className:"group-hover:scale-105 transition-all"})}),(0,b.jsx)(s.default,{})]})]}),(0,b.jsx)("div",{className:"ml-92 relative mt-18 flex flex-col gap-3 p-8",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-700 p-6 rounded-lg grid grid-cols-2 gap-5",children:[B?(0,b.jsx)(b.Fragment,{children:Array.from({length:6}).map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)(j.default,{height:18,width:100,borderRadius:10,className:"animate-pulse"}),(0,b.jsx)(j.default,{height:38,width:450,borderRadius:14,className:"animate-pulse"})]},c))}):0===T.length?(0,b.jsxs)("div",{className:"flex items-center flex-col justify-center col-span-2 py-5",children:[(0,b.jsx)(p.default,{src:"/images/Cry.gif",alt:"cry img",height:200,width:200}),(0,b.jsx)("p",{children:"No form fields found, please select fields first"})]}):(a=[...N,...P],T.map(b=>a.find(a=>a.id===b)).filter(Boolean)).map((a,c)=>"text"===a.type||"email"===a.type||"number"===a.type?(0,b.jsx)(q.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:8},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeOut"},className:"w-full",children:(0,b.jsx)(l.default,{name:a.key,type:a.type,label:a.name,placeholder:a.placeholder??"",required:a.required})},a.id):"select"===a.type?(0,b.jsx)(q.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:8},exit:{opacity:0,y:-10},transition:{duration:.2,ease:"easeOut"},className:"w-full",children:(0,b.jsx)(m.default,{name:a.key,label:a.name,options:a.options??[],placeholder:a.placeholder??"Select",required:a.required})},a.id):null),(0,b.jsxs)("div",{className:"flex items-center gap-5 justify-end col-span-2",children:[(0,b.jsxs)("button",{onClick:af,className:"w-fit flex items-center justify-center gap-2 rounded-md px-4 py-2 font-medium text-nowrap bg-blue-600 text-white hover:bg-blue-700 hover:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 capitalize",disabled:H||T.length<=0,children:[(0,b.jsx)(i.MdOutlineCloudUpload,{className:"text-lg"}),H?"Updating...":"Update fields"]}),(0,b.jsxs)("button",{className:"w-fit flex items-center justify-center gap-2 rounded-md px-4 py-2 font-medium bg-blue-200 text-blue-600 hover:text-blue-700 hover:bg-blue-300 hover:cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",onClick:()=>aa.back(),children:[(0,b.jsx)(o.IoChevronBack,{})," Back"]})]})]})})]})]})}],90028)}];

//# sourceMappingURL=src_app_%28dashboard%29_leads_update-form_page_tsx_a519c48e._.js.map