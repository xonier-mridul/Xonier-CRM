module.exports=[10276,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(31173),e=a.i(27348),f=a.i(64093),g=a.i(60239),h=a.i(83490),i=a.i(49909),j=a.i(20094),k=a.i(99327),l=a.i(38246),m=a.i(28308),n=a.i(328),o=a.i(71682),p=a.i(82353),q=a.i(42068),r=a.i(61413),s=a.i(97168),t=a.i(94988),u=a.i(61914),v=a.i(96407),w=a.i(42354),x=a.i(45991),y=a.i(3711);a.s(["default",0,()=>{let[a,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(1),[G,H]=(0,c.useState)(10),[I,J]=(0,c.useState)([]),[K,L]=(0,c.useState)([]),[M,N]=(0,c.useState)([]),[O,P]=(0,c.useState)(1),[Q,R]=(0,c.useState)({name:"",description:"",category:"",manager:[],members:[]}),[S,T]=(0,c.useState)(""),{hasPermission:U}=(0,f.usePermissions)(),V=async()=>{D(!0);try{let a=await k.TeamService.getAll({page:E,limit:G});if(200===a.status){let b=a.data.data;J(b.data),F(Number(b.page)),H(Number(b.limit)),P(Number(b.totalPages))}}catch(a){if(console.error(a),h.default.isAxiosError(a)){let b=(0,i.default)(a);B(b),j.toast.error(`${b}`)}else B(["Something went wrong"])}finally{D(!1)}},W=async()=>{try{let a=await u.AuthService.getAllActiveWithoutPagination();200===a.status&&N(a.data.data)}catch(a){if(console.error(a),h.default.isAxiosError(a)){let b=(0,i.default)(a);B(b),j.toast.error(`${b}`)}else B(["Something went wrong"])}},X=async()=>{try{let a=await w.TeamCategoryService.getAllWithoutPagination();200===a.status&&L(a.data.data)}catch(a){if(console.error(a),h.default.isAxiosError(a)){let b=(0,i.default)(a);B(b),j.toast.error(`${b}`)}else B(["Something went wrong"])}};(0,c.useEffect)(()=>{X(),W(),V()},[E,G]);let Y=a=>{let{name:b,value:c}=a.target;R(a=>({...a,[b]:c}))},Z=async(a,b)=>{try{if(!a)return B("Team ID not found ");if(await (0,x.default)({title:"Are you sure",text:`Are you want to delete "${b}" team`,btnTxt:"Yes, delete"})){let b=await k.TeamService.delete(a);if(200===b.status){let b=I.filter(b=>b.id!==a);J(b),j.toast.success("Team deleted successfully")}}}catch(a){if(console.error(a),h.default.isAxiosError(a)){let b=(0,i.default)(a);B(b),j.toast.error(`${b}`)}else B(["Something went wrong"])}},$=async a=>{a.preventDefault(),D(!0);try{let a=await k.TeamService.create(Q);201===a.status&&(j.toast.success(`${Q.name} team created successfully`),T("Team created successfully"),setTimeout(()=>{T("")},3e3),R({name:"",category:"",description:"",manager:[],members:[]}),await V(),B(""),z(!1))}catch(a){if(console.error(a),h.default.isAxiosError(a)){let b=(0,i.default)(a);B(b),j.toast.error(`${b}`)}else B(["Something went wrong"])}finally{D(!1)}};return(0,b.jsxs)(b.Fragment,{children:[a&&(0,b.jsxs)(b.Fragment,{children:[" ",(0,b.jsx)(r.default,{onClick:()=>z(!1)})," ",(0,b.jsxs)("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2  bg-white dark:bg-gray-700 p-6 rounded-xl w-[650px] z-[200] flex flex-col gap-5 shadow-xl",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:"Create Team"}),(0,b.jsx)("button",{onClick:()=>z(!1),children:(0,b.jsx)(s.FaXmark,{className:"text-xl text-gray-500 hover:text-red-500 cursor-pointer hover:rotate-90 transition-all duration-300"})})]}),(0,b.jsxs)("form",{onSubmit:$,className:"grid grid-cols-1 gap-4",children:[(0,b.jsx)(t.default,{label:"Team Name",name:"name",value:Q.name,onChange:Y,placeholder:"Enter team name",required:!0}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Category"}),(0,b.jsxs)("select",{name:"category",value:Q.category,onChange:a=>R(b=>({...b,category:a.target.value})),required:!0,className:"bg-white dark:bg-gray-600 px-3 py-2 rounded-md border text-sm",children:[(0,b.jsx)("option",{value:"",children:"Select category"}),K.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Add Manager"}),(0,b.jsxs)("select",{onChange:a=>{if(a.target.value){var b;b=a.target.value,R(a=>a.members.includes(b)?a:{...a,manager:[...a.manager,b]}),a.target.value=""}},className:"bg-white dark:bg-gray-600 px-3 py-2 rounded-md border capitalize",children:[(0,b.jsx)("option",{value:"",children:"Select user"}),M.map(a=>(0,b.jsx)("option",{value:a.id,children:`${a.firstName} ${a.lastName} (${a.userRole.map(a=>a.name)})`},a.id))]}),Q.manager.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:Q.manager.map(a=>{let c=M.find(b=>b.id===a);return c?(0,b.jsxs)("span",{className:"flex items-center gap-1 bg-blue-100 text-blue-600  px-3 py-1 rounded-full text-sm",children:[c.firstName," ",c.lastName," (",c.userRole.map(a=>a.name),")",(0,b.jsx)("button",{type:"button",onClick:()=>{R(b=>({...b,manager:b.manager.filter(b=>b!==a)}))},className:"hover:text-red-500 cursor-pointer hover:rotate-90 transition-all duration-300",children:(0,b.jsx)(s.FaXmark,{size:14})})]},a):null})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Add Members"}),(0,b.jsxs)("select",{onChange:a=>{if(a.target.value){var b;b=a.target.value,R(a=>a.members.includes(b)?a:{...a,members:[...a.members,b]}),a.target.value=""}},className:"bg-white dark:bg-gray-600 px-3 py-2 rounded-md border capitalize",children:[(0,b.jsx)("option",{value:"",children:"Select user"}),M.map(a=>(0,b.jsx)("option",{value:a.id,children:`${a.firstName} ${a.lastName} (${a.userRole.map(a=>a.name)})`},a.id))]}),Q.members.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:Q.members.map(a=>{let c=M.find(b=>b.id===a);return c?(0,b.jsxs)("span",{className:"flex items-center gap-1 bg-blue-100 text-blue-600  px-3 py-1 rounded-full text-sm",children:[c.firstName," ",c.lastName," (",c.userRole.map(a=>a.name),")",(0,b.jsx)("button",{type:"button",onClick:()=>{R(b=>({...b,members:b.members.filter(b=>b!==a)}))},className:"hover:text-red-500 cursor-pointer hover:rotate-90 transition-all duration-300",children:(0,b.jsx)(s.FaXmark,{size:14})})]},a):null})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Description"}),(0,b.jsx)("textarea",{name:"description",value:Q.description,onChange:Y,placeholder:"Team description...",className:"w-full rounded-md border px-3 py-2 text-sm bg-white dark:bg-gray-600 dark:text-white"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>z(!1),className:"px-4 py-2 rounded-md border text-gray-600 hover:bg-gray-100",children:"Cancel"}),(0,b.jsxs)(v.default,{isLoading:C,disabled:""===Q.name||Q.members.length<=0,children:[" ","Submit"," "]})]})]})]})," "]}),(0,b.jsx)("div",{className:"ml-72 mt-14 p-6",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-700 dark:backdrop-blur-sm flex flex-col gap-5 p-6 rounded-xl border-[1px] border-slate-900/10 w-full",children:[(0,b.jsxs)("div",{className:"flex items-center gap-12 justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("h2",{className:"text-xl font-bold  dark:text-white text-slate-900 capitalize",children:"All Teams"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Create, edit or remove teams."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("select",{name:"limit",id:"limit",className:"bg-slate-50 dark:bg-gray-600 px-3 py-2.5 rounded-lg border-[1px] border-slate-900/10",children:[(0,b.jsx)("option",{value:"10",children:"10"}),(0,b.jsx)("option",{value:"20",children:"20"}),(0,b.jsx)("option",{value:"30",children:"30"}),(0,b.jsx)("option",{value:"40",children:"50"})]}),(0,b.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-600 px-3 py-2.5 gap-1.5 rounded-lg border-[1px] border-slate-900/10 flex items-center",children:[(0,b.jsx)(d.IoIosSearch,{className:"text-xl"}),(0,b.jsx)("input",{type:"text",placeholder:"search by name..."})]}),U(g.PERMISSIONS.createTeam)?(0,b.jsxs)("button",{onClick:()=>z(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-md flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)(e.FiUserPlus,{})," Create Team"]}):(0,b.jsxs)("span",{className:"bg-blue-400 opacity-89 cursor-not-allowed text-white px-5 py-2 rounded-md flex items-center gap-2",children:[(0,b.jsx)(e.FiUserPlus,{})," Create Team"]})]})]}),A&&(0,b.jsx)(p.default,{error:A}),S&&(0,b.jsx)(q.default,{message:S}),(0,b.jsxs)("table",{className:"w-full rounded-xl overflow-hidden",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"w-full border-b-2 border-zinc-500 bg-blue-100 dark:bg-gray-800",children:[(0,b.jsx)("th",{className:"p-4 uppercase text-xs text-start text-slate-500 dark:text-slate-100",children:"Manager"}),(0,b.jsxs)("th",{className:"p-4 uppercase text-xs text-start text-slate-500  dark:text-slate-100",children:[" ","Team"]}),(0,b.jsx)("th",{className:"p-4 uppercase text-xs text-start text-slate-500  dark:text-slate-100",children:"Members"}),(0,b.jsx)("th",{className:"p-4 uppercase text-xs text-start text-slate-500  dark:text-slate-100",children:"Status"}),(0,b.jsx)("th",{className:"p-4 uppercase text-xs text-start text-slate-500  dark:text-slate-100",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"",children:C?(0,b.jsxs)("tr",{className:"animate-pulse",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(y.default,{height:30,width:50,className:"w-full "})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(y.default,{height:30,width:150,className:"w-full "})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(y.default,{height:30,width:100,borderRadius:999,className:"w-full "}),(0,b.jsx)(y.default,{height:30,width:100,borderRadius:999,className:"w-full "})]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(y.default,{height:30,width:100,borderRadius:999,className:"w-full "})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(y.default,{height:32,width:32,className:"w-full "}),(0,b.jsx)(y.default,{height:32,width:32,className:"w-full "}),(0,b.jsx)(y.default,{height:32,width:32,className:"w-full "})]})})]}):I&&I?.length>0?I?.map((a,c)=>(new Date(a.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",timeZone:"Asia/Kolkata"}),(0,b.jsxs)("tr",{className:`${c%2==0?"bg-white dark:bg-transparent":"bg-blue-100/50 dark:bg-slate-500"} w-full`,children:[(0,b.jsx)("td",{className:"p-4",children:a?.manager?.map((a,c)=>(0,b.jsxs)(l.default,{href:`/users/${a.id}`,className:"bg-blue-500 hover:bg-blue-600 hover:scale-105 dark:bg-blue-500   text-white border border-blue-200 text-[13px] px-4 py-1.5 rounded-full text-nowrap capitalize",children:[a.firstName," ",a.lastName," "]},c))}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(l.default,{href:`/teams/categories/${a.id}`,className:"cursor-pointer hover:text-blue-500 capitalize",children:a.name})}),(0,b.jsx)("td",{className:"first-letter:uppercase p-4",children:(0,b.jsx)("div",{className:"flex gap-2 flex-wrap",children:a?.members?.map((a,c)=>(0,b.jsxs)(l.default,{href:`/users/${a.id}`,className:"bg-blue-100 hover:bg-blue-200 hover:scale-105 dark:bg-blue-200   text-blue-700 border border-blue-200 text-[13px] px-3 py-1 rounded-full transition-all capitalize duration",children:[" ",a.firstName," ",a.lastName," "]},c))})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("span",{className:`${!0===a.isActive?"bg-green-100  text-green-600":"bg-orange-100 text-orange-500"}  rounded-full text-sm font-medium py-1 px-3 flex items-center gap-1 w-fit  capitalize`,children:[" ",(0,b.jsx)(m.GoDotFill,{})," ",a.isActive?"Active":"Inactive"]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.default,{href:`/teams/view/${a.id}`,className:"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-green-100/80 dark:bg-green-50 hover:bg-green-200/70 dark:hover:bg-green-100 text-green-500 hover:scale-104",children:(0,b.jsx)(o.FaRegEye,{className:"text-xl"})}),(0,b.jsx)(l.default,{href:`/teams/update/${a.id}`,className:"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-yellow-200/80 dark:bg-yellow-100 hover:bg-yellow-300/70 dark:hover:bg-yellow-200 text-yellow-500 hover:scale-104",children:(0,b.jsx)(n.MdOutlineEdit,{className:"text-xl"})}),(0,b.jsxs)("button",{onClick:()=>Z(a.id,a.name),disabled:!U(g.PERMISSIONS.deleteTeam),className:"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-red-100 text-red-500 hover:bg-red-200 hover:scale-104 disabled:hover:scale-100 disabled:cursor-not-allowed disabled:text-red-400",children:[" ",(0,b.jsx)(n.MdDeleteOutline,{className:"text-xl"})," "]})]})})]}))):(0,b.jsx)("tr",{className:" text-center ",children:(0,b.jsx)("td",{colSpan:7,className:"p-4",children:"User data not found"})})})]})]})})]})}])}];

//# sourceMappingURL=src_app_%28dashboard%29_teams_page_tsx_73eebd3a._.js.map