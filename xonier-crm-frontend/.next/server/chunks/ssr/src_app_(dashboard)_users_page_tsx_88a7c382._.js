module.exports=[12203,a=>{"use strict";var b=a.i(87924);let c=()=>(0,b.jsx)("div",{});var d=a.i(31173),e=a.i(328),f=a.i(28308),g=a.i(71682);a.i(8467);var h=a.i(99985),i=a.i(38246),j=a.i(97168),k=a.i(27348),l=a.i(61413),m=a.i(94988),n=a.i(48196),o=a.i(87145),p=a.i(60239),q=a.i(96407),r=a.i(3711),s=a.i(89029);let t=({currentPage:a,pageLimit:c,userData:t,handleDelete:u,isLoading:v,isPopupShow:w,setIsPopupShow:x,formData:y,roleData:z,handleChange:A,handleUserRoleChange:B,handleRemoveRole:C,handleSubmit:D,setPageLimit:E,totalPage:F,err:G,loading:H,setCurrentPages:I})=>{let{hasPermission:J}=(0,o.usePermissions)();return(0,b.jsxs)(b.Fragment,{children:[w&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.default,{onClick:()=>x(!1)}),(0,b.jsxs)("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2  bg-white dark:bg-gray-700 p-6 rounded-xl w-[650px] z-[200] flex flex-col gap-5 shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-bold dark:text-white",children:"Create User"}),(0,b.jsx)("button",{className:"text-2xl text-gray-500 hover:text-red-500 cursor-pointer hover:rotate-90 transition-all duration-300",onClick:()=>x(!1),children:(0,b.jsx)(j.FaXmark,{})})]}),(0,b.jsxs)("form",{onSubmit:D,className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(m.default,{label:"firstName",type:"text",name:"firstName",placeholder:"First Name",value:y.firstName,onChange:A}),(0,b.jsx)(m.default,{label:"lastName",type:"text",name:"lastName",placeholder:"Last Name",value:y.lastName,onChange:A}),(0,b.jsx)(m.default,{label:"email",type:"email",name:"email",placeholder:"Email Address",value:y.email,onChange:A}),(0,b.jsx)(m.default,{label:"phone",type:"text",name:"phone",placeholder:"Phone Number",value:y.phone,onChange:A}),(0,b.jsx)(m.default,{label:"password",type:"password",name:"password",placeholder:"Password",value:y.password,onChange:A}),(0,b.jsx)(m.default,{label:"confirm password",type:"password",name:"confirmPassword",placeholder:"Confirm Password",value:y.confirmPassword,onChange:A}),(0,b.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"User Role"}),(0,b.jsxs)("select",{onChange:B,className:"w-full px-3 py-2 rounded-md border bg-white dark:bg-gray-700 text-black dark:text-white border-gray-300 dark:border-gray-300/30",children:[(0,b.jsx)("option",{value:"",children:"Select user role"}),z.map(a=>(0,b.jsx)("option",{value:a.id,hidden:a.code===n.SUPER_ADMIN_ROLE_CODE,disabled:a.code===n.SUPER_ADMIN_ROLE_CODE,children:a.name},a.id))]}),y.userRole.length>0&&(0,b.jsx)("div",{className:"col-span-1 flex flex-wrap gap-2 mt-2",children:y.userRole.map(a=>{let c=z.find(b=>b.id===a);return c?(0,b.jsxs)("span",{className:"flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[c.name,(0,b.jsx)("button",{type:"button",onClick:()=>C(a),className:"hover:text-red-500 transition",children:(0,b.jsx)(j.FaXmark,{size:12})})]},a):null})})]}),(0,b.jsx)(m.default,{label:"company",type:"text",name:"company",placeholder:"Company Name",value:y.company,onChange:A}),G&&(0,b.jsx)("div",{className:"flex justify-end col-span-2",children:(0,b.jsx)("p",{className:"text-red-500",children:G})}),(0,b.jsxs)(q.default,{isLoading:H,disabled:""===y.firstName||""===y.lastName||""===y.email||""===y.phone||""===y.password||y.userRole.length<=0,className:"col-span-2",children:[" ","Submit"," "]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-700 dark:backdrop-blur-sm flex flex-col gap-5 p-6 rounded-xl border-[1px] border-slate-900/10 w-full ",children:[(0,b.jsxs)("div",{className:"flex items-center gap-12 justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("h2",{className:"text-xl font-bold  dark:text-white text-slate-900 capitalize",children:"All users"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Create, edit or remove users. Each user can have multiple roles."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6",children:[(0,b.jsxs)("select",{name:"limit",id:"limit",className:"bg-slate-50 dark:bg-gray-600 px-3 py-2.5 rounded-lg border-[1px] border-slate-900/10",onChange:a=>{E(Number(a.target.value)),I(1)},children:[(0,b.jsx)("option",{value:"10",children:"10"}),(0,b.jsx)("option",{value:"20",children:"20"}),(0,b.jsx)("option",{value:"30",children:"30"}),(0,b.jsx)("option",{value:"40",children:"50"})]}),(0,b.jsxs)("div",{className:"bg-slate-50 dark:bg-gray-600 px-3 py-2.5 rounded-lg border-[1px] border-slate-900/10 flex items-center gap-2",children:[(0,b.jsx)(d.IoIosSearch,{className:"text-xl"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name"})]}),(0,b.jsxs)("button",{onClick:()=>x(!0),disabled:!J(p.PERMISSIONS.createUser),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 disabled:cursor-not-allowed text-white px-5 py-2 rounded-md flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)(k.FiUserPlus,{})," Create User"]})]})]}),(0,b.jsxs)("table",{className:"w-full rounded-xl overflow-hidden",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"w-full border-b-2 border-zinc-500 bg-blue-100 dark:bg-gray-800",children:[(0,b.jsx)("th",{className:"p-4 uppercase text-xs text-start text-slate-500 dark:text-slate-100",children:"S.No."}),(0,b.jsxs)("th",{className:"p-4 uppercase text-xs text-start text-slate-500  dark:text-slate-100",children:[" ","User"]}),(0,b.jsx)("th",{className:"p-4 uppercase text-xs text-start text-slate-500  dark:text-slate-100",children:"Type"}),(0,b.jsx)("th",{className:"p-4 uppercase text-xs text-start text-slate-500  dark:text-slate-100",children:"Created At"}),(0,b.jsx)("th",{className:"p-4 uppercase text-xs text-start text-slate-500  dark:text-slate-100",children:"Status"}),(0,b.jsx)("th",{className:"p-4 uppercase text-xs text-start text-slate-500  dark:text-slate-100",children:"Last Login"}),(0,b.jsx)("th",{className:"p-4 uppercase text-xs text-start text-slate-500  dark:text-slate-100",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"",children:v?Array.from({length:10}).map(a=>(0,b.jsxs)("tr",{className:" text-center animate-pulse",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(r.default,{width:30,height:30,borderRadius:12})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(r.default,{width:140,height:30,borderRadius:12})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(r.default,{width:130,height:30,borderRadius:12})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(r.default,{width:120,height:30,borderRadius:12})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(r.default,{width:100,height:30,borderRadius:999})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)(r.default,{width:140,height:30,borderRadius:12})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.default,{width:35,height:35,borderRadius:12}),(0,b.jsx)(r.default,{width:35,height:35,borderRadius:12}),(0,b.jsx)(r.default,{width:35,height:35,borderRadius:12})]})})]})):t&&t?.length>0?t?.map((a,c)=>{let d=new Date(a.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",timeZone:"Asia/Kolkata"}),j=a?.lastLogin?new Date(a?.lastLogin).toLocaleDateString("en-IN",{timeZone:"Asia/Kolkata",year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):"Not found";return(0,b.jsxs)("tr",{className:`${c%2==0?"bg-white dark:bg-transparent":"bg-blue-100/50 dark:bg-slate-500"} w-full`,children:[(0,b.jsx)("td",{className:"p-4",children:c+1}),(0,b.jsx)("td",{children:(0,b.jsxs)(i.default,{href:`/users/${a.id}`,className:"cursor-pointer hover:text-blue-500 capitalize",children:[a.firstName," ",a.lastName]})}),(0,b.jsx)("td",{children:a.userRole.map(a=>(0,b.jsx)("span",{className:"bg-green-500 px-3.5 py-1.5 rounded-lg text-white text-xs tracking-wide",children:a.name}))}),(0,b.jsx)("td",{children:d}),(0,b.jsx)("td",{children:(0,b.jsxs)("span",{className:`${a.status===h.USER_STATUS.ACTIVE?"bg-green-100  text-green-500":a.status===h.USER_STATUS.INACTIVE?"bg-yellow-100 text-yellow-500":a.status===h.USER_STATUS.DELETED?"bg-red-100 text-red-500":a.status===h.USER_STATUS.SUSPENDED?"bg-orange-100 text-orange-500":"bg-gray-100 text-gray-500"}  rounded-full text-sm font-medium py-1 px-3 flex items-center gap-1 w-fit  capitalize`,children:[" ",(0,b.jsx)(f.GoDotFill,{})," ",a.status]})}),(0,b.jsx)("td",{children:j}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.default,{href:`/users/${a.id}`,className:"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-green-100/80 dark:bg-green-50 hover:bg-green-200/70 dark:hover:bg-green-100 text-green-500 hover:scale-104",children:(0,b.jsx)(g.FaRegEye,{className:"text-xl"})}),a.userRole.some(a=>a.code===n.SUPER_ADMIN_ROLE_CODE)||!J(p.PERMISSIONS.updateUser)?(0,b.jsx)("span",{className:"h-9 w-9 flex items-center justify-center rounded-md cursor-not-allowed bg-yellow-200/80 dark:bg-yellow-100 text-yellow-300",children:(0,b.jsx)(e.MdOutlineEdit,{className:"text-xl"})}):(0,b.jsx)(i.default,{href:`/users/update/${a.id}`,className:"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-yellow-200/80 dark:bg-yellow-100 hover:bg-yellow-300/70 dark:hover:bg-yellow-200 text-yellow-500 hover:scale-104",children:(0,b.jsx)(e.MdOutlineEdit,{className:"text-xl"})}),a.userRole.some(a=>a.code===n.SUPER_ADMIN_ROLE_CODE)||!J(p.PERMISSIONS.deleteUser)?(0,b.jsxs)("span",{className:"h-9 w-9 flex items-center justify-center rounded-md cursor-not-allowed bg-red-100 text-red-400  opacity-80",children:[" ",(0,b.jsx)(e.MdDeleteOutline,{className:"text-xl"})," "]}):(0,b.jsxs)("button",{onClick:()=>u(a.id),className:"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-red-100 text-red-500 hover:bg-red-200 hover:scale-104",children:[" ",(0,b.jsx)(e.MdDeleteOutline,{className:"text-xl"})," "]})]})})]})}):(0,b.jsx)("tr",{className:" text-center ",children:(0,b.jsx)("td",{colSpan:7,className:"p-4",children:"User data not found"})})})]}),(0,b.jsx)(s.default,{currentPage:a,totalPages:F,onPageChange:a=>I(a)})]})]})};var u=a.i(83490),v=a.i(72131),w=a.i(49909),x=a.i(61914),y=a.i(20094),z=a.i(45991),A=a.i(57238);a.s(["default",0,()=>{let[a,d]=(0,v.useState)(""),[e,f]=(0,v.useState)([]),[g,h]=(0,v.useState)([]),[i,j]=(0,v.useState)(!1),[k,l]=(0,v.useState)(!1),[m,n]=(0,v.useState)(1),[o,p]=(0,v.useState)(10),[q,r]=(0,v.useState)(1),[s,B]=(0,v.useState)(!1),[C,D]=(0,v.useState)({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",userRole:[],company:"Xonier Technologies"}),E=async()=>{j(!0);try{let a=await x.AuthService.getAll({page:m,limit:o});if(200===a.status){let b=a.data.data;f(b.data),n(b.page),p(b.limit),r(b.totalPages)}}catch(a){console.error(a),u.default.isAxiosError(a)?d((0,w.default)(a)):d(["Something went wrong"])}finally{j(!1)}},F=async()=>{try{let a=await A.RoleService.getRolesWithoutPagination();200===a.status&&h(a.data.data)}catch(a){console.error(a),u.default.isAxiosError(a)?d((0,w.default)(a)):d(["Something went wrong"])}},G=async a=>{d("");try{if(await (0,z.default)({title:"Are your sure",text:"Are you sure to delete this user",btnTxt:"Yes, delete"})){let b=await x.AuthService.softDelete(a);200===b.status&&(y.toast.success("User deleted successfully"),await E())}}catch(a){if(console.error(a),u.default.isAxiosError(a)){let b=(0,w.default)(a);d(b),y.toast.error(`${b}`)}else d(["Something went wrong"])}};(0,v.useEffect)(()=>{F(),E()},[m,o]);let H=async a=>{if(a.preventDefault(),d(""),l(!0),C.password!==C.confirmPassword){d("Password not matching please, try again later"),l(!1);return}try{let a=await x.AuthService.create(C);201===a.status&&(y.toast.success(`${C.firstName} ${C.lastName} user create successfully`),B(!1),await E(),D({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",userRole:[],company:"xonier technologies"}))}catch(a){if(console.error(a),u.default.isAxiosError(a)){let b=(0,w.default)(a);d(b),y.toast.error(`${b}`)}else d(["Something went wrong"])}finally{l(!1)}};return(0,b.jsxs)("div",{className:"ml-72 mt-16 p-6",children:[(0,b.jsx)(c,{}),(0,b.jsx)(t,{currentPage:Number(m),pageLimit:Number(o),userData:e,handleDelete:G,isLoading:i,isPopupShow:s,setIsPopupShow:B,formData:C,roleData:g,handleChange:a=>{let{name:b,value:c}=a.target;D(a=>({...a,[b]:c}))},handleUserRoleChange:a=>{let b=a.target.value;if(!C.userRole.includes(b)){if(C.userRole.length>=1)return void y.toast.info("Currently only one user role allowed");D(a=>({...a,userRole:[...a.userRole,b]})),a.target.value=""}},handleRemoveRole:a=>{D(b=>({...b,userRole:b.userRole.filter(b=>b!==a)}))},handleSubmit:H,err:a,loading:k,setPageLimit:p,totalPage:q,setCurrentPages:n})]})}],12203)}];

//# sourceMappingURL=src_app_%28dashboard%29_users_page_tsx_88a7c382._.js.map