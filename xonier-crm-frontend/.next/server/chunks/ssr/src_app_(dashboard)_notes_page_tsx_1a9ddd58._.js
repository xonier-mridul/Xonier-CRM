module.exports=[90799,a=>{"use strict";var b,c=a.i(87924),d=a.i(72131),e=a.i(57703),f=a.i(71682),g=a.i(328),h=a.i(56973);let i=({text:a,isLoading:b,disabled:d,onClickEvt:e,icon:f})=>(0,c.jsxs)("button",{onClick:e,className:"bg-teal-500 hover:bg-teal-600 text-white px-5 py-2.5 rounded-md flex cursor-pointer items-center capitalize w-fit gap-2",children:[" ",f," ",b?"Loading...":a]});var j=a.i(49909),k=a.i(83490),l=a.i(28337),m=a.i(89029),n=a.i(20094),o=a.i(3711),p=a.i(60239),q=a.i(94988),r=a.i(622),s=a.i(63257),t=a.i(45991),u=((b=u||{}).ALL="all",b.IMPORTANT="important",b.PRIVATE="private",b);let v=({note:a,onPin:b,onDelete:d,onClick:e})=>(0,c.jsxs)("div",{onClick:()=>e(a),className:"relative bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-5 hover:scale-105 transition-all hover:shadow-[0_0_20px_#00000020] duration-300 cursor-pointer group overflow-hidden",children:[a.byAdmin&&(0,c.jsx)("div",{className:"absolute -right-10 top-6 w-40 bg-blue-600 text-white text-xs font-semibold py-1 text-center transform rotate-45 shadow-md z-10",children:"BY ADMIN"}),a.isPinned&&(0,c.jsxs)("div",{className:"absolute top-3 left-3 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[(0,c.jsx)(h.BsPinAngleFill,{className:"w-3 h-3"}),"Pinned"]}),(0,c.jsxs)("div",{className:`${a.isPinned?"mt-8":"mt-0"}`,children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2 line-clamp-2 pr-8",children:a.title}),(0,c.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-3",children:a.content}),(0,c.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100 dark:border-gray-700",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,c.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(a.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,c.jsxs)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["by ",a.createdBy.firstName," ",a.createdBy.lastName]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,c.jsx)("button",{onClick:c=>{c.stopPropagation(),b(a.id)},className:"p-2 rounded-full hover:bg-amber-100 dark:hover:bg-amber-900/30 text-amber-600 dark:text-amber-400 transition-colors",title:a.isPinned?"Unpin note":"Pin note",children:a.isPinned?(0,c.jsx)(h.BsPinAngleFill,{className:"w-4 h-4"}):(0,c.jsx)(h.BsPinAngle,{className:"w-4 h-4"})}),(0,c.jsx)("button",{onClick:b=>{b.stopPropagation(),d(a.id)},className:"p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 transition-colors",title:"Delete note",children:(0,c.jsx)(g.MdDelete,{className:"w-4 h-4"})})]})]})]})]}),w=({note:a,onClose:b,onPin:d,onDelete:e})=>a?(0,c.jsx)("div",{className:"fixed inset-0 backdrop-blur-md bg-black/20 bg-opacity-50 z-[150] flex items-center justify-center p-4",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,c.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 flex items-start justify-between",children:[(0,c.jsxs)("div",{className:"flex-1 pr-4",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[a.isPinned&&(0,c.jsxs)("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[(0,c.jsx)(h.BsPinAngleFill,{className:"w-3 h-3"}),"Pinned"]}),a.byAdmin&&(0,c.jsx)("span",{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 px-2 py-1 rounded-full text-xs font-medium",children:"BY ADMIN"})]}),(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.title})]}),(0,c.jsx)("button",{onClick:b,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full hover:rotate-90 hover:text-red-500 cursor-pointer transition-all duration-300",children:(0,c.jsx)(g.MdClose,{className:"w-6 h-6"})})]}),(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsx)("div",{className:"prose dark:prose-invert max-w-none mb-6",children:(0,c.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:a.content})}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"Created By"}),(0,c.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[a.createdBy.firstName," ",a.createdBy.lastName]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"Created At"}),(0,c.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:new Date(a.createdAt).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"Visibility"}),(0,c.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:a.visibility})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 block mb-1",children:"Status"}),(0,c.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:a.status})]})]})]}),(0,c.jsxs)("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-6 flex items-center justify-end gap-3",children:[(0,c.jsx)("button",{onClick:()=>{d(a.id),b()},className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center gap-2",children:a.isPinned?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h.BsPinAngleFill,{className:"w-4 h-4"}),"Unpin"]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h.BsPinAngle,{className:"w-4 h-4"}),"Pin"]})}),(0,c.jsxs)("button",{onClick:()=>{e(a.id),b()},className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white transition-colors flex items-center gap-2",children:[(0,c.jsx)(g.MdDelete,{className:"w-4 h-4"}),"Delete"]})]})]})}):null,x=({isOpen:a,onClose:b,onCreate:e})=>{let[f,i]=(0,d.useState)({title:"",content:"",entityType:p.NotesEntities.GENERAL,visibility:p.NoteVisibility.PUBLIC,isPinned:!1}),[m,o]=(0,d.useState)(!1),s=[{label:"General",value:p.NotesEntities.GENERAL},{label:"Lead",value:p.NotesEntities.LEAD},{label:"Deal",value:p.NotesEntities.DEAL},{label:"Quotation",value:p.NotesEntities.QUOTATION},{label:"invoice",value:p.NotesEntities.INVOICE}],t=[{label:"Public",value:p.NoteVisibility.PUBLIC},{label:"Private",value:p.NoteVisibility.PRIVATE}],u=async a=>{a.preventDefault(),o(!0);try{let a,c=await (a=f,l.default.post("/note/create",a));201===c.status&&(n.toast.success(`${f.title} note created successfully`),i({title:"",content:"",entityType:p.NotesEntities.GENERAL,visibility:p.NoteVisibility.PUBLIC,isPinned:!1}),e(),b())}catch(a){if(k.default.isAxiosError(a)){let b=(0,j.default)(a);n.toast.error(`${b}`)}else n.toast.error("Something went wrong")}finally{o(!1)}},v=()=>{i({title:"",content:"",entityType:p.NotesEntities.GENERAL,visibility:p.NoteVisibility.PUBLIC,isPinned:!1}),b()};return a?(0,c.jsx)("div",{className:"fixed inset-0 backdrop-blur-md bg-black/20 bg-opacity-50 z-[150] flex items-center justify-center p-4",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,c.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-6 flex items-center justify-between",children:[(0,c.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,c.jsx)(g.MdOutlineNoteAlt,{className:"w-6 h-6"}),"Create New Note"]}),(0,c.jsx)("button",{onClick:v,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full hover:rotate-90 hover:text-red-500 cursor-pointer transition-all duration-300",disabled:m,children:(0,c.jsx)(g.MdClose,{className:"w-6 h-6"})})]}),(0,c.jsxs)("form",{onSubmit:u,className:"p-6 space-y-4",children:[(0,c.jsx)(q.default,{label:"Note Title",type:"text",placeholder:"Enter note title",value:f.title,onChange:a=>i({...f,title:a.target.value}),required:!0}),(0,c.jsx)(q.default,{label:"Note Content",type:"textarea",placeholder:"Enter note content",value:f.content,onChange:a=>i({...f,content:a.target.value}),required:!0}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,c.jsx)(r.default,{label:"Entity Type",options:s,value:f.entityType,onChange:a=>i({...f,entityType:a.target.value}),placeholder:"Select entity type"}),(0,c.jsx)(r.default,{label:"Visibility",options:t,value:f.visibility,onChange:a=>i({...f,visibility:a.target.value}),placeholder:"Select visibility"})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,c.jsx)("input",{type:"checkbox",id:"isPinned",checked:f.isPinned,onChange:a=>i({...f,isPinned:a.target.checked}),className:"w-5 h-5 text-amber-600 bg-gray-100 border-gray-300 rounded focus:ring-amber-500 dark:focus:ring-amber-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"}),(0,c.jsxs)("label",{htmlFor:"isPinned",className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2 cursor-pointer",children:[(0,c.jsx)(h.BsPinAngleFill,{className:"w-4 h-4 text-amber-600"}),"Pin this note"]})]}),(0,c.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,c.jsx)("button",{type:"button",onClick:v,disabled:m,className:"px-6 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,c.jsx)("button",{type:"submit",disabled:m,className:"px-6 py-2.5 rounded-lg bg-blue-600 hover:bg-blue-700 text-white transition-colors font-medium flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(g.MdOutlineNoteAlt,{className:"w-4 h-4"}),"Create Note"]})})]})]})]})}):null};a.s(["default",0,()=>{let[a,b]=(0,d.useState)("all"),[h,p]=(0,d.useState)(!1),[q,r]=(0,d.useState)(null),[u,y]=(0,d.useState)([]),[z,A]=(0,d.useState)([]),[B,C]=(0,d.useState)(!1),[D,E]=(0,d.useState)(""),[F,G]=(0,d.useState)(1),[H,I]=(0,d.useState)(6),[J,K]=(0,d.useState)(1),[L,M]=(0,d.useState)(1),[N,O]=(0,d.useState)(6),[P,Q]=(0,d.useState)(1),R=a=>{b(a),"private"===a?M(1):G(1)},S=async()=>{C(!0);try{var a,b;let c,d=await (a=F,b=H,c=new URLSearchParams,a&&c.append("page",String(a)),b&&c.append("limit",String(b)),l.default.get(`/note/all/active?${c.toString()}`));if(200===d.status){let a=d.data.data;y(a.data),G(Number(a.page)),I(Number(a.limit)),K(Number(a.totalPages))}}catch(a){if(k.default.isAxiosError(a)){let b=(0,j.default)(a);E(`${b}`),n.toast.error(`${b}`)}else E("something went wrong"),n.toast.error("Something went wrong")}finally{C(!1)}},T=async()=>{C(!0);try{var a,b;let c,d=await (a=L,b=N,c=new URLSearchParams,a&&c.append("page",String(a)),b&&c.append("limit",String(b)),l.default.get(`/note/all/private?${c.toString()}`));if(200===d.status){let a=d.data.data;A(a.data),M(Number(a.page)),O(Number(a.limit)),Q(Number(a.totalPages))}}catch(a){if(k.default.isAxiosError(a)){let b=(0,j.default)(a);E(`${b}`),n.toast.error(`${b}`)}else E("something went wrong"),n.toast.error("Something went wrong")}finally{C(!1)}},U=async a=>{try{let b;if(!a)return void E("Note id not found");let c=await (b=a,l.default.patch(`/note/update/pinned/${b}`,{}));200===c.status&&(y(b=>b.map(b=>b.id===a?{...b,isPinned:!b.isPinned}:b)),A(b=>b.map(b=>b.id===a?{...b,isPinned:!b.isPinned}:b)),n.toast.success("Note pin status updated"))}catch(a){n.toast.error("Failed to update pin status")}},V=async(a,b)=>{try{await (0,t.default)({title:"Are you sure",text:`Are sure sure to delete ${b}`,btnTxt:"Yes, delete"})&&(y(b=>b.filter(b=>b.id!==a)),A(b=>b.filter(b=>b.id!==a)),n.toast.success("Note deleted successfully"))}catch(a){if(k.default.isAxiosError(a)){let b=(0,j.default)(a);E(`${b}`),n.toast.error(`${b}`)}else E("something went wrong"),n.toast.error("Something went wrong")}},W=a=>{r(a)},X=[...u.filter(b=>"important"!==a||b.isPinned)].sort((a,b)=>a.isPinned&&!b.isPinned?-1:!a.isPinned&&b.isPinned?1:new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime()),Y=[...z].sort((a,b)=>a.isPinned&&!b.isPinned?-1:!a.isPinned&&b.isPinned?1:new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime()),Z="private"===a?Y:X,$="private"===a?L:F,_="private"===a?N:H;return(0,d.useEffect)(()=>{"private"===a?T():S()},[F,H,L,N,a]),(0,c.jsxs)("div",{className:"ml-72 mt-14 p-6 min-h-screen",children:[(0,c.jsxs)("div",{className:"flex w-full flex-col gap-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-slate-900 dark:text-white font-bold text-4xl mb-2",children:"Notes"}),(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage and organize your notes"})]}),(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-5 flex items-center justify-between gap-4 flex-wrap",children:[(0,c.jsxs)("ul",{className:"flex items-center gap-3",children:[(0,c.jsxs)("li",{className:`${"all"===a?"bg-blue-600 text-white shadow-lg":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"} px-5 py-2.5 cursor-pointer flex items-center gap-2 capitalize rounded-lg transition-all duration-200 text-sm font-medium`,onClick:()=>R("all"),children:[(0,c.jsx)(e.TbNotes,{className:"w-4 h-4"}),"All notes"]}),(0,c.jsxs)("li",{className:`${"important"===a?"bg-amber-600 text-white shadow-lg ":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"} px-5 py-2.5 cursor-pointer flex items-center gap-2 capitalize rounded-lg text-sm transition-all duration-200 font-medium`,onClick:()=>R("important"),children:["important"===a?(0,c.jsx)(f.FaStar,{className:"w-4 h-4"}):(0,c.jsx)(f.FaRegStar,{className:"w-4 h-4 text-amber-500"}),"Pinned notes"]}),(0,c.jsxs)("li",{className:`${"private"===a?"bg-green-600 text-white shadow-lg ":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"} px-5 py-2.5 cursor-pointer flex items-center gap-2 capitalize rounded-lg text-sm transition-all duration-200 font-medium`,onClick:()=>R("private"),children:["private"===a?(0,c.jsx)(s.RiGitRepositoryPrivateFill,{className:"w-4 h-4"}):(0,c.jsx)(s.RiGitRepositoryPrivateLine,{className:"w-4 h-4 text-green-500"}),"Private notes"]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-3",children:[(0,c.jsxs)("select",{className:"border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 dark:bg-gray-700 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:_,onChange:b=>{"private"===a?(O(Number(b.target.value)),M(1)):(I(Number(b.target.value)),G(1))},children:[(0,c.jsx)("option",{value:6,children:"6 per page"}),(0,c.jsx)("option",{value:12,children:"12 per page"}),(0,c.jsx)("option",{value:24,children:"24 per page"})]}),(0,c.jsx)(i,{text:"Add Notes",onClickEvt:()=>{p(!0)},icon:(0,c.jsx)(g.MdOutlineNoteAlt,{})})]})]}),B?(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((a,b)=>(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-5",children:[(0,c.jsx)(o.default,{height:24,className:"mb-3"}),(0,c.jsx)(o.default,{count:3,className:"mb-2"}),(0,c.jsx)(o.default,{width:120,height:20})]},b))}):Z.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Z.map(a=>(0,c.jsx)(v,{note:a,onPin:U,onDelete:()=>V(a.id,a.title),onClick:W},a.id))}),(0,c.jsx)(m.default,{currentPage:$,totalPages:"private"===a?P:J,onPageChange:"private"===a?M:G})]}):(0,c.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 text-gray-500 dark:text-gray-400",children:[(0,c.jsx)(e.TbNotes,{className:"w-20 h-20 mb-4 opacity-30"}),(0,c.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No notes found"}),(0,c.jsx)("p",{className:"text-sm",children:"important"===a?"You don't have any pinned notes yet":"private"===a?"You don't have any private notes yet":"Start by creating your first note"})]})]}),q&&(0,c.jsx)(w,{note:q,onClose:()=>r(null),onPin:U,onDelete:()=>V(q.id,q.title)}),(0,c.jsx)(x,{isOpen:h,onClose:()=>p(!1),onCreate:()=>{S(),T()}})]})}],90799)}];

//# sourceMappingURL=src_app_%28dashboard%29_notes_page_tsx_1a9ddd58._.js.map