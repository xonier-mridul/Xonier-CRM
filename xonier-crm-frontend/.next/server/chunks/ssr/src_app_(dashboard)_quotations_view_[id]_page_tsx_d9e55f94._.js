module.exports=[71518,a=>{"use strict";var b=a.i(87924),c=a.i(49909),d=a.i(60239),e=a.i(4122),f=a.i(83490),g=a.i(50944),h=a.i(72131),i=a.i(20094),j=a.i(48617),k=a.i(71682),l=a.i(328),m=a.i(45991),n=a.i(87145),o=a.i(38246),p=a.i(91585),q=a.i(45997),r=a.i(28337),s=a.i(3711);a.s(["default",0,()=>{let[a,t]=(0,h.useState)(!1),[u,v]=(0,h.useState)(!1),[w,x]=(0,h.useState)(null),[y,z]=(0,h.useState)(null),[A,B]=(0,h.useState)(""),[C,D]=(0,h.useState)(""),[E,F]=(0,h.useState)("overview"),{id:G}=(0,g.useParams)(),H=(0,g.useRouter)(),{hasPermission:I}=(0,n.usePermissions)(),J=async a=>{t(!0);try{let b=await e.QuoteService.get_by_id(a);200===b.status&&x(b.data.data)}catch(a){if(console.error(a),f.default.isAxiosError(a)){let b=(0,c.default)(a);B(b),i.toast.error(`${b}`)}else B(["Something went wrong"])}finally{t(!1)}},K=async a=>{try{let b,c=await (b=a,r.default.get(`/quote-history/all/by-quote/${b}`));if(200===c.status){let a=c.data.data,b=Array.isArray(a)?a.sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime()):[];z(b)}}catch(a){console.error(a),f.default.isAxiosError(a)?D((0,c.default)(a)):D(["Quote history data not found"])}};(0,h.useEffect)(()=>{G&&(J(String(G)),K(String(G)))},[G]);let L=a=>`${a.firstName}${a.lastName?" "+a.lastName:""}`,M=a=>((a.firstName?.[0]||"")+(a.lastName?.[0]||"")).toUpperCase(),N=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),O=a=>new Date(a).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),P=a=>{let b={[d.QuotationStatus.DRAFT]:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",[d.QuotationStatus.SENT]:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",[d.QuotationStatus.UPDATED]:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",[d.QuotationStatus.RESEND]:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400",[d.QuotationStatus.VIEWED]:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",[d.QuotationStatus.ACCEPTED]:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",[d.QuotationStatus.REJECTED]:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",[d.QuotationStatus.DELETE]:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",[d.QuotationStatus.EXPIRED]:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400"};return b[a]||b[d.QuotationStatus.DRAFT]},Q=a=>{switch(a){case d.QuotationStatus.ACCEPTED:return(0,b.jsx)(j.IoCheckmarkCircle,{className:"w-4 h-4"});case d.QuotationStatus.REJECTED:return(0,b.jsx)(j.IoCloseCircle,{className:"w-4 h-4"});case d.QuotationStatus.EXPIRED:return(0,b.jsx)(j.IoTimeOutline,{className:"w-4 h-4"});case d.QuotationStatus.SENT:return(0,b.jsx)(j.IoSendOutline,{className:"w-4 h-4"});case d.QuotationStatus.VIEWED:return(0,b.jsx)(j.IoInformationCircleOutline,{className:"w-4 h-4"});default:return(0,b.jsx)(j.IoDocumentText,{className:"w-4 h-4"})}},R=async()=>{if(w)try{if(await (0,m.default)({title:"Are you sure?",text:`Do you want to delete quotation "${w.quoteId}"?`,btnTxt:"Yes, delete"})){let a=await e.QuoteService.delete(w.id);200===a.status&&(i.toast.success("Quotation deleted successfully"),H.push("/quotations"))}}catch(a){if(console.error(a),f.default.isAxiosError(a)){let b=(0,c.default)(a);i.toast.error(`${b}`)}else i.toast.error("Something went wrong")}},S=async()=>{i.toast.info("Download functionality coming soon")},T=async()=>{window.print()},U=async a=>{v(!0);try{let b=await e.QuoteService.resend(a);200===b.status&&(i.toast.success("Quotation resend successfully"),await J(a))}catch(a){if(console.error(a),f.default.isAxiosError(a)){let b=(0,c.default)(a);i.toast.error(`${b}`)}else i.toast.error("Something went wrong")}finally{v(!1)}};if(a)return(0,b.jsxs)("div",{className:"ml-72 mt-14 p-6 flex flex-col gap-6 animate-pulse",children:[(0,b.jsx)(s.default,{height:120,borderRadius:12,className:"dark:bg-gray-700 w-full animate-pulse"}),(0,b.jsx)(s.default,{height:60,borderRadius:12,className:"dark:bg-gray-700 w-full animate-pulse"}),(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsxs)("div",{className:"w-2/3 flex flex-col gap-6",children:[(0,b.jsx)(s.default,{height:240,borderRadius:12,className:"dark:bg-gray-700 w-full animate-pulse "}),(0,b.jsx)(s.default,{height:130,borderRadius:12,className:"dark:bg-gray-700 w-full animate-pulse "})]}),(0,b.jsx)("div",{className:"w-1/3",children:(0,b.jsx)(s.default,{height:330,borderRadius:12,className:"dark:bg-gray-700 w-full animate-pulse "})})]})]});if(!w)return(0,b.jsx)("div",{className:"ml-72 mt-14 p-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(j.IoDocumentText,{className:"w-20 h-20 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Quotation Not Found"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The quotation you're looking for doesn't exist or has been removed."}),(0,b.jsxs)("button",{onClick:()=>H.back(),className:"inline-flex items-center gap-2 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,b.jsx)(j.IoArrowBack,{className:"w-5 h-5"}),"Go Back"]})]})})});let V=new Date(w.valid)<new Date;return(0,b.jsxs)("div",{className:"ml-72 mt-14 p-6 min-h-screen",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:w.quoteId}),(0,b.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium ${P(w.quotationStatus)}`,children:[Q(w.quotationStatus),w.quotationStatus]}),V&&w.quotationStatus!==d.QuotationStatus.ACCEPTED&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",children:[(0,b.jsx)(j.IoTimeOutline,{className:"w-4 h-4"}),"Expired"]})]}),w.title&&(0,b.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:w.title})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)("button",{onClick:()=>U(w.id),disabled:w.quotationStatus===d.QuotationStatus.ACCEPTED||w.quotationStatus===d.QuotationStatus.DRAFT||w.quotationStatus===d.QuotationStatus.REJECTED||w.quotationStatus===d.QuotationStatus.EXPIRED||w.quotationStatus===d.QuotationStatus.DELETE,className:"inline-flex items-center gap-2 cursor-pointer px-4 disabled:cursor-not-allowed py-2 bg-green-600 disabled:bg-green-300 disabled:opacity-90  hover:bg-green-700 text-white rounded-lg transition-colors group",children:[(0,b.jsx)(k.FaRegPaperPlane,{className:"w-4 h-4 group-hover:rotate-22 "}),u?"Resending...":"Resend"]}),(0,b.jsxs)("button",{onClick:S,className:"inline-flex items-center gap-2 cursor-pointer px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,b.jsx)(j.IoDownloadOutline,{className:"w-4 h-4"}),"Download"]}),(0,b.jsxs)("button",{onClick:T,className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors cursor-pointer",children:[(0,b.jsx)(j.IoPrintOutline,{className:"w-4 h-4"}),"Print"]}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors cursor-pointer",children:(0,b.jsx)(j.IoEllipsisVertical,{className:"w-4 h-4"})}),(0,b.jsxs)("div",{className:"hidden group-hover:block absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-10",children:[I(d.PERMISSIONS.updateQuote)&&w.quotationStatus!==d.QuotationStatus.DELETE?(0,b.jsxs)(o.default,{href:`/quotations/update/${w.id}`,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,b.jsx)(j.IoCreateOutline,{className:"w-4 h-4"}),"Edit"]}):(0,b.jsxs)("span",{className:"flex items-center gap-2 px-4 py-2 text-gray-400 dark:text-gray-30 cursor-not-allowed transition-colors",children:[(0,b.jsx)(j.IoCreateOutline,{className:"w-4 h-4"})," Edit"]}),(0,b.jsxs)("button",{onClick:R,disabled:!I("quotation:delete")||w.quotationStatus===d.QuotationStatus.DELETE,className:"w-full flex items-center gap-2 px-4 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(j.IoTrashOutline,{className:"w-4 h-4"}),w.quotationStatus===d.QuotationStatus.DELETE?"Already Deleted":"Delete"]})]})]})]})]})})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-700 mb-5 rounded-xl border border-gray-200 dark:border-gray-700",children:(0,b.jsx)("div",{className:"flex gap-8 overflow-x-auto px-6 py-3.5",children:["overview","deal","timeline"].map(a=>(0,b.jsxs)("button",{onClick:()=>F(a),className:`pb-1.5 px-1 font-medium transition-colors cursor-pointer relative whitespace-nowrap ${E===a?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[a.charAt(0).toUpperCase()+a.slice(1),E===a&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]},a))})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2",children:["overview"===E&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-b-xl lg:rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[(0,b.jsx)(j.IoCashOutline,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),"Financial Summary"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Subtotal"}),(0,b.jsx)(j.IoPricetagOutline,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),(0,b.jsx)("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:(0,p.formatCurrency)(w.subTotal)})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Total Amount"}),(0,b.jsx)(j.IoCashOutline,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),(0,b.jsx)("p",{className:"text-3xl font-bold text-green-900 dark:text-green-100",children:(0,p.formatCurrency)(w.total)})]})]}),w.total!==w.subTotal&&(0,b.jsx)("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Tax/Adjustments"}),(0,b.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:(0,p.formatCurrency)(w.total-w.subTotal)})]})})]}),w.description&&(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,b.jsx)(j.IoDocumentText,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),"Description"]}),(0,b.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed",children:w.description})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[(0,b.jsx)(j.IoPersonOutline,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),"Customer Information"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-lg flex-shrink-0",children:w.customerName.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:w.customerName}),w.companyName&&(0,b.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1.5 mt-1",children:[(0,b.jsx)(j.IoBusinessOutline,{className:"w-4 h-4"}),w.companyName]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)(j.IoMailOutline,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 flex-shrink-0"}),(0,b.jsx)("div",{className:"min-w-0 flex-1",children:(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:(0,b.jsx)(q.MaskEmailField,{label:"email",value:w.customerEmail})})})]}),w.customerPhone&&(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)(j.IoCallOutline,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 flex-shrink-0"}),(0,b.jsx)("div",{className:"min-w-0 flex-1",children:(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:(0,b.jsx)(q.MaskPhoneField,{label:"phone",value:w.customerPhone})})})]})]})]})]})]}),"deal"===E&&(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-b-xl lg:rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[(0,b.jsx)(j.IoFunnelOutline,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),"Associated Deal"]}),w.deal?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between pb-6 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:w.deal.dealName}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Deal ID: ",w.deal.deal_id]})]}),(0,b.jsxs)(o.default,{href:`/deals/view/${w.deal.id}`,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-colors",children:["View Full Deal",(0,b.jsx)(j.IoArrowBack,{className:"w-4 h-4 rotate-180"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(j.IoCashOutline,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),(0,b.jsx)("span",{className:"text-sm font-medium text-purple-700 dark:text-purple-300",children:"Deal Amount"})]}),(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:(0,p.formatCurrency)(w.deal.amount)})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(j.IoTrendingUpOutline,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),(0,b.jsx)("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:"Stage"})]}),(0,b.jsx)("p",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100",children:w.deal.dealStage})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/20 dark:to-orange-800/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(l.MdCategory,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),(0,b.jsx)("span",{className:"text-sm font-medium text-orange-700 dark:text-orange-300",children:"Type"})]}),(0,b.jsx)("p",{className:"text-lg font-semibold text-orange-900 dark:text-orange-100",children:w.deal.dealType})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Pipeline"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:w.deal.dealPipeline})]}),null!==w.deal.dealProbability&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Win Probability"}),(0,b.jsxs)("p",{className:"font-semibold text-gray-900 dark:text-white",children:[w.deal.dealProbability,"%"]})]}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Created Date"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:N(w.deal.createDate)})]}),w.deal.closeDate&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Close Date"}),(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:N(w.deal.closeDate)})]})]}),w.deal.dealDescription&&(0,b.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Description"}),(0,b.jsx)("p",{className:"text-gray-900 dark:text-white leading-relaxed",children:w.deal.dealDescription})]}),w.deal.nextStep&&(0,b.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"Next Step"}),(0,b.jsx)("p",{className:"text-gray-900 dark:text-white",children:w.deal.nextStep})]})]}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(j.IoFunnelOutline,{className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"No deal associated with this quotation"})]})]}),"timeline"===E&&(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-b-xl lg:rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[(0,b.jsx)(l.MdTimeline,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),"Activity Timeline"]}),y&&y.length>0?(0,b.jsx)("div",{className:"space-y-4",children:y.map((a,c)=>{let e=c===y.length-1,f=(a=>{let c=a.toLowerCase();if(c.includes(d.QUOTATION_EVENT_TYPE.CREATED))return{icon:(0,b.jsx)(j.IoCheckmarkCircle,{className:"w-5 h-5"}),bgColor:"bg-green-100 dark:bg-green-900/30",textColor:"text-green-600 dark:text-green-400"};if(c.includes(d.QUOTATION_EVENT_TYPE.UPDATED))return{icon:(0,b.jsx)(j.IoCreateOutline,{className:"w-5 h-5"}),bgColor:"bg-blue-100 dark:bg-blue-900/30",textColor:"text-blue-600 dark:text-blue-400"};if(c.includes(d.QUOTATION_EVENT_TYPE.STATUS_CHANGED))return{icon:(0,b.jsx)(j.IoTimeOutline,{className:"w-5 h-5"}),bgColor:"bg-purple-100 dark:bg-purple-900/30",textColor:"text-purple-600 dark:text-purple-400"};if(c.includes(d.QUOTATION_EVENT_TYPE.EMAIL_SENT))return{icon:(0,b.jsx)(j.IoSendOutline,{className:"w-5 h-5"}),bgColor:"bg-indigo-100 dark:bg-indigo-900/30",textColor:"text-indigo-600 dark:text-indigo-400"};if(c.includes(d.QUOTATION_EVENT_TYPE.VIEWED))return{icon:(0,b.jsx)(j.IoInformationCircleOutline,{className:"w-5 h-5"}),bgColor:"bg-cyan-100 dark:bg-cyan-900/30",textColor:"text-cyan-600 dark:text-cyan-400"};else if(c.includes(d.QUOTATION_EVENT_TYPE.ACCEPTED))return{icon:(0,b.jsx)(j.IoCheckmarkCircle,{className:"w-5 h-5"}),bgColor:"bg-green-100 dark:bg-green-900/30",textColor:"text-green-600 dark:text-green-400"};else if(c.includes(d.QUOTATION_EVENT_TYPE.REJECTED))return{icon:(0,b.jsx)(j.IoCloseCircle,{className:"w-5 h-5"}),bgColor:"bg-red-100 dark:bg-red-900/30",textColor:"text-red-600 dark:text-red-400"};else if(c.includes(d.QUOTATION_EVENT_TYPE.DELETE))return{icon:(0,b.jsx)(l.MdDeleteOutline,{className:"w-5 h-5"}),bgColor:"bg-red-100 dark:bg-red-900/30",textColor:"text-red-600 dark:text-red-400"};return{icon:(0,b.jsx)(j.IoDocumentText,{className:"w-5 h-5"}),bgColor:"bg-gray-100 dark:bg-gray-700",textColor:"text-gray-600 dark:text-gray-400"}})(a.eventType);return(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-full ${f.bgColor} flex items-center justify-center ${f.textColor}`,children:f.icon}),!e&&(0,b.jsx)("div",{className:"w-0.5 flex-1 bg-gray-200 dark:bg-gray-700 mt-2 min-h-[2rem]"})]}),(0,b.jsxs)("div",{className:`flex-1 ${!e?"pb-6":""}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white capitalize",children:a.eventType.replace(/_/g," ")}),(0,b.jsx)("time",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap ml-2",children:O(a.createdAt)})]}),(a.previousStatus||a.newStatus)&&(0,b.jsx)("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm flex-wrap",children:[a.previousStatus&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${P(a.previousStatus)}`,children:a.previousStatus}),(0,b.jsx)("span",{className:"text-gray-400",children:"→"})]}),a.newStatus&&(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${P(a.newStatus)}`,children:a.newStatus})]})}),a.delta&&Object.keys(a.delta).length>0&&(0,b.jsx)("div",{className:"mt-2 space-y-2",children:Object.entries(a.delta).map(([a,c])=>(0,b.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-blue-900 dark:text-blue-100 mb-1 capitalize",children:a.replace(/([A-Z])/g," $1").trim()}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm flex-wrap",children:[(0,b.jsx)("span",{className:"text-gray-600 dark:text-gray-400 line-through",children:"number"==typeof c.old&&(a.toLowerCase().includes("total")||a.toLowerCase().includes("subtotal"))?(0,p.formatCurrency)(c.old):String(c.old||"N/A")}),(0,b.jsx)("span",{className:"text-gray-400",children:"→"}),(0,b.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:"number"==typeof c.new&&(a.toLowerCase().includes("total")||a.toLowerCase().includes("subtotal"))?(0,p.formatCurrency)(c.new):String(c.new||"N/A")})]})]},a))}),a.performedBy&&(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,b.jsx)("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-semibold",children:M(a.performedBy)}),(0,b.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["by ",L(a.performedBy)]})]})]})]},a.id)})}):(0,b.jsxs)("div",{className:"space-y-4",children:[C&&(0,b.jsx)("div",{className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800 mb-4",children:(0,b.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-300 text-center",children:[(0,b.jsx)(j.IoInformationCircleOutline,{className:"w-5 h-5 inline mr-2"}),"string"==typeof C?C:C[0]]})}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:(0,b.jsx)(j.IoCheckmarkCircle,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,b.jsx)("div",{className:"w-0.5 h-full bg-gray-200 dark:bg-gray-700 mt-2"})]}),(0,b.jsxs)("div",{className:"flex-1 pb-8",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Quotation Created"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:O(w.createdAt)}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-semibold",children:M(w.createdBy)}),(0,b.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["by ",L(w.createdBy)]})]})]})]}),w.updatedBy&&w.updatedAt!==w.createdAt&&(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:(0,b.jsx)(j.IoCreateOutline,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,b.jsx)("div",{className:"w-0.5 h-full bg-gray-200 dark:bg-gray-700 mt-2"})]}),(0,b.jsxs)("div",{className:"flex-1 pb-8",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Last Updated"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:O(w.updatedAt)}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-semibold",children:M(w.updatedBy)}),(0,b.jsxs)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:["by ",L(w.updatedBy)]})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"flex flex-col items-center",children:(0,b.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${w.quotationStatus===d.QuotationStatus.ACCEPTED?"bg-green-100 dark:bg-green-900/30":w.quotationStatus===d.QuotationStatus.REJECTED?"bg-red-100 dark:bg-red-900/30":"bg-gray-100 dark:bg-gray-700"}`,children:Q(w.quotationStatus)})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Current Status"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.quotationStatus})]})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,b.jsx)(j.IoInformationCircleOutline,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Details"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 flex items-center gap-1.5",children:[(0,b.jsx)(j.IoCalendarOutline,{className:"w-4 h-4"}),"Issue Date"]}),(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:N(w.issueDate)})]}),(0,b.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1 flex items-center gap-1.5",children:[(0,b.jsx)(j.IoTimeOutline,{className:"w-4 h-4"}),"Valid Until"]}),(0,b.jsx)("p",{className:`font-semibold ${V?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:N(w.valid)}),V&&(0,b.jsx)("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"This quotation has expired"})]}),(0,b.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Created"}),(0,b.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:N(w.createdAt)})]}),w.updatedAt&&(0,b.jsxs)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Last Updated"}),(0,b.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:N(w.updatedAt)})]})]})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Created By"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-lg shrink-0",children:M(w.createdBy)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white truncate",children:L(w.createdBy)}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:w.createdBy.email})]})]})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),(0,b.jsxs)("div",{className:"space-y-2",children:[I(d.PERMISSIONS.updateQuote)&&w.quotationStatus!==d.QuotationStatus.DELETE?(0,b.jsxs)(o.default,{href:`/quotations/update/${w.id}`,className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-700 dark:text-gray-300",children:[(0,b.jsx)(j.IoCreateOutline,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Edit Quotation"})]}):(0,b.jsxs)("span",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-50 dark:bg-gray-700/50   rounded-lg transition-colors text-gray-400 dark:text-gray-10 opacity-80 cursor-not-allowed",children:[(0,b.jsx)(j.IoCreateOutline,{className:"w-4 h-4"})," Edit"]}),(0,b.jsxs)("button",{onClick:T,className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-700 dark:text-gray-300",children:[(0,b.jsx)(j.IoPrintOutline,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Print Quotation"})]}),(0,b.jsx)("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:(0,b.jsxs)("button",{onClick:R,disabled:!I("quotation:delete")||w.quotationStatus===d.QuotationStatus.ACCEPTED||w.quotationStatus===d.QuotationStatus.DRAFT||w.quotationStatus===d.QuotationStatus.REJECTED||w.quotationStatus===d.QuotationStatus.EXPIRED||w.quotationStatus===d.QuotationStatus.DELETE,className:"w-full flex items-center gap-3 px-4 py-3 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors text-red-600 dark:text-red-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(j.IoTrashOutline,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"font-medium capitalize",children:w.quotationStatus===d.QuotationStatus.DELETE?"Already deleted":"Delete Quotation"})]})})]})]}),V&&w.quotationStatus!==d.QuotationStatus.ACCEPTED&&(0,b.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(j.IoTimeOutline,{className:"w-5 h-5 text-red-600 dark:text-red-400 shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-red-900 dark:text-red-100 mb-1",children:"Quotation Expired"}),(0,b.jsxs)("p",{className:"text-sm text-red-700 dark:text-red-300",children:["This quotation expired on ",N(w.valid),". Consider creating a new quotation or extending the validity period."]})]})]})})]})]})]})}],71518)}];

//# sourceMappingURL=src_app_%28dashboard%29_quotations_view_%5Bid%5D_page_tsx_d9e55f94._.js.map