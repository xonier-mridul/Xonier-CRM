{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/Xonier%20CRM/xonier-crm-frontend/src/app/utils/error.utils.tsx"],"sourcesContent":["const extractErrorMessages = (error: any): string[] => {\n  const data = error?.response?.data;\n\n  if (!data) return [\"Something went wrong\"];\n\n\n  if (Array.isArray(data.detail)) {\n    return data.detail.map((err: any) => err.msg || \"Invalid input\");\n  }\n\n\n  if (typeof data.detail === \"string\") {\n    return [data.detail];\n  }\n\n\n  if (typeof data.message === \"string\") {\n    return [data.message];\n  }\n\n  return [\"Unexpected error occurred\"];\n};\n\nexport default extractErrorMessages\n"],"names":[],"mappings":";;;;AAAA,MAAM,uBAAuB,CAAC;IAC5B,MAAM,OAAO,OAAO,UAAU;IAE9B,IAAI,CAAC,MAAM,OAAO;QAAC;KAAuB;IAG1C,IAAI,MAAM,OAAO,CAAC,KAAK,MAAM,GAAG;QAC9B,OAAO,KAAK,MAAM,CAAC,GAAG,CAAC,CAAC,MAAa,IAAI,GAAG,IAAI;IAClD;IAGA,IAAI,OAAO,KAAK,MAAM,KAAK,UAAU;QACnC,OAAO;YAAC,KAAK,MAAM;SAAC;IACtB;IAGA,IAAI,OAAO,KAAK,OAAO,KAAK,UAAU;QACpC,OAAO;YAAC,KAAK,OAAO;SAAC;IACvB;IAEA,OAAO;QAAC;KAA4B;AACtC;uCAEe"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/Xonier%20CRM/xonier-crm-frontend/src/services/role.service.ts"],"sourcesContent":["import { ParamValue } from \"next/dist/server/request/params\";\nimport api from \"../lib/axios\";\nimport { GetAllRolesPayload, UserRolePayload } from \"../types/roles/roles.types\";\n\n\nexport const RoleService = {\n    getRoles : (data: GetAllRolesPayload)=> api.get(`/user-role/all?${`page=${data.currentPage}`}&${`limit=${data.pageLimit}`}`),\n    getRolesWithoutPagination: ()=> api.get(\"/user-role/all/active/without-pagination\"),\n    getRoleById: (id: ParamValue)=> api.get(`/user-role/get-by-id/${id}`),\n    update: (id: ParamValue,payload:UserRolePayload)=>api.put(`/user-role/update/${id}`, payload),\n    create: (data: UserRolePayload)=> api.post(\"/user-role/create\", data),\n    delete: (userId: string)=> api.delete(`/user-role/delete/${userId}`)\n}"],"names":[],"mappings":";;;;AACA;;AAIO,MAAM,cAAc;IACvB,UAAW,CAAC,OAA4B,iIAAG,CAAC,GAAG,CAAC,CAAC,eAAe,EAAE,CAAC,KAAK,EAAE,KAAK,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,MAAM,EAAE,KAAK,SAAS,EAAE,EAAE;IAC3H,2BAA2B,IAAK,iIAAG,CAAC,GAAG,CAAC;IACxC,aAAa,CAAC,KAAkB,iIAAG,CAAC,GAAG,CAAC,CAAC,qBAAqB,EAAE,IAAI;IACpE,QAAQ,CAAC,IAAe,UAA0B,iIAAG,CAAC,GAAG,CAAC,CAAC,kBAAkB,EAAE,IAAI,EAAE;IACrF,QAAQ,CAAC,OAAyB,iIAAG,CAAC,IAAI,CAAC,qBAAqB;IAChE,QAAQ,CAAC,SAAkB,iIAAG,CAAC,MAAM,CAAC,CAAC,kBAAkB,EAAE,QAAQ;AACvE"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/Xonier%20CRM/xonier-crm-frontend/src/components/common/BlurryBackground.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { JSX, useEffect } from \"react\";\n\ninterface BlurryBackgroundProps {\n  onClick?: () => void;\n}\n\nconst BlurryBackground = ({ onClick }: BlurryBackgroundProps): JSX.Element => {\n  // Close on ESC key\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\" && onClick) {\n        onClick();\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleEsc);\n    return () => document.removeEventListener(\"keydown\", handleEsc);\n  }, [onClick]);\n\n  return (\n    <div\n      onClick={onClick}\n      className=\"\n        fixed inset-0 w-full h-full\n        bg-black/30 backdrop-blur-sm\n        z-[199]\n        cursor-pointer\n      \"\n      aria-hidden=\"true\"\n    />\n  );\n};\n\nexport default BlurryBackground;\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAQA,MAAM,mBAAmB,CAAC,EAAE,OAAO,EAAyB;;IAC1D,mBAAmB;IACnB,IAAA,0KAAS;sCAAC;YACR,MAAM;wDAAY,CAAC;oBACjB,IAAI,EAAE,GAAG,KAAK,YAAY,SAAS;wBACjC;oBACF;gBACF;;YAEA,SAAS,gBAAgB,CAAC,WAAW;YACrC;8CAAO,IAAM,SAAS,mBAAmB,CAAC,WAAW;;QACvD;qCAAG;QAAC;KAAQ;IAEZ,qBACE,6LAAC;QACC,SAAS;QACT,WAAU;QAMV,eAAY;;;;;;AAGlB;GAzBM;KAAA;uCA2BS"}},
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/Xonier%20CRM/xonier-crm-frontend/src/components/ui/FormButton.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { ImSpinner2 } from \"react-icons/im\";\n\ninterface FormButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  isLoading?: boolean;\n}\n\nconst FormButton: React.FC<FormButtonProps> = ({\n  children,\n  isLoading = false,\n  disabled,\n  className = \"\",\n  ...props\n}) => {\n  return (\n    <button\n      type=\"submit\"\n      disabled={isLoading || disabled}\n      className={`\n        w-full flex items-center justify-center gap-2\n        rounded-md px-4 py-2 font-medium\n        bg-blue-600 text-white\n        hover:bg-blue-700 hover:cursor-pointer\n        disabled:opacity-50 disabled:cursor-not-allowed\n        transition-colors duration-200\n        ${className}\n      `}\n      {...props}\n    >\n      {isLoading && (\n        <ImSpinner2 className=\"animate-spin text-lg\" />\n      )}\n      {children}\n    </button>\n  );\n};\n\nexport default FormButton;\n\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAUA,MAAM,aAAwC,CAAC,EAC7C,QAAQ,EACR,YAAY,KAAK,EACjB,QAAQ,EACR,YAAY,EAAE,EACd,GAAG,OACJ;IACC,qBACE,6LAAC;QACC,MAAK;QACL,UAAU,aAAa;QACvB,WAAW,CAAC;;;;;;;QAOV,EAAE,UAAU;MACd,CAAC;QACA,GAAG,KAAK;;YAER,2BACC,6LAAC,+JAAU;gBAAC,WAAU;;;;;;YAEvB;;;;;;;AAGP;KA5BM;uCA8BS"}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/Xonier%20CRM/xonier-crm-frontend/src/components/ui/Input.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport { FaEye, FaEyeSlash } from \"react-icons/fa\";\n\ninterface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement> {\n  label?: string;\n  error?: string;\n  \n}\n\nconst Input: React.FC<InputProps> = ({\n  label,\n  error,\n  type = \"text\",\n  className = \"\",\n  required = false,\n  ...props\n}) => {\n  const [showPassword, setShowPassword] = useState(false);\n\n  const isPassword = type === \"password\";\n  const isTextarea = type === \"textarea\";\n\n  const commonClasses = `\n    w-full px-3 py-2 rounded-md border\n    bg-white dark:bg-gray-700 text-black dark:text-white\n    border-gray-300 dark:border-gray-300/30\n    disabled:opacity-60 disabled:cursor-not-allowed\n    focus:outline-none focus:ring-2 focus:ring-violet-500\n    ${error ? \"border-red-500 focus:ring-red-500\" : \"\"}\n    ${className}\n  `;\n\n  return (\n    <div className=\"flex flex-col gap-1 w-full\">\n      {label && (\n        <label className=\"text-sm font-medium text-gray-700 dark:text-gray-200 capitalize\">\n          {required && <span className=\"text-red-500 text-xl\">*</span>} {label}\n        </label>\n      )}\n\n      <div className=\"relative\">\n        {isTextarea ? (\n          <textarea\n            required={required}\n            className={`${commonClasses} resize-none`}\n            rows={5}\n            {...(props as React.TextareaHTMLAttributes<HTMLTextAreaElement>)}\n          />\n        ) : (\n          <input\n            type={isPassword && showPassword ? \"text\" : type}\n            required={required}\n            className={commonClasses}\n            \n            {...(props as React.InputHTMLAttributes<HTMLInputElement>)}\n          />\n        )}\n\n        {isPassword && (\n          <button\n            type=\"button\"\n            onClick={() => setShowPassword(prev => !prev)}\n            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-blue-500\"\n          >\n            {showPassword ? <FaEyeSlash /> : <FaEye />}\n          </button>\n        )}\n      </div>\n\n      {error && <span className=\"text-sm text-red-500\">{error}</span>}\n    </div>\n  );\n};\n\nexport default Input;\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAYA,MAAM,QAA8B,CAAC,EACnC,KAAK,EACL,KAAK,EACL,OAAO,MAAM,EACb,YAAY,EAAE,EACd,WAAW,KAAK,EAChB,GAAG,OACJ;;IACC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,MAAM,aAAa,SAAS;IAC5B,MAAM,aAAa,SAAS;IAE5B,MAAM,gBAAgB,CAAC;;;;;;IAMrB,EAAE,QAAQ,sCAAsC,GAAG;IACnD,EAAE,UAAU;EACd,CAAC;IAED,qBACE,6LAAC;QAAI,WAAU;;YACZ,uBACC,6LAAC;gBAAM,WAAU;;oBACd,0BAAY,6LAAC;wBAAK,WAAU;kCAAuB;;;;;;oBAAS;oBAAE;;;;;;;0BAInE,6LAAC;gBAAI,WAAU;;oBACZ,2BACC,6LAAC;wBACC,UAAU;wBACV,WAAW,GAAG,cAAc,YAAY,CAAC;wBACzC,MAAM;wBACL,GAAI,KAAK;;;;;iFAGZ,6LAAC;wBACC,MAAM,cAAc,eAAe,SAAS;wBAC5C,UAAU;wBACV,WAAW;wBAEV,GAAI,KAAK;;;;;;oBAIb,4BACC,6LAAC;wBACC,MAAK;wBACL,SAAS,IAAM,gBAAgB,CAAA,OAAQ,CAAC;wBACxC,WAAU;kCAET,6BAAe,6LAAC,+JAAU;;;;qFAAM,6LAAC,0JAAK;;;;;;;;;;;;;;;;YAK5C,uBAAS,6LAAC;gBAAK,WAAU;0BAAwB;;;;;;;;;;;;AAGxD;GA/DM;KAAA;uCAiES"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/Xonier%20CRM/xonier-crm-frontend/src/components/pages/roles/UserRolesTable.tsx"],"sourcesContent":["import { RoleTableProps } from \"@/src/types/roles/roles.types\";\nimport React from \"react\";\nimport { MdOutlineEdit, MdDeleteOutline } from \"react-icons/md\";\nimport { FaPlus, FaXmark } from \"react-icons/fa6\";\nimport BlurryBackground from \"../../common/BlurryBackground\";\nimport FormButton from \"../../ui/FormButton\";\nimport Input from \"../../ui/Input\";\nimport { PERMISSIONS } from \"@/src/constants/enum\";\nimport { SUPER_ADMIN_ROLE_CODE } from \"@/src/constants/constants\";\nimport Skeleton from \"react-loading-skeleton\";\nimport Link from \"next/link\";\n\n\n\nconst UserRolesTable = ({\n  roleData,\n  handleDelete,\n  isLoading,\n  permissionData,\n  isPopupShow,\n  setIsPopupShow,\n  formData,\n  setFormData,\n  handleSubmit,\n  hasPermissions, \n  isAdmin\n}: RoleTableProps) => {\n  \n  const addPermission = (permissionId: string) => {\n    if (formData.permissions.includes(permissionId)) return;\n\n    \n\n    setFormData((prev) => ({\n      ...prev,\n      permissions: [...prev.permissions, permissionId],\n    }));\n  };\n\n  const removePermission = (permissionId: string) => {\n    setFormData((prev) => ({\n      ...prev,\n      permissions: prev.permissions.filter((id) => id !== permissionId),\n    }));\n  };\n\n  const isSelected = (permissionId: string) =>\n    formData.permissions.includes(permissionId);\n\n  return (\n    <>\n      {isPopupShow && (\n        <>\n          <BlurryBackground onClick={() => setIsPopupShow(false)} />\n\n          <div\n            className=\"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 \n            bg-white dark:bg-gray-700 p-6 rounded-xl w-[650px] z-[200]\n            flex flex-col gap-5 shadow-xl\"\n          >\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-xl font-bold dark:text-white\">Create Role</h2>\n              <button onClick={() => setIsPopupShow(false)}>\n                <FaXmark className=\"text-xl text-gray-500 hover:text-red-500 cursor-pointer hover:rotate-90 transition-all duration-300\" />\n              </button>\n            </div>\n\n            <Input\n              label=\"Role name\"\n              name=\"name\"\n              placeholder=\"e.g. Sales Manager\"\n              value={formData.name}\n              onChange={(e) =>\n                setFormData((prev) => ({ ...prev, name: e.target.value }))\n              }\n              required\n            />\n\n            {formData.permissions.length > 0 && (\n              <div className=\"flex flex-col gap-2\">\n                <span className=\"text-sm text-gray-500\">\n                  Selected permissions ({formData.permissions.length})\n                </span>\n\n                <div className=\"flex flex-wrap gap-2\">\n                  {formData.permissions.map((id) => {\n                    const perm = permissionData?.find((p) => p.id === id);\n                    if (!perm) return null;\n\n                    return (\n                      <span\n                        key={id}\n                        className=\"bg-blue-100 dark:bg-blue-900/40\n              text-blue-700 dark:text-blue-300\n              px-3 py-1 rounded-full text-sm\n              flex items-center gap-2 capitalize\"\n                      >\n                        {perm.title}\n                        <button\n                          onClick={() => removePermission(id)}\n                          className=\"hover:text-red-500\"\n                        >\n                          <FaXmark />\n                        </button>\n                      </span>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex flex-col gap-2\">\n              <span className=\"text-sm text-gray-500\">\n                Available permissions\n              </span>\n\n              <div className=\"max-h-64 overflow-y-auto border rounded-md p-2\">\n                {permissionData?.map((permission) => {\n                  const selected = isSelected(permission.id);\n\n                  return (\n                    <button\n                      key={permission.id}\n                      type=\"button\"\n                      disabled={selected}\n                      onClick={() => addPermission(permission.id)}\n                      className={`\n          w-full text-left px-3 py-2 rounded-md mb-1 transition\n          ${\n            selected\n              ? \"bg-blue-200 dark:bg-blue-900/50 cursor-not-allowed\"\n              : \"hover:bg-blue-100 dark:hover:bg-gray-600\"\n          }\n        `}\n                    >\n                      <div className=\"font-medium capitalize flex justify-between\">\n                        {permission.title}\n                        {selected && (\n                          <span className=\"text-xs text-blue-700 dark:text-blue-300\">\n                            selected\n                          </span>\n                        )}\n                      </div>\n                      <div className=\"text-xs text-gray-500\">\n                        {permission.module} Â· {permission.action}\n                      </div>\n                    </button>\n                  );\n                })}\n              </div>\n            </div>\n\n\n            <div className=\"flex justify-end gap-3 pt-2\">\n              <button\n                onClick={() => setIsPopupShow(false)}\n                className=\"px-4 py-2 rounded-md border hover:bg-gray-100 dark:hover:bg-gray-600\"\n              >\n                Cancel\n              </button>\n\n              <FormButton isLoading={isLoading} onClick={handleSubmit} disabled={formData.name === \"\" || formData.permissions.length <= 0}>\n                Create Role\n              </FormButton>\n            </div>\n          </div>\n        </>\n      )}\n\n      <div className=\"bg-white dark:bg-gray-700 p-6 rounded-xl\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h2 className=\"text-xl font-bold dark:text-white\">User Roles</h2>\n\n          <button\n            onClick={() => setIsPopupShow(true)}\n            className=\"bg-blue-600 hover:bg-blue-700\n              text-white px-5 py-2 rounded-md\n              flex items-center gap-2 disabled:cursor-not-allowed disabled:bg-blue-300\" \n              disabled={!hasPermissions(PERMISSIONS.createRole)}\n          >\n            <FaPlus /> Create Role\n          </button>\n        </div>\n\n        <table className=\"w-full\">\n          <thead>\n            <tr className=\"border-b text-sm text-gray-500\">\n              <th className=\"p-4 text-left\">Role</th>\n              <th className=\"p-4 text-left\">Permissions</th>\n              <th className=\"p-4 text-left\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {!isLoading ? (\n              roleData && roleData.length > 0 ? (\n                roleData?.map((role) => (\n                  <tr\n                    key={role.id}\n                    className=\"border-b border-gray-200 dark:border-gray-700\"\n                  >\n                    <td className=\"p-4 \">\n                      <div className=\"flex flex-col gap-1 font-medium \">\n                        <h3 className=\"capitalize\">{role.name}</h3>\n                        <span className=\"text-xs text-gray-500 capitalize\">\n                          {role.code === SUPER_ADMIN_ROLE_CODE ? \"All\" : role.permissions.length} permissions\n                        </span>\n                      </div>{\" \"}\n                    </td>\n                    <td className=\"p-4 flex items-center flex-wrap gap-3\">\n                      {role.permissions && ( (role.code === SUPER_ADMIN_ROLE_CODE) ? <span className=\"bg-green-50 px-3 py-1 text-green-600 rounded-md text-sm capitalize\">\n                            All permissions\n                          </span> :\n                        role.permissions.map((item, i) => (\n                          <span key={i} className=\"bg-green-50 px-3 py-1 text-green-600 rounded-md text-sm capitalize\">\n                            {item.title}\n                          </span>\n                        )))}\n                    </td>\n                    <td className=\"\">\n                      <div className=\"flex items-center gap-3\">\n                        {(hasPermissions(PERMISSIONS.updateRole) && (role.code !== SUPER_ADMIN_ROLE_CODE)) ? <Link href={`/roles/update/${role.id}`} className=\"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-yellow-200/80 dark:bg-yellow-100 hover:bg-yellow-300/70 dark:hover:bg-yellow-200 disabled:cursor-not-allowed disabled:bg-yellow-50  text-yellow-500 hover:scale-104\" >\n                          <MdOutlineEdit className=\"text-xl\" />\n                        </Link> : <span className=\"h-9 w-9 flex items-center justify-center rounded-md  bg-yellow-100/80 dark:bg-yellow-100   cursor-not-allowed   text-yellow-400\">\n                           <MdOutlineEdit className=\"text-xl\" />\n                          </span>}\n                        {role.code !== SUPER_ADMIN_ROLE_CODE ?\n                          <button\n                            onClick={() => handleDelete(role.id)}\n                            className=\"h-9 w-9 flex items-center justify-center rounded-md cursor-pointer bg-red-100 text-red-500 hover:bg-red-200 disabled:hover:bg-red-100 disabled:cursor-not-allowed hover:scale-104 disabled:scale-100\" disabled={(!hasPermissions(PERMISSIONS.deleteRole))}\n                          >\n                            {\" \"}\n                            <MdDeleteOutline className=\"text-xl\" />{\" \"}\n                          </button> : <span className=\"h-9 w-9 flex items-center justify-center rounded-md  bg-red-100 text-red-400  cursor-not-allowed \">\n                            <MdDeleteOutline className=\"text-xl\" />\n                          </span>\n                        }\n                      </div>\n                    </td>\n                  </tr>\n                ))\n              ) : (\n                <tr>\n                  <td colSpan={3} className=\"p-4 text-center\">\n                    Not found\n                  </td>\n                </tr>\n              )\n            ) : (\n              <tr className=\"animate-pulse\">\n                <td  className=\"p-4\">\n                  <div className=\"flex flex-col gap-1\">\n                  <Skeleton height={25} width={130} borderRadius={14} />\n                  <Skeleton height={14} width={70} borderRadius={10} />\n                  </div>\n                </td>\n                <td  className=\"p-4 \">\n                  <div className=\"flex items-center gap-2\">\n                  <Skeleton height={30} width={120} borderRadius={14} />\n                  <Skeleton height={30} width={120} borderRadius={14} />\n                  <Skeleton height={30} width={120} borderRadius={14} />\n                  <Skeleton height={30} width={120} borderRadius={14} />\n                  </div>\n                </td>\n                <td  className=\"p-4 \">\n                  <div className=\"flex items-center gap-2\">\n                  <Skeleton height={35} width={35} borderRadius={10} />\n                  <Skeleton height={35} width={35} borderRadius={10} />\n                  </div>\n                  \n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </>\n  );\n};\n\nexport default UserRolesTable;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAIA,MAAM,iBAAiB,CAAC,EACtB,QAAQ,EACR,YAAY,EACZ,SAAS,EACT,cAAc,EACd,WAAW,EACX,cAAc,EACd,QAAQ,EACR,WAAW,EACX,YAAY,EACZ,cAAc,EACd,OAAO,EACQ;IAEf,MAAM,gBAAgB,CAAC;QACrB,IAAI,SAAS,WAAW,CAAC,QAAQ,CAAC,eAAe;QAIjD,YAAY,CAAC,OAAS,CAAC;gBACrB,GAAG,IAAI;gBACP,aAAa;uBAAI,KAAK,WAAW;oBAAE;iBAAa;YAClD,CAAC;IACH;IAEA,MAAM,mBAAmB,CAAC;QACxB,YAAY,CAAC,OAAS,CAAC;gBACrB,GAAG,IAAI;gBACP,aAAa,KAAK,WAAW,CAAC,MAAM,CAAC,CAAC,KAAO,OAAO;YACtD,CAAC;IACH;IAEA,MAAM,aAAa,CAAC,eAClB,SAAS,WAAW,CAAC,QAAQ,CAAC;IAEhC,qBACE;;YACG,6BACC;;kCACE,6LAAC,8JAAgB;wBAAC,SAAS,IAAM,eAAe;;;;;;kCAEhD,6LAAC;wBACC,WAAU;;0CAIV,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDAAoC;;;;;;kDAClD,6LAAC;wCAAO,SAAS,IAAM,eAAe;kDACpC,cAAA,6LAAC,6JAAO;4CAAC,WAAU;;;;;;;;;;;;;;;;;0CAIvB,6LAAC,+IAAK;gCACJ,OAAM;gCACN,MAAK;gCACL,aAAY;gCACZ,OAAO,SAAS,IAAI;gCACpB,UAAU,CAAC,IACT,YAAY,CAAC,OAAS,CAAC;4CAAE,GAAG,IAAI;4CAAE,MAAM,EAAE,MAAM,CAAC,KAAK;wCAAC,CAAC;gCAE1D,QAAQ;;;;;;4BAGT,SAAS,WAAW,CAAC,MAAM,GAAG,mBAC7B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;;4CAAwB;4CACf,SAAS,WAAW,CAAC,MAAM;4CAAC;;;;;;;kDAGrD,6LAAC;wCAAI,WAAU;kDACZ,SAAS,WAAW,CAAC,GAAG,CAAC,CAAC;4CACzB,MAAM,OAAO,gBAAgB,KAAK,CAAC,IAAM,EAAE,EAAE,KAAK;4CAClD,IAAI,CAAC,MAAM,OAAO;4CAElB,qBACE,6LAAC;gDAEC,WAAU;;oDAKT,KAAK,KAAK;kEACX,6LAAC;wDACC,SAAS,IAAM,iBAAiB;wDAChC,WAAU;kEAEV,cAAA,6LAAC,6JAAO;;;;;;;;;;;+CAXL;;;;;wCAeX;;;;;;;;;;;;0CAKN,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDAAwB;;;;;;kDAIxC,6LAAC;wCAAI,WAAU;kDACZ,gBAAgB,IAAI,CAAC;4CACpB,MAAM,WAAW,WAAW,WAAW,EAAE;4CAEzC,qBACE,6LAAC;gDAEC,MAAK;gDACL,UAAU;gDACV,SAAS,IAAM,cAAc,WAAW,EAAE;gDAC1C,WAAW,CAAC;;UAExB,EACE,WACI,uDACA,2CACL;QACH,CAAC;;kEAEa,6LAAC;wDAAI,WAAU;;4DACZ,WAAW,KAAK;4DAChB,0BACC,6LAAC;gEAAK,WAAU;0EAA2C;;;;;;;;;;;;kEAK/D,6LAAC;wDAAI,WAAU;;4DACZ,WAAW,MAAM;4DAAC;4DAAI,WAAW,MAAM;;;;;;;;+CAtBrC,WAAW,EAAE;;;;;wCA0BxB;;;;;;;;;;;;0CAKJ,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,SAAS,IAAM,eAAe;wCAC9B,WAAU;kDACX;;;;;;kDAID,6LAAC,oJAAU;wCAAC,WAAW;wCAAW,SAAS;wCAAc,UAAU,SAAS,IAAI,KAAK,MAAM,SAAS,WAAW,CAAC,MAAM,IAAI;kDAAG;;;;;;;;;;;;;;;;;;;;0BAQrI,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAElD,6LAAC;gCACC,SAAS,IAAM,eAAe;gCAC9B,WAAU;gCAGR,UAAU,CAAC,eAAe,0IAAW,CAAC,UAAU;;kDAElD,6LAAC,4JAAM;;;;;oCAAG;;;;;;;;;;;;;kCAId,6LAAC;wBAAM,WAAU;;0CACf,6LAAC;0CACC,cAAA,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC;4CAAG,WAAU;sDAAgB;;;;;;sDAC9B,6LAAC;4CAAG,WAAU;sDAAgB;;;;;;sDAC9B,6LAAC;4CAAG,WAAU;sDAAgB;;;;;;;;;;;;;;;;;0CAGlC,6LAAC;0CACE,CAAC,YACA,YAAY,SAAS,MAAM,GAAG,IAC5B,UAAU,IAAI,CAAC,qBACb,6LAAC;wCAEC,WAAU;;0DAEV,6LAAC;gDAAG,WAAU;;kEACZ,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAG,WAAU;0EAAc,KAAK,IAAI;;;;;;0EACrC,6LAAC;gEAAK,WAAU;;oEACb,KAAK,IAAI,KAAK,yJAAqB,GAAG,QAAQ,KAAK,WAAW,CAAC,MAAM;oEAAC;;;;;;;;;;;;;oDAEpE;;;;;;;0DAET,6LAAC;gDAAG,WAAU;0DACX,KAAK,WAAW,IAAI,CAAE,AAAC,KAAK,IAAI,KAAK,yJAAqB,iBAAI,6LAAC;oDAAK,WAAU;8DAAqE;;;;;+FAGlJ,KAAK,WAAW,CAAC,GAAG,CAAC,CAAC,MAAM,kBAC1B,6LAAC;wDAAa,WAAU;kEACrB,KAAK,KAAK;uDADF;;;;iGAGX;;;;;;0DAEN,6LAAC;gDAAG,WAAU;0DACZ,cAAA,6LAAC;oDAAI,WAAU;;wDACX,eAAe,0IAAW,CAAC,UAAU,KAAM,KAAK,IAAI,KAAK,yJAAqB,iBAAK,6LAAC,0KAAI;4DAAC,MAAM,CAAC,cAAc,EAAE,KAAK,EAAE,EAAE;4DAAE,WAAU;sEACrI,cAAA,6LAAC,kKAAa;gEAAC,WAAU;;;;;;;;;;qHACjB,6LAAC;4DAAK,WAAU;sEACvB,cAAA,6LAAC,kKAAa;gEAAC,WAAU;;;;;;;;;;;wDAE3B,KAAK,IAAI,KAAK,yJAAqB,iBAClC,6LAAC;4DACC,SAAS,IAAM,aAAa,KAAK,EAAE;4DACnC,WAAU;4DAAuM,UAAW,CAAC,eAAe,0IAAW,CAAC,UAAU;;gEAEjQ;8EACD,6LAAC,oKAAe;oEAAC,WAAU;;;;;;gEAAa;;;;;;qHAC9B,6LAAC;4DAAK,WAAU;sEAC1B,cAAA,6LAAC,oKAAe;gEAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;uCApC9B,KAAK,EAAE;;;;kGA4ChB,6LAAC;8CACC,cAAA,6LAAC;wCAAG,SAAS;wCAAG,WAAU;kDAAkB;;;;;;;;;;6FAMhD,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC;gDAAI,WAAU;;kEACf,6LAAC,2KAAQ;wDAAC,QAAQ;wDAAI,OAAO;wDAAK,cAAc;;;;;;kEAChD,6LAAC,2KAAQ;wDAAC,QAAQ;wDAAI,OAAO;wDAAI,cAAc;;;;;;;;;;;;;;;;;sDAGjD,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC;gDAAI,WAAU;;kEACf,6LAAC,2KAAQ;wDAAC,QAAQ;wDAAI,OAAO;wDAAK,cAAc;;;;;;kEAChD,6LAAC,2KAAQ;wDAAC,QAAQ;wDAAI,OAAO;wDAAK,cAAc;;;;;;kEAChD,6LAAC,2KAAQ;wDAAC,QAAQ;wDAAI,OAAO;wDAAK,cAAc;;;;;;kEAChD,6LAAC,2KAAQ;wDAAC,QAAQ;wDAAI,OAAO;wDAAK,cAAc;;;;;;;;;;;;;;;;;sDAGlD,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC;gDAAI,WAAU;;kEACf,6LAAC,2KAAQ;wDAAC,QAAQ;wDAAI,OAAO;wDAAI,cAAc;;;;;;kEAC/C,6LAAC,2KAAQ;wDAAC,QAAQ;wDAAI,OAAO;wDAAI,cAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWjE;KAvQM;uCAyQS"}},
    {"offset": {"line": 946, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/Xonier%20CRM/xonier-crm-frontend/src/services/permission.service.ts"],"sourcesContent":["import api from \"../lib/axios\";\n\n\n\nexport const PermissionsService = {\n    getAll: ()=> api.get(\"/permission/all\")\n}"],"names":[],"mappings":";;;;AAAA;;AAIO,MAAM,qBAAqB;IAC9B,QAAQ,IAAK,iIAAG,CAAC,GAAG,CAAC;AACzB"}},
    {"offset": {"line": 962, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/Xonier%20CRM/xonier-crm-frontend/src/app/%28dashboard%29/roles/page.tsx"],"sourcesContent":["\"use client\";\nimport { MARGIN_TOP, SIDEBAR_WIDTH, SUPER_ADMIN_ROLE_CODE } from \"@/src/constants/constants\";\n\nimport React, { JSX, useState, useEffect } from \"react\";\nimport extractErrorMessages from \"../../utils/error.utils\";\nimport { toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport { RoleService } from \"@/src/services/role.service\";\nimport UserRolesTable from \"@/src/components/pages/roles/UserRolesTable\";\nimport { PermissionsService } from \"@/src/services/permission.service\";\nimport { Permissions, UserRolePayload } from \"@/src/types/roles/roles.types\";\nimport { usePermissions } from \"@/src/hooks/usePermissions\";\nimport { UserRole } from \"@/src/types\";\nimport ConfirmPopup from \"@/src/components/ui/ConfirmPopup\";\nimport { useSelector, UseSelector } from \"react-redux\";\nimport { RootState } from \"@/src/store\";\n\n\n\nconst page = (): JSX.Element => {\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  const [isPopupShow, setIsPopShow] = useState<boolean>(false);\n  const [pageLimit, setPageLimit] = useState<number>(10);\n  const [err, setErr] = useState<string | string[] | null>(null);\n \n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [roleData, setRoleData] = useState<UserRole[]>([]);\n\n  const [permissionData, setPermissionData] =\n    useState<Array<Permissions> | null>(null);\n  const [formData, setFormData] = useState<UserRolePayload>({\n    name: \"\",\n    permissions: [],\n  });\n\n  const auth = useSelector((state: RootState)=>state.auth)\n\n\n\n \n\n  const {hasPermission} = usePermissions()\n\n  const getAllRoles = async () => {\n    setErr(null);\n    setIsLoading(true);\n    try {\n      const result = await RoleService.getRoles({\n        currentPage: currentPage,\n        pageLimit: pageLimit,\n      });\n      if (result.status === 200) {\n        const data = result.data.data;\n        \n        setRoleData(data.data);\n        setCurrentPage(Number(data.page));\n        setPageLimit(Number(data.limit));\n      }\n    } catch (error) {\n      process.env.NEXT_PUBLIC_ENV === \"development\" && console.error(error);\n      if (axios.isAxiosError(error)) {\n        const messages = extractErrorMessages(error);\n        setErr(messages);\n        toast.error(`${messages}`);\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const getAllPermissions = async () => {\n    try {\n      const result = await PermissionsService.getAll();\n      if (result.status === 200) {\n        setPermissionData(result.data.data);\n      }\n    } catch (error) {\n      process.env.NEXT_PUBLIC_ENV === \"development\" && console.error(error);\n      if (axios.isAxiosError(error)) {\n        const messages = extractErrorMessages(error);\n        setErr(messages);\n        toast.error(`${messages}`);\n      }\n    }\n  };\n\n  const handleDelete = async (id: string): Promise<void> => {\n    setErr(\"\");\n    setLoading(true)\n    try {\n      const confirm =await ConfirmPopup({title: \"Are you sure for delete\", text:\"Are you sure to delete this User role\", btnTxt: \"Yes, Delete\"})\n\n      if(confirm){\n         const result = await RoleService.delete(id)\n         if(result.status === 200){\n          toast.success(\"Role deleted successfully\")\n          await getAllRoles()\n         }\n      }\n    } catch (error) {\n      process.env.NEXT_PUBLIC_ENV === \"development\" && console.error(error);\n      if (axios.isAxiosError(error)) {\n        const messages = extractErrorMessages(error);\n        setErr(messages);\n        toast.error(`${messages}`);\n      }\n    } finally {\n      setLoading(false)\n    }\n  };\n\n  const handleSubmit = async (): Promise<void> => {\n    setIsLoading(true);\n    setErr(null);\n    try {\n      const result = await RoleService.create(formData);\n      if (result.status === 200) {\n        await getAllRoles();\n        setFormData({\n          name: \"\",\n          permissions: [],\n        });\n        toast.success(\"Roles created successfully\");\n        setIsPopShow(false);\n       \n      }\n    } catch (error) {\n      process.env.NEXT_PUBLIC_ENV === \"development\" && console.error(error);\n      if (axios.isAxiosError(error)) {\n        const messages = extractErrorMessages(error);\n        setErr(messages);\n        toast.error(`${messages}`);\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getAllRoles();\n  }, []);\n\n  useEffect(() => {\n    getAllPermissions();\n    \n  }, []);\n\n  const isAdmin =\n  auth.user?.userRole?.some(\n    (role) => role.code === SUPER_ADMIN_ROLE_CODE\n  ) ?? false;\n  \n\n  return (\n    <div className={`ml-72 mt-14 p-6`}>\n      <UserRolesTable\n        roleData={roleData}\n        permissionData={permissionData}\n        currentPage={currentPage}\n        pageLimit={pageLimit}\n        handleDelete={handleDelete}\n        isLoading={isLoading}\n        isPopupShow={isPopupShow}\n        setIsPopupShow={setIsPopShow}\n        formData={formData}\n        setFormData={setFormData}\n        handleSubmit={handleSubmit}\n        hasPermissions={hasPermission}\n        isAdmin={isAdmin}\n      />\n    </div>\n  );\n};\n\nexport default page;\n"],"names":[],"mappings":"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"}}]
}