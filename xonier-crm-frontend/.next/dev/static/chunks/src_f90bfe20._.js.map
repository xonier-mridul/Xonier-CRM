{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/Xonier%20CRM/xonier-crm-frontend/src/components/ui/FormButton.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { ImSpinner2 } from \"react-icons/im\";\n\ninterface FormButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  isLoading?: boolean;\n}\n\nconst FormButton: React.FC<FormButtonProps> = ({\n  children,\n  isLoading = false,\n  disabled,\n  className = \"\",\n  ...props\n}) => {\n  return (\n    <button\n      type=\"submit\"\n      disabled={isLoading || disabled}\n      className={`\n        w-full flex items-center justify-center gap-2\n        rounded-md px-4 py-2 font-medium\n        bg-blue-600 text-white\n        hover:bg-blue-700 hover:cursor-pointer\n        disabled:opacity-50 disabled:cursor-not-allowed\n        transition-colors duration-200\n        ${className}\n      `}\n      {...props}\n    >\n      {isLoading && (\n        <ImSpinner2 className=\"animate-spin text-lg\" />\n      )}\n      {children}\n    </button>\n  );\n};\n\nexport default FormButton;\n\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAUA,MAAM,aAAwC,CAAC,EAC7C,QAAQ,EACR,YAAY,KAAK,EACjB,QAAQ,EACR,YAAY,EAAE,EACd,GAAG,OACJ;IACC,qBACE,6LAAC;QACC,MAAK;QACL,UAAU,aAAa;QACvB,WAAW,CAAC;;;;;;;QAOV,EAAE,UAAU;MACd,CAAC;QACA,GAAG,KAAK;;YAER,2BACC,6LAAC,+JAAU;gBAAC,WAAU;;;;;;YAEvB;;;;;;;AAGP;KA5BM;uCA8BS"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/Xonier%20CRM/xonier-crm-frontend/src/app/utils/error.utils.tsx"],"sourcesContent":["const extractErrorMessages = (error: any): string[] => {\n  const data = error?.response?.data;\n\n  if (!data) return [\"Something went wrong\"];\n\n\n  if (Array.isArray(data.detail)) {\n    return data.detail.map((err: any) => err.msg || \"Invalid input\");\n  }\n\n\n  if (typeof data.detail === \"string\") {\n    return [data.detail];\n  }\n\n\n  if (typeof data.message === \"string\") {\n    return [data.message];\n  }\n\n  return [\"Unexpected error occurred\"];\n};\n\nexport default extractErrorMessages\n"],"names":[],"mappings":";;;;AAAA,MAAM,uBAAuB,CAAC;IAC5B,MAAM,OAAO,OAAO,UAAU;IAE9B,IAAI,CAAC,MAAM,OAAO;QAAC;KAAuB;IAG1C,IAAI,MAAM,OAAO,CAAC,KAAK,MAAM,GAAG;QAC9B,OAAO,KAAK,MAAM,CAAC,GAAG,CAAC,CAAC,MAAa,IAAI,GAAG,IAAI;IAClD;IAGA,IAAI,OAAO,KAAK,MAAM,KAAK,UAAU;QACnC,OAAO;YAAC,KAAK,MAAM;SAAC;IACtB;IAGA,IAAI,OAAO,KAAK,OAAO,KAAK,UAAU;QACpC,OAAO;YAAC,KAAK,OAAO;SAAC;IACvB;IAEA,OAAO;QAAC;KAA4B;AACtC;uCAEe"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/Xonier%20CRM/xonier-crm-frontend/src/app/%28auth%29/login/verify-otp/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { FormEvent, useEffect, useRef, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { IoChevronBack } from \"react-icons/io5\";\nimport { useDispatch, UseDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch } from \"@/src/store\";\nimport FormButton from \"@/src/components/ui/FormButton\";\nimport { AuthService } from \"@/src/services/auth.service\";\nimport { ResendLoginOtpPayload, VerifyLoginOtpPayload } from \"@/src/types\";\nimport { login, logout } from \"@/src/store/slices/authSlice\";\n\nimport extractErrorMessages from \"@/src/app/utils/error.utils\";\n\nconst OTP_LENGTH = 6;\nconst OTP_TIMER = 60;\n\nconst page = () => {\n  const router = useRouter();\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [resendLoading, setResetLoading] = useState(false);\n  const [errors, setErrors] = useState<string[]>([]);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [otp, setOtp] = useState<string>(\"\");\n  const [timeLeft, setTimeLeft] = useState<number>(OTP_TIMER);\n\n  const inputRefs = useRef<(HTMLInputElement | null)[]>([]);\n\n  useEffect(() => {\n    const userEmail = sessionStorage.getItem(\"loginMail\");\n    const userPassword = sessionStorage.getItem(\"loginPassword\");\n    if (userEmail) setEmail(userEmail);\n    if (userPassword) setPassword(userPassword);\n  }, []);\n\n  useEffect(() => {\n    if (timeLeft === 0) return;\n\n    const timer = setInterval(() => {\n      setTimeLeft((prev) => {\n        if (prev <= 1) {\n          clearInterval(timer);\n          return 0;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, [timeLeft]);\n\n  const dispatch = useDispatch<AppDispatch>()\n\n  const handleOtpChange = (index: number, value: string) => {\n    if (!/^\\d?$/.test(value)) return;\n\n    const otpArray = otp.split(\"\");\n    otpArray[index] = value;\n\n    const newOtp = otpArray.join(\"\").slice(0, OTP_LENGTH);\n    setOtp(newOtp);\n\n    if (value && index < OTP_LENGTH - 1) {\n      inputRefs.current[index + 1]?.focus();\n    }\n  };\n\n  const handleKeyDown = (\n    index: number,\n    e: React.KeyboardEvent<HTMLInputElement>\n  ) => {\n    if (e.key === \"Backspace\" && !otp[index] && index > 0) {\n      inputRefs.current[index - 1]?.focus();\n    }\n  };\n\n  const handlePaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    const pasted = e.clipboardData\n      .getData(\"text\")\n      .replace(/\\D/g, \"\")\n      .slice(0, OTP_LENGTH);\n\n    if (!pasted) return;\n\n    setOtp(pasted);\n    inputRefs.current[pasted.length - 1]?.focus();\n  };\n\n  const verifyOtp = async (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n\n    if (otp.length !== OTP_LENGTH) {\n      toast.error(\"Please enter 6 digit OTP\");\n      return;\n    }\n\n    setIsLoading(true);\n    setErrors([]);\n\n    try {\n      const payload: VerifyLoginOtpPayload = {\n        email,\n        otp: Number(otp),\n        password,\n      };\n\n      const result = await AuthService.verifyLoginOtp(payload);\n\n      if (result.status === 200) {\n        toast.success(\"Logged in successfully\");\n        sessionStorage.removeItem(\"loginMail\");\n        sessionStorage.removeItem(\"loginPassword\");\n        router.push(\"/dashboard\")\n        dispatch(login(result.data.data))\n      }\n    } catch (error: unknown) {\n      process.env.NEXT_PUBLIC_ENV === \"development\" && console.error(error);\n      if (axios.isAxiosError(error)) {\n        const messages = extractErrorMessages(error);\n        setErrors(messages);\n      } else {\n        setErrors([\"Something went wrong\"]);\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const resendOtp = async () => {\n    setResetLoading(true);\n    try {\n      if (!email || !password) {\n        setErrors([\n          \"Email and password not found, please back to login form and try again\",\n        ]);\n      }\n\n      const payload: ResendLoginOtpPayload = {\n        email,\n        password,\n      };\n\n      const result = await AuthService.resendOTP(payload);\n      if (result.status === 200) {\n        toast.success(\"Verification OTP send successfully\");\n      }\n    } catch (error) {\n      process.env.NEXT_PUBLIC_ENV === \"development\" && console.error(error);\n      if (axios.isAxiosError(error)) {\n        const messages = extractErrorMessages(error);\n        setErrors(messages);\n      } else {\n        setErrors([\"Something went wrong\"]);\n      }\n    } finally {\n      setResetLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex items-center justify-center bg-violet-50 min-h-screen\">\n      <div className=\"bg-white p-8 rounded-xl w-[600px] flex flex-col gap-5\">\n        <h1 className=\"text-2xl font-semibold text-blue-800\">\n          Verify Login OTP\n        </h1>\n\n        <p className=\"text-sm text-gray-500\">\n          OTP is sent to{\" \"}\n          <span className=\"font-medium text-blue-500\">{email}</span>\n        </p>\n\n        <form onSubmit={verifyOtp} className=\"flex flex-col gap-7\">\n          <div className=\"flex gap-3 justify-between\">\n            {Array.from({ length: OTP_LENGTH }).map((_, index) => (\n              <input\n                key={index}\n                ref={(el) => {\n                  inputRefs.current[index] = el;\n                }}\n                type=\"text\"\n                inputMode=\"numeric\"\n                maxLength={1}\n                value={otp[index] || \"\"}\n                onChange={(e) => handleOtpChange(index, e.target.value)}\n                onKeyDown={(e) => handleKeyDown(index, e)}\n                onPaste={handlePaste}\n                className=\"\n                  w-16 h-14 text-center text-lg font-semibold\n                  border border-slate-400 text-slate-800\n                  rounded-md focus:ring-2 focus:ring-blue-500\n                \"\n              />\n            ))}\n          </div>\n\n          {errors.length > 0 && (\n            <div className=\"text-red-500 text-sm text-center\">\n              {errors.map((err, i) => (\n                <p key={i}>{err}</p>\n              ))}\n            </div>\n          )}\n\n          <FormButton isLoading={isLoading}>Verify OTP</FormButton>\n        </form>\n\n        <div className=\"text-center text-sm text-gray-600\">\n          {timeLeft > 0 ? (\n            <p>\n              Resend OTP in{\" \"}\n              <span className=\"font-semibold text-blue-600\">{timeLeft}s</span>\n            </p>\n          ) : (\n            <button\n              onClick={resendOtp}\n              className=\"text-blue-600 font-medium hover:underline\"\n            >\n              {resendLoading ? \"Sending...\" : \"Resend OTP\"}\n            </button>\n          )}\n        </div>\n\n        <button\n          onClick={() => router.back()}\n          className=\"flex items-center gap-1.5 text-slate-700 font-medium cursor-pointer hover:text-blue-400 tracking-wide\"\n        >\n          <IoChevronBack /> Step Back\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default page;\n"],"names":[],"mappings":"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"}}]
}