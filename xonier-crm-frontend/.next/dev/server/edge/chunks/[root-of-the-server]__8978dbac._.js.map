{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import {NextRequest, NextResponse} from \"next/server\"\n\nconst PROTECTED_ROUTES: Array<string> = [\"/dashboard\", \"/users\", \"/roles\", \"/enquiry\", \"/teams\", \"/notes\", \"/calender\", \"support\", \"/leads\", \"/deals\", \"/quotations\"]\nexport function middleware(request: NextRequest){\n    const {pathname} = request.nextUrl\n\n    const accessToken = request.cookies.get(\"accessToken\")?.value\n\n    if(PROTECTED_ROUTES.some((item)=> pathname.startsWith(item) && !accessToken)){\n        const loginUrl = new URL(\"/login\", request.url)\n\n        return NextResponse.redirect(loginUrl)\n    }\n\n    if(pathname.startsWith(\"/login\") && accessToken){\n        const dashboardUrl = new URL(\"/dashboard\", request.url)\n        return NextResponse.redirect(dashboardUrl)\n    }\n\n    return NextResponse.next()\n}\n\nexport const config = {\n    matcher: [\"/dashboard\", \"/dashboard/:path*\", \"/login\", \"/users\", \"/users/:path*\", \"/roles\", \"/roles/:path*\", \"/enquiry\", \"/enquiry:path*\", \"/teams\", \"/teams/:path*\", \"/notes\", \"/notes/:path*\", \"/calender\", \"/calender/:path*\", \"/support\", \"/support/:path*\", \"/leads\", \"/leads/:path*\", \"/deals\", \"/deals/:path*\", \"/quotations\", \"/quotations/:path*\"]\n}\n\n\n\n// import { NextRequest, NextResponse } from \"next/server\";\n\n// const PROTECTED_ROUTES = [\"/dashboard\", \"/users\", \"/roles\", \"/enquiry\", \"/teams\"];\n// const API_BASE_URL = process.env.API_BASE_URL!;\n\n// export async function middleware(request: NextRequest) {\n//   const { pathname } = request.nextUrl;\n//   let isAuthenticated = false;\n\n\n\n//   try {\n//     const res = await fetch(`${API_BASE_URL}/auth/me`, {\n//       headers: {\n//         cookie: request.headers.get(\"cookie\") || \"\",\n//       },\n//     });\n\n//     if (res.status === 200) {\n//       isAuthenticated = true;\n//     }\n//   } catch (err) {\n//     isAuthenticated = false;\n//   }\n\n//   if (\n//     PROTECTED_ROUTES.some(\n//       (route) => pathname.startsWith(route) && !isAuthenticated\n//     )\n//   ) {\n//     return NextResponse.redirect(new URL(\"/login\", request.url));\n//   }\n\n//   if (pathname.startsWith(\"/login\") && isAuthenticated) {\n//     return NextResponse.redirect(new URL(\"/dashboard\", request.url));\n//   }\n\n//   return NextResponse.next();\n// }\n\n// export const config = {\n//   matcher: [\n//     \"/dashboard\",\n//     \"/dashboard/:path*\",\n//     \"/login\",\n//     \"/users\",\n//     \"/users/:path*\",\n//     \"/roles\",\n//     \"/roles/:path*\",\n//     \"/enquiry\",\n//     \"/enquiry/:path*\",\n//     \"/teams\",\n//     \"/teams/:path*\",\n//   ],\n// };\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEA,MAAM,mBAAkC;IAAC;IAAc;IAAU;IAAU;IAAY;IAAU;IAAU;IAAa;IAAW;IAAU;IAAU;CAAc;AAC9J,SAAS,WAAW,OAAoB;IAC3C,MAAM,EAAC,QAAQ,EAAC,GAAG,QAAQ,OAAO;IAElC,MAAM,cAAc,QAAQ,OAAO,CAAC,GAAG,CAAC,gBAAgB;IAExD,IAAG,iBAAiB,IAAI,CAAC,CAAC,OAAQ,SAAS,UAAU,CAAC,SAAS,CAAC,cAAa;QACzE,MAAM,WAAW,IAAI,IAAI,UAAU,QAAQ,GAAG;QAE9C,OAAO,gMAAY,CAAC,QAAQ,CAAC;IACjC;IAEA,IAAG,SAAS,UAAU,CAAC,aAAa,aAAY;QAC5C,MAAM,eAAe,IAAI,IAAI,cAAc,QAAQ,GAAG;QACtD,OAAO,gMAAY,CAAC,QAAQ,CAAC;IACjC;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC5B;AAEO,MAAM,SAAS;IAClB,SAAS;QAAC;QAAc;QAAqB;QAAU;QAAU;QAAiB;QAAU;QAAiB;QAAY;QAAkB;QAAU;QAAiB;QAAU;QAAiB;QAAa;QAAoB;QAAY;QAAmB;QAAU;QAAiB;QAAU;QAAiB;QAAe;KAAqB;AAC/V,EAIA,2DAA2D;CAE3D,qFAAqF;CACrF,kDAAkD;CAElD,2DAA2D;CAC3D,0CAA0C;CAC1C,iCAAiC;CAIjC,UAAU;CACV,2DAA2D;CAC3D,mBAAmB;CACnB,uDAAuD;CACvD,WAAW;CACX,UAAU;CAEV,gCAAgC;CAChC,gCAAgC;CAChC,QAAQ;CACR,oBAAoB;CACpB,+BAA+B;CAC/B,MAAM;CAEN,SAAS;CACT,6BAA6B;CAC7B,kEAAkE;CAClE,QAAQ;CACR,QAAQ;CACR,oEAAoE;CACpE,MAAM;CAEN,4DAA4D;CAC5D,wEAAwE;CACxE,MAAM;CAEN,gCAAgC;CAChC,IAAI;CAEJ,0BAA0B;CAC1B,eAAe;CACf,oBAAoB;CACpB,2BAA2B;CAC3B,gBAAgB;CAChB,gBAAgB;CAChB,uBAAuB;CACvB,gBAAgB;CAChB,uBAAuB;CACvB,kBAAkB;CAClB,yBAAyB;CACzB,gBAAgB;CAChB,uBAAuB;CACvB,OAAO;CACP,KAAK"}}]
}